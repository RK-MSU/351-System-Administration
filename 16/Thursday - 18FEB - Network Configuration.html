<!DOCTYPE html>
<html>
<head>
</head>
<body style="font-family: 'Lato', sans-serif;">
<p><strong>Screencast:</strong>&nbsp;<a href="https://www.cs.montana.edu/users/sdowdle/csci351/videos/16-networking.webm" target="_blank" rel="noopener">16-networking.webm</a> or <a href="https://www.cs.montana.edu/users/sdowdle/csci351/videos/16-networking.mp4" target="_blank" rel="noopener">16-networking.mp4</a></p>
<p><span style="font-weight: bold;">LaUSAH REFERENCE - Chapter 14, TCP/IP Networking<br />RHEL8 Configuring and Managing Networking Guide</span><span style="font-weight: bold;"> (PDF)<br /></span></p>
<p>Please <span style="text-decoration: underline;"><strong>DO NOT</strong></span> edit nor attempt to alter the network configuration of your student KVM VM.</p>
<p><span style="font-weight: bold;">What network card do I have?</span><span style="font-weight: bold;"><br /></span></p>
<div style="margin-left: 40px;"><span style="font-family: courier new, courier, monospace;">lspci | grep -i net <span style="font-family: arial, helvetica, sans-serif;">(lspci is provided by the pciutils package)</span><br /></span></div>
<div style="margin-left: 40px;">(will work in KVM VM [or physical machine])</div>
<div style="margin-left: 40px;">&nbsp;</div>
<div style="margin-left: 40px;">Example output:</div>
<div style="margin-left: 40px; padding-left: 30px;"><span style="font-family: courier new, courier, sans-serif;">[root@kvm-dowdle ~]# lspci | grep -i net</span><br /><span style="font-family: courier new, courier, sans-serif;">00:03.0 Ethernet controller: Red Hat, Inc Virtio network device </span></div>
<p><span style="font-weight: bold;">Network basics</span><span style="font-weight: bold;"><br /></span></p>
<p style="padding-left: 30px;">To configure the network on a computer you usually need to know a few pieces of information:</p>
<div style="margin-left: 40px;">
<ul>
<li>IP address</li>
<li>Default gateway</li>
<li>Network mask</li>
<li>DNS</li>
</ul>
If your network uses DHCP (Dynamic Host Configuration Protocol) you can use a dhcp client application and have your computer get all of the needed network settings from the DHCP server.</div>
<p><span style="font-weight: bold;">Tools to configure the network</span></p>
<blockquote>
<ul>
<li>nmcli - <a href="https://www.youtube.com/watch?v=6xfSUdxeasA" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=6xfSUdxeasA</a></li>
<li>nmtui - <a href="https://www.youtube.com/watch?v=E7gWVZrZbUY" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=E7gWVZrZbUY</a></li>
<li>nm gui -&nbsp;<a href="https://www.youtube.com/watch?v=QJd3AJW05Aw" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=QJd3AJW05Aw</a> (applets for KDE and GNOME)</li>
</ul>
</blockquote>
<p style="padding-left: 30px;">Lower Level Tools</p>
<p style="padding-left: 60px;">ip, ifconfig</p>
<p><span style="font-weight: bold;">How to set the system hostname</span></p>
<p style="padding-left: 30px;"><span style="font-family: courier new, courier, sans-serif;">hostnamectl set-hostname {host.domain.tld}<br />hostnamectl set-hostname kvm-dowdle.localdomain<br /></span></p>
<p><span style="font-weight: bold;">Example configurations</span></p>
<div style="margin-left: 40px;"><span style="font-family: courier new, courier, monospace;">[root@csci351 ~]# cat <strong>/etc/sysconfig/network-scripts/ifcfg-ens18</strong></span><br /><span style="font-family: courier new, courier, sans-serif;">TYPE=Ethernet</span><br /><span style="font-family: courier new, courier, sans-serif;">PROXY_METHOD=none</span><br /><span style="font-family: courier new, courier, sans-serif;">BROWSER_ONLY=no</span><br /><span style="font-family: courier new, courier, sans-serif;">BOOTPROTO=none</span><br /><span style="font-family: courier new, courier, sans-serif;">DEFROUTE=yes</span><br /><span style="font-family: courier new, courier, sans-serif;">IPV4_FAILURE_FATAL=yes</span><br /><span style="font-family: courier new, courier, sans-serif;">IPV6INIT=yes</span><br /><span style="font-family: courier new, courier, sans-serif;">IPV6_AUTOCONF=no</span><br /><span style="font-family: courier new, courier, sans-serif;">IPV6_DEFROUTE=yes</span><br /><span style="font-family: courier new, courier, sans-serif;">IPV6_FAILURE_FATAL=no</span><br /><span style="font-family: courier new, courier, sans-serif;">IPV6_ADDR_GEN_MODE=stable-privacy</span><br /><span style="font-family: courier new, courier, sans-serif;">NAME=ens18</span><br /><span style="font-family: courier new, courier, sans-serif;">UUID=a28f5b2c-99b4-454c-b3f4-0e3efb89baeb</span><br /><span style="font-family: courier new, courier, sans-serif;">DEVICE=ens18</span><br /><span style="font-family: courier new, courier, sans-serif;">ONBOOT=yes</span><br /><span style="font-family: courier new, courier, sans-serif;">IPADDR=153.90.127.176</span><br /><span style="font-family: courier new, courier, sans-serif;">PREFIX=24</span><br /><span style="font-family: courier new, courier, sans-serif;">GATEWAY=153.90.127.254</span><br /><span style="font-family: courier new, courier, sans-serif;">DNS1=153.90.2.1</span><br /><span style="font-family: courier new, courier, sans-serif;">DNS2=153.90.2.15</span><br /><span style="font-family: courier new, courier, sans-serif;">DOMAIN="cs.montana.edu msu.montana.edu coe.montana.edu"</span><br /><span style="font-family: courier new, courier, sans-serif;">IPV6_PRIVACY=no</span><br /><br /><span style="font-weight: bold;"> </span>Please note that <span style="font-family: courier new, courier, sans-serif;"><strong>/etc/hosts</strong></span> is a special file in that it can be used as a sort of "local DNS".<span style="font-family: courier new, courier, sans-serif;"> /etc/hosts</span> is usually consulted before the specified nameservers and <span style="font-family: courier new, courier, sans-serif;">/etc/hosts</span> can be used to override DNS lookups if desired.&nbsp; <span style="font-family: courier new, courier, sans-serif;">/etc/hosts</span> sample contents:</div>
<div style="margin-left: 40px; padding-left: 30px;"><span style="font-family: courier new, courier, sans-serif;">&nbsp;</span></div>
<div style="margin-left: 40px; padding-left: 30px;"><span style="font-family: courier new, courier, sans-serif;">[dowdle@csci351 ~]$ cat /etc/hosts</span></div>
<div style="margin-left: 40px; padding-left: 30px;"><span style="font-family: courier new, courier, sans-serif;">(examine the output... short excerpt below)<br />192.168.122.101&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kvm-101.localdomain&nbsp;&nbsp;&nbsp;&nbsp; kvm-101&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kvm-alghamdi<br />192.168.122.102&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kvm-102.localdomain&nbsp;&nbsp;&nbsp;&nbsp; kvm-102&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kvm-alvarez<br />192.168.122.103&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kvm-103.localdomain&nbsp;&nbsp;&nbsp;&nbsp; kvm-103&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kvm-arstein<br />&nbsp;&nbsp; [...]<br />92.168.122.157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kvm-157.localdomain&nbsp;&nbsp;&nbsp;&nbsp; kvm-157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kvm-wilkerson<br />192.168.122.158&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kvm-158.localdomain&nbsp;&nbsp;&nbsp;&nbsp; kvm-158&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kvm-wintersteen<br />192.168.122.159&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kvm-159.localdomain&nbsp;&nbsp;&nbsp;&nbsp; kvm-159&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kvm-zetterberg<br /></span><span style="font-family: courier new, courier, sans-serif;"></span></div>
<div style="margin-left: 40px; padding-left: 30px;"><span style="font-family: courier new, courier, sans-serif;"></span></div>
<div style="margin-left: 40px;"><span style="text-decoration: underline;">DNS configuration</span> is stored in <strong>/etc/resolv.conf</strong>.&nbsp; Here is an example <span style="font-family: courier new, courier, sans-serif;">/etc/resolv.conf</span>:</div>
<div style="margin-left: 40px; padding-left: 30px;"><span style="font-family: courier new, courier, sans-serif;">&nbsp;</span></div>
<div style="margin-left: 40px; padding-left: 30px;"><span style="font-family: courier new, courier, sans-serif;">[sdowdle@csci351 ~]$ cat /etc/resolv.conf</span></div>
<div style="margin-left: 40px; padding-left: 30px;"><span style="font-family: courier new, courier, sans-serif;"># Generated by NetworkManager</span></div>
<div style="margin-left: 40px; padding-left: 30px;"><span style="font-family: courier new, courier, sans-serif;">search cs.montana.edu msu.montana.edu coe.montana.edu<br />nameserver 153.90.2.1<br />nameserver 153.90.2.15<br /><br /></span></div>
<div style="margin-left: 40px; padding-left: 30px;"></div>
<div style="margin-left: 40px;">How does DNS work anyway?</div>
<div style="margin-left: 40px; padding-left: 30px;"><img src="/content/enforced1/425350-CSCI_351_001_201730/17-networking-how-dns-works.png" alt="How DNS Works illustration" title="How DNS Works illustration" /></div>
<div style="margin-left: 40px; padding-left: 30px;">&nbsp;</div>
<div><strong>DNS Related Commands</strong><strong><br /></strong></div>
<div><strong>&nbsp;</strong></div>
<div style="margin-left: 20px;">The <strong><span style="font-family: courier new, courier, sans-serif;">/usr/bin/host</span></strong> command is part of the <strong><span style="font-family: courier new, courier, sans-serif;">bind-utils</span></strong> package. Example:</div>
<div style="margin-left: 20px;">&nbsp;</div>
<div style="margin-left: 20px; padding-left: 30px;"><span style="font-family: courier new, courier, sans-serif;">host <a href="/content/enforced1/474906-CSCI_351_001_201830/www.cs.montana.edu">www.cs.montana.edu</a></span><br /><span style="font-family: courier new, courier, sans-serif;">host 153.90.127.197</span></div>
<div style="margin-left: 20px; padding-left: 30px;">&nbsp;</div>
<div style="margin-left: 20px;">The <strong><span style="font-family: courier new, courier, sans-serif;">/usr/bin/dig</span></strong> command is part of the <strong><span style="font-family: courier new, courier, sans-serif;">bind-utils</span></strong> package.&nbsp; Example:</div>
<div style="margin-left: 20px;">&nbsp;</div>
<div style="margin-left: 20px; padding-left: 30px;"><span style="font-family: courier new, courier, sans-serif;">dig MX cs.montana.edu</span> (shows Mail eXchange record)<br /><span style="font-family: courier new, courier, sans-serif;">dig NS cs.montana.edu</span> (shows NameServer record)</div>
<div style="margin-left: 20px; padding-left: 30px;">&nbsp;</div>
<div style="margin-left: 20px;">The <strong><span style="font-family: courier new, courier, sans-serif;">/usr/bin/nslookup</span></strong> command is part of the <strong><span style="font-family: courier new, courier, sans-serif;">bind-utils</span></strong> package.&nbsp; Example:</div>
<div style="margin-left: 20px;">&nbsp;</div>
<div style="margin-left: 20px; padding-left: 30px;"><span style="font-family: courier new, courier, sans-serif;">nslookup <a href="/content/enforced1/474906-CSCI_351_001_201830/www.cs.montana.edu">www.cs.montana.edu</a></span></div>
<div style="margin-left: 20px; padding-left: 30px;"><br />nslookup interactively:<br /><br />
<div style="margin-left: 20px;"><span style="font-family: courier new, courier, sans-serif;">[dowdle@dowdle ~]$ nslookup</span><br /><span style="font-family: courier new, courier, sans-serif;">&gt; server 8.8.8.8</span><br /><span style="font-family: courier new, courier, sans-serif;">Default server: 8.8.8.8</span><br /><span style="font-family: courier new, courier, sans-serif;">Address: 8.8.8.8#53</span><br /><span style="font-family: courier new, courier, sans-serif;">&gt; <a href="/content/enforced1/474906-CSCI_351_001_201830/www.montanalinux.org">www.montanalinux.org</a></span><br /><span style="font-family: courier new, courier, sans-serif;">Server: 8.8.8.8</span><br /><span style="font-family: courier new, courier, sans-serif;">Address: 8.8.8.8#53</span><br /><br /><span style="font-family: courier new, courier, sans-serif;">Non-authoritative answer:</span><br /><span style="font-family: courier new, courier, sans-serif;">Name: <a href="/content/enforced1/474906-CSCI_351_001_201830/www.montanalinux.org">www.montanalinux.org</a></span><br /><span style="font-family: courier new, courier, sans-serif;">Address: 69.60.124.50</span><br /><span style="font-family: courier new, courier, sans-serif;">&gt; exit</span><br /><br /><span style="font-family: courier new, courier, sans-serif;">[dowdle@dowdle ~]$</span></div>
<div style="margin-left: 20px;"><span style="font-family: courier new, courier, sans-serif;">&nbsp;</span></div>
</div>
<div style="margin-left: 20px;">The <strong><span style="font-family: courier new, courier, sans-serif;">/usr/bin/whois </span></strong>command is part of the <strong><span style="font-family: courier new, courier, sans-serif;">whois</span></strong> package.&nbsp;</div>
<div style="margin-left: 20px;">&nbsp;&nbsp; Unfortunately, much of the info is no longer shown these days and the usefulness of the command has diminished.</div>
<div style="margin-left: 20px;">Example:</div>
<p style="padding-left: 30px;"><span style="font-family: courier new, courier, sans-serif;">[dowdle@csci351 ~]$ whois montanalinux.org</span><br />&nbsp;<span style="font-family: courier new, courier, sans-serif;">whois montanalinux.org<br />[Querying whois.pir.org]<br />[whois.pir.org]<br />Domain Name: MONTANALINUX.ORG<br />Domain ID: D33213288-LROR<br />WHOIS Server:<br />Referral URL: <a href="http://www.networksolutions.com">http://www.networksolutions.com</a><br />Updated Date: 2012-08-03T21:30:52Z<br />Creation Date: 2000-08-18T21:48:24Z<br />Registry Expiry Date: 2017-08-18T21:48:24Z<br />Sponsoring Registrar: Network Solutions, LLC<br />Sponsoring Registrar IANA ID: 2<br />Domain Status: clientTransferProhibited <a href="https://www.icann.org/epp#clientTransferProhibited">https://www.icann.org/epp#clientTransferProhibited</a><br />Registrant ID: 5991102-NSI<br />Registrant Name: SCOTT DOWDLE<br />Registrant Organization:<br />Registrant Street: 704 Church Street<br />Registrant City: Belgrade<br />Registrant State/Province: MT<br />Registrant Postal Code: 59714<br />Registrant Country: US<br />Registrant Phone: +1.4063880827<br />Registrant Phone Ext:<br />Registrant Fax:<br />Registrant Fax Ext:<br />Registrant Email: dowdle@montanalinux.org<br />Admin ID: 5991102-NSI<br />Admin Name: SCOTT DOWDLE<br />Admin Organization:<br />Admin Street: 704 Church Street<br />Admin City: Belgrade<br />Admin State/Province: MT<br />Admin Postal Code: 59714<br />Admin Country: US<br />Admin Phone: +1.4063880827<br />Admin Phone Ext:<br />Admin Fax:<br />Admin Fax Ext:<br />Admin Email: dowdle@montanalinux.org<br />Tech ID: 5991102-NSI<br />Tech Name: SCOTT DOWDLE<br />Tech Organization:<br />Tech Street: 704 Church Street<br />Tech City: Belgrade<br />Tech State/Province: MT<br />Tech Postal Code: 59714<br />Tech Country: US<br />Tech Phone: +1.4063880827<br />Tech Phone Ext:<br />Tech Fax:<br />Tech Fax Ext:<br />Tech Email: dowdle@montanalinux.org<br />Name Server: NS33.WORLDNIC.COM<br />Name Server: NS34.WORLDNIC.COM<br />DNSSEC: unsigned<br />&gt;&gt;&gt; Last update of WHOIS database: 2016-02-23T17:08:12Z &lt;&lt;&lt;<br /><br /></span></p>
</body>
</html>