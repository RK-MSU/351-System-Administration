<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>CSCI-351: System Administration</title>
  <meta name="description" content="CSCI-351: Course Contents" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="CSCI-351: System Administration" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://rk311y.github.io/351-System-Administration/" />
  
  <meta property="og:description" content="CSCI-351: Course Contents" />
  <meta name="github-repo" content="RK311y/351-System-Administration" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="CSCI-351: System Administration" />
  
  <meta name="twitter:description" content="CSCI-351: Course Contents" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  


<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">System Administration</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path=""><a href="#welcome"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path=""><a href="#quiz-solutions"><i class="fa fa-check"></i>Quiz Solutions</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#quiz-1"><i class="fa fa-check"></i>Quiz 1</a></li>
<li class="chapter" data-level="" data-path=""><a href="#quiz-2"><i class="fa fa-check"></i>Quiz 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-01"><i class="fa fa-check"></i>01 - Introduction</a></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-02"><i class="fa fa-check"></i>02 - History - Unix, Free Software and Linux</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#in-the-beginning"><i class="fa fa-check"></i>In the Beginning</a></li>
<li class="chapter" data-level="" data-path=""><a href="#the-industry-evolves"><i class="fa fa-check"></i>The Industry Evolves</a></li>
<li class="chapter" data-level="" data-path=""><a href="#birth-of-unix-at-att-bell-labs-1969"><i class="fa fa-check"></i>Birth of UNIX at AT&amp;T Bell Labs (1969)</a></li>
<li><a href="#richard-stallman-rms"><span>Richard Stallman</span> (RMS)</a></li>
<li class="chapter" data-level="" data-path=""><a href="#berkeley-software-distribution-bsd"><i class="fa fa-check"></i>Berkeley Software Distribution (BSD)</a></li>
<li><a href="#andrew-s.-tanenbaum-ast"><span>Andrew S. Tanenbaum</span> (AST)</a></li>
<li><a href="#linus-torvalds"><span>Linus Torvalds</span></a></li>
<li><a href="#why-red-hat-enterprise-linux">Why <span>Red Hat</span> Enterprise Linux?</a></li>
<li><a href="#why-centos">Why <span>CentOS</span>?</a></li>
<li><a href="#why-fedora">Why <span>Fedora</span>?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#open-source-open-source-inititive"><i class="fa fa-check"></i>Open Source (Open Source Inititive)</a></li>
<li class="chapter" data-level="" data-path=""><a href="#things-to-ponder"><i class="fa fa-check"></i>Things to Ponder</a></li>
<li class="chapter" data-level="" data-path=""><a href="#tlcl-book-put-it-like-this"><i class="fa fa-check"></i>TLCL book put it like this:</a></li>
<li class="chapter" data-level="" data-path=""><a href="#references"><i class="fa fa-check"></i>REFERENCES:</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-03"><i class="fa fa-check"></i>03 - What is a Linux Distribution</a></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-04"><i class="fa fa-check"></i>04 - What is a System Administrator</a></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-05"><i class="fa fa-check"></i>05 - Installing Linux</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#types-of-media"><i class="fa fa-check"></i>Types of Media</a></li>
<li class="chapter" data-level="" data-path=""><a href="#xubuntu-live-media-install"><i class="fa fa-check"></i>Xubuntu (Live Media Install)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-06"><i class="fa fa-check"></i>06 - CLI Use</a></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-07"><i class="fa fa-check"></i>07 - User Accounts</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#related-files-ensure-the-man-pages-package-is-installed"><i class="fa fa-check"></i>Related files (ensure the man-pages package is installed)</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#etcpasswd-man-5-passwd"><i class="fa fa-check"></i>/etc/passwd (man 5 passwd)</a></li>
<li class="chapter" data-level="" data-path=""><a href="#etcshadow-man-5-shadow"><i class="fa fa-check"></i>/etc/shadow (man 5 shadow)</a></li>
<li class="chapter" data-level="" data-path=""><a href="#etcgroup-man-5-group"><i class="fa fa-check"></i>/etc/group (man 5 group)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#related-commands-and-issues"><i class="fa fa-check"></i>Related Commands and Issues</a></li>
<li class="chapter" data-level="" data-path=""><a href="#escalating-privileges"><i class="fa fa-check"></i>Escalating privileges</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-08"><i class="fa fa-check"></i>08 - Hard disks, Partitions, and Filesystems</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#hard-drives"><i class="fa fa-check"></i>Hard Drives</a></li>
<li class="chapter" data-level="" data-path=""><a href="#partitioning-applications"><i class="fa fa-check"></i>Partitioning Applications</a></li>
<li class="chapter" data-level="" data-path=""><a href="#partitioning-schemes"><i class="fa fa-check"></i>Partitioning Schemes</a></li>
<li class="chapter" data-level="" data-path=""><a href="#filesystems"><i class="fa fa-check"></i>Filesystems</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#types"><i class="fa fa-check"></i>Types</a></li>
<li class="chapter" data-level="" data-path=""><a href="#formating-commands"><i class="fa fa-check"></i>Formating commands</a></li>
<li class="chapter" data-level="" data-path=""><a href="#network-filesystems"><i class="fa fa-check"></i>Network filesystems</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-09"><i class="fa fa-check"></i>09 - Linux Filesystem Hierarchy</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#everything-is-a-file"><i class="fa fa-check"></i>Everything is a File</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-10"><i class="fa fa-check"></i>10 - Command Line Potpourri</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#unix-philosophy"><i class="fa fa-check"></i>Unix Philosophy</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#man-pages"><i class="fa fa-check"></i>man pages</a></li>
<li class="chapter" data-level="" data-path=""><a href="#wild-cards-and"><i class="fa fa-check"></i>Wild cards and ~</a></li>
<li class="chapter" data-level="" data-path=""><a href="#white-space-and-special-characters"><i class="fa fa-check"></i>White space and special characters</a></li>
<li class="chapter" data-level="" data-path=""><a href="#pipes-and-redirection"><i class="fa fa-check"></i>Pipes and redirection</a></li>
<li class="chapter" data-level="" data-path=""><a href="#back-ticks"><i class="fa fa-check"></i>back-ticks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#commands-to-spotlight"><i class="fa fa-check"></i>Commands to spotlight</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#tmux"><i class="fa fa-check"></i>tmux</a></li>
<li class="chapter" data-level="" data-path=""><a href="#mc---midnight-commander"><i class="fa fa-check"></i>mc - Midnight Commander</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#file-related-commands"><i class="fa fa-check"></i>File related commands</a></li>
<li class="chapter" data-level="" data-path=""><a href="#file-archive-related-commands"><i class="fa fa-check"></i>File archive related commands</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#gz-compression"><i class="fa fa-check"></i>GZ Compression</a></li>
<li class="chapter" data-level="" data-path=""><a href="#xz-compression"><i class="fa fa-check"></i>XZ Compression</a></li>
<li class="chapter" data-level="" data-path=""><a href="#tar-compression"><i class="fa fa-check"></i>TAR Compression</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#network-related-commands"><i class="fa fa-check"></i>Network related commands</a></li>
<li class="chapter" data-level="" data-path=""><a href="#utility-commands"><i class="fa fa-check"></i>Utility commands</a></li>
<li class="chapter" data-level="" data-path=""><a href="#system-admin-related-commands"><i class="fa fa-check"></i>System Admin related commands</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-11"><i class="fa fa-check"></i>11 - Understanding File &amp; Directory Ownership and Permissions</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#dac"><i class="fa fa-check"></i>DAC</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#dac-cont."><i class="fa fa-check"></i>DAC (cont.)</a></li>
<li class="chapter" data-level="" data-path=""><a href="#mac"><i class="fa fa-check"></i>MAC</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#related-commands"><i class="fa fa-check"></i>Related commands</a></li>
<li class="chapter" data-level="" data-path=""><a href="#ownership"><i class="fa fa-check"></i>Ownership</a></li>
<li class="chapter" data-level="" data-path=""><a href="#permissions"><i class="fa fa-check"></i>Permissions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-11a"><i class="fa fa-check"></i>11a - Immutable Bit</a></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-12"><i class="fa fa-check"></i>12 - Package Management</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#what-you-may-already-know"><i class="fa fa-check"></i>What you may already know</a></li>
<li class="chapter" data-level="" data-path=""><a href="#using-rpm---lower-level-tool-written-in-c"><i class="fa fa-check"></i>Using rpm - lower level tool written in C</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#query-packages"><i class="fa fa-check"></i>Query packages</a></li>
<li class="chapter" data-level="" data-path=""><a href="#verify-packages"><i class="fa fa-check"></i>Verify packages</a></li>
<li class="chapter" data-level="" data-path=""><a href="#rpm-continued"><i class="fa fa-check"></i>RPM continued</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#using-dnf"><i class="fa fa-check"></i>Using dnf</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#dnf-parameters"><i class="fa fa-check"></i>dnf parameters</a></li>
<li class="chapter" data-level="" data-path=""><a href="#configuration-files"><i class="fa fa-check"></i>Configuration Files</a></li>
<li class="chapter" data-level="" data-path=""><a href="#appstreams-aka-modularity"><i class="fa fa-check"></i>AppStreams (aka Modularity)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#where-to-find-additional-software"><i class="fa fa-check"></i>Where to find additional software</a></li>
<li class="chapter" data-level="" data-path=""><a href="#other-package-managers"><i class="fa fa-check"></i>Other package managers</a></li>
<li class="chapter" data-level="" data-path=""><a href="#graphical-package-managers"><i class="fa fa-check"></i>Graphical package managers</a></li>
<li class="chapter" data-level="" data-path=""><a href="#distro-agnostic-packaging"><i class="fa fa-check"></i>Distro Agnostic Packaging?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#additional-resources"><i class="fa fa-check"></i>Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-13"><i class="fa fa-check"></i>13 - Processes and Resource Management</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#what-you-may-already-know-1"><i class="fa fa-check"></i>What you may already know</a></li>
<li class="chapter" data-level="" data-path=""><a href="#what-is-the-init-process"><i class="fa fa-check"></i>What is the init process?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#what-is-a-pid"><i class="fa fa-check"></i>What is a PID?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#what-is-process-ownership"><i class="fa fa-check"></i>What is process ownership?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#what-is-a-priority-and-niceness"><i class="fa fa-check"></i>What is a priority and niceness?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#what-is-a-process-status-man-ps"><i class="fa fa-check"></i>What is a process status? (man ps)</a></li>
<li class="chapter" data-level="" data-path=""><a href="#what-are-signals-man-7-signal-or-kill--l-list"><i class="fa fa-check"></i>What are signals? (man 7 signal or kill -l [list])</a></li>
<li class="chapter" data-level="" data-path=""><a href="#commands-youll-want-to-learn"><i class="fa fa-check"></i>Commands you’ll want to learn</a></li>
<li class="chapter" data-level="" data-path=""><a href="#settings-that-affect-user-resource-usage"><i class="fa fa-check"></i>Settings that affect user resource usage</a></li>
<li class="chapter" data-level="" data-path=""><a href="#disk-management"><i class="fa fa-check"></i>Disk Management</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#examples-3"><i class="fa fa-check"></i>Examples</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#cgroups-and-systemd"><i class="fa fa-check"></i>cgroups and systemd</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-14"><i class="fa fa-check"></i>14 - Init System &amp; Services</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#in-the-beginning-1"><i class="fa fa-check"></i>In the Beginning</a></li>
<li class="chapter" data-level="" data-path=""><a href="#alternative-init-systems"><i class="fa fa-check"></i>Alternative init systems</a></li>
<li class="chapter" data-level="" data-path=""><a href="#systemd"><i class="fa fa-check"></i>systemd</a></li>
<li class="chapter" data-level="" data-path=""><a href="#systemd-programs-commands"><i class="fa fa-check"></i>systemd programs / commands</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#isolation-resource-management"><i class="fa fa-check"></i>Isolation &amp; Resource Management</a></li>
<li class="chapter" data-level="" data-path=""><a href="#examples-4"><i class="fa fa-check"></i>Examples</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-15"><i class="fa fa-check"></i>15 - Backups</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#tar---the-gnu-version-of-the-tar-archiving-utility"><i class="fa fa-check"></i>tar - The GNU version of the tar archiving utility</a></li>
<li class="chapter" data-level="" data-path=""><a href="#scp---secure-copy-remote-file-copy-program-overwrites-destination-files"><i class="fa fa-check"></i>scp - Secure copy (remote file copy program), overwrites destination files</a></li>
<li class="chapter" data-level="" data-path=""><a href="#rsync---a-fast-versatile-remote-and-local-file-copying-tool"><i class="fa fa-check"></i>rsync - A fast, versatile, remote (and local) file-copying tool</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#example"><i class="fa fa-check"></i>Example</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#borgbackup---chunk-based-backup-program."><i class="fa fa-check"></i>borgbackup - Chunk-based backup program.</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#features"><i class="fa fa-check"></i>Features</a></li>
<li class="chapter" data-level="" data-path=""><a href="#examples-5"><i class="fa fa-check"></i>Examples</a></li>
<li class="chapter" data-level="" data-path=""><a href="#usage"><i class="fa fa-check"></i>Usage</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#imaging-software---bit-by-bit-copy-rather-than-file-based"><i class="fa fa-check"></i>Imaging Software - bit-by-bit copy rather than file-based</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-16"><i class="fa fa-check"></i>16 - Network Configuration</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#what-network-card-do-i-have"><i class="fa fa-check"></i>What network card do I have?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#network-basics"><i class="fa fa-check"></i>Network basics</a></li>
<li class="chapter" data-level="" data-path=""><a href="#tools-to-configure-the-network"><i class="fa fa-check"></i>Tools to configure the network</a></li>
<li class="chapter" data-level="" data-path=""><a href="#how-to-set-the-system-hostname"><i class="fa fa-check"></i>How to set the system hostname</a></li>
<li class="chapter" data-level="" data-path=""><a href="#example-configurations"><i class="fa fa-check"></i>Example configurations</a></li>
<li class="chapter" data-level="" data-path=""><a href="#dns-related-commands"><i class="fa fa-check"></i>DNS Related Commands</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-17"><i class="fa fa-check"></i>17 - Desktop Linux</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#in-the-beginning-was-x"><i class="fa fa-check"></i>In the Beginning was X</a></li>
<li class="chapter" data-level="" data-path=""><a href="#window-managers"><i class="fa fa-check"></i>Window Managers</a></li>
<li class="chapter" data-level="" data-path=""><a href="#desktop-environments"><i class="fa fa-check"></i>Desktop Environments</a></li>
<li class="chapter" data-level="" data-path=""><a href="#network-transparency"><i class="fa fa-check"></i>Network Transparency</a></li>
<li class="chapter" data-level="" data-path=""><a href="#the-future"><i class="fa fa-check"></i>The Future?</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-18"><i class="fa fa-check"></i>18 - Firewalls with firewalld</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#services-and-ports"><i class="fa fa-check"></i>Services and Ports</a></li>
<li class="chapter" data-level="" data-path=""><a href="#iptables-overview"><i class="fa fa-check"></i>IPTABLES Overview</a></li>
<li class="chapter" data-level="" data-path=""><a href="#firewalld-overview"><i class="fa fa-check"></i>FIREWALLD Overview</a></li>
<li class="chapter" data-level="" data-path=""><a href="#using-firewalld"><i class="fa fa-check"></i>Using FIREWALLD</a></li>
<li class="chapter" data-level="" data-path=""><a href="#firewalld-service-files"><i class="fa fa-check"></i>FIREWALLD SERVICE FILES</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#firewalld-advanced-features"><i class="fa fa-check"></i>FIREWALLD ADVANCED FEATURES</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-19"><i class="fa fa-check"></i>19 - System Logs &amp; Monitoring</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#rsyslog"><i class="fa fa-check"></i>RSYSLOG</a></li>
<li class="chapter" data-level="" data-path=""><a href="#logrotate"><i class="fa fa-check"></i>LOGROTATE</a></li>
<li class="chapter" data-level="" data-path=""><a href="#logrotate-files"><i class="fa fa-check"></i>LOGROTATE FILES</a></li>
<li class="chapter" data-level="" data-path=""><a href="#logwatch"><i class="fa fa-check"></i>LOGWATCH</a></li>
<li class="chapter" data-level="" data-path=""><a href="#journald"><i class="fa fa-check"></i>journald</a></li>
<li class="chapter" data-level="" data-path=""><a href="#session-vs-persistant"><i class="fa fa-check"></i>SESSION VS PERSISTANT</a></li>
<li class="chapter" data-level="" data-path=""><a href="#journald-features"><i class="fa fa-check"></i>JOURNALD FEATURES</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#journalctl-examples"><i class="fa fa-check"></i>journalctl Examples</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#journalctl-presentation-video-by-lennart-poettering"><i class="fa fa-check"></i>journalctl presentation video by Lennart Poettering</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-20"><i class="fa fa-check"></i>20 - Automation with Cron</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#background"><i class="fa fa-check"></i>Background</a></li>
<li class="chapter" data-level="" data-path=""><a href="#cron-files"><i class="fa fa-check"></i>CRON Files</a></li>
<li class="chapter" data-level="" data-path=""><a href="#cron-access-control"><i class="fa fa-check"></i>CRON Access Control</a></li>
<li class="chapter" data-level="" data-path=""><a href="#thus-says-the-man-pages"><i class="fa fa-check"></i>Thus Says the Man Pages</a></li>
<li class="chapter" data-level="" data-path=""><a href="#crontab-format"><i class="fa fa-check"></i>CRONTAB Format</a></li>
<li class="chapter" data-level="" data-path=""><a href="#using-crontab"><i class="fa fa-check"></i>Using CRONTAB</a></li>
<li class="chapter" data-level="" data-path=""><a href="#review-from-logging-material"><i class="fa fa-check"></i>Review from Logging Material</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-21"><i class="fa fa-check"></i>21 - Server Apps: Email</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#what-do-you-use-for-email"><i class="fa fa-check"></i>What do you use for email?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#what-comprises-an-email-system"><i class="fa fa-check"></i>What comprises an email system?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#how-email-works"><i class="fa fa-check"></i>How email works</a></li>
<li class="chapter" data-level="" data-path=""><a href="#various-anti-spam-tricks"><i class="fa fa-check"></i>Various anti-spam tricks</a></li>
<li class="chapter" data-level="" data-path=""><a href="#looking-for-a-complete-package"><i class="fa fa-check"></i>Looking for a complete package</a></li>
<li class="chapter" data-level="" data-path=""><a href="#smtp-server-software"><i class="fa fa-check"></i>SMTP server software</a></li>
<li class="chapter" data-level="" data-path=""><a href="#pop-and-imap"><i class="fa fa-check"></i>POP and IMAP</a></li>
<li class="chapter" data-level="" data-path=""><a href="#email-client-programs"><i class="fa fa-check"></i>Email Client Programs</a></li>
<li class="chapter" data-level="" data-path=""><a href="#email-related-configs"><i class="fa fa-check"></i>Email Related Configs</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-22"><i class="fa fa-check"></i>22 - Server Apps: Apache (intro)</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#brief-history-of-apache"><i class="fa fa-check"></i>Brief History of Apache</a></li>
<li class="chapter" data-level="" data-path=""><a href="#apache-basics"><i class="fa fa-check"></i>Apache Basics</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#packages"><i class="fa fa-check"></i>Packages</a></li>
<li class="chapter" data-level="" data-path=""><a href="#popular-add-on-packages"><i class="fa fa-check"></i>Popular add on packages</a></li>
<li class="chapter" data-level="" data-path=""><a href="#systemd-unit-file"><i class="fa fa-check"></i>systemd unit file</a></li>
<li class="chapter" data-level="" data-path=""><a href="#default-ports"><i class="fa fa-check"></i>Default ports</a></li>
<li class="chapter" data-level="" data-path=""><a href="#configuration-files-1"><i class="fa fa-check"></i>Configuration files</a></li>
<li class="chapter" data-level="" data-path=""><a href="#binaries-some-from-httpd-tools"><i class="fa fa-check"></i>Binaries: (some from httpd-tools)</a></li>
<li class="chapter" data-level="" data-path=""><a href="#logs"><i class="fa fa-check"></i>Logs</a></li>
<li class="chapter" data-level="" data-path=""><a href="#working-directory"><i class="fa fa-check"></i>Working directory</a></li>
<li class="chapter" data-level="" data-path=""><a href="#man-pages-1"><i class="fa fa-check"></i>Man pages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#common-configuration-options"><i class="fa fa-check"></i>Common configuration options</a></li>
<li class="chapter" data-level="" data-path=""><a href="#access-controls-with"><i class="fa fa-check"></i>Access controls with</a></li>
<li class="chapter" data-level="" data-path=""><a href="#also-of-interest"><i class="fa fa-check"></i>Also of interest</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-23"><i class="fa fa-check"></i>23 - Apache (hands-on)</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#goals-for-this-hands-on-aka-homework-5"><i class="fa fa-check"></i>Goals for this hands on (aka Homework 5)</a></li>
<li class="chapter" data-level="" data-path=""><a href="#getting-started"><i class="fa fa-check"></i>Getting Started</a></li>
<li class="chapter" data-level="" data-path=""><a href="#refresher-on-firewalld"><i class="fa fa-check"></i>Refresher on firewalld</a></li>
<li class="chapter" data-level="" data-path=""><a href="#installing-php"><i class="fa fa-check"></i>Installing PHP</a></li>
<li class="chapter" data-level="" data-path=""><a href="#submitting-homework-5"><i class="fa fa-check"></i>Submitting Homework 5</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-24"><i class="fa fa-check"></i>24 - Server Apps: MariaDB (intro)</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#a-brief-history-of-mysql-and-mariadb"><i class="fa fa-check"></i>A brief history of MySQL and MariaDB</a></li>
<li class="chapter" data-level="" data-path=""><a href="#packages-1"><i class="fa fa-check"></i>Packages</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#additional-packages"><i class="fa fa-check"></i>Additional Packages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#files"><i class="fa fa-check"></i>Files</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#control-script"><i class="fa fa-check"></i>Control script</a></li>
<li class="chapter" data-level="" data-path=""><a href="#binaries"><i class="fa fa-check"></i>Binaries</a></li>
<li class="chapter" data-level="" data-path=""><a href="#configuration-files-2"><i class="fa fa-check"></i>Configuration files</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#usage-1"><i class="fa fa-check"></i>Usage</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#creating-a-database"><i class="fa fa-check"></i>Creating a database</a></li>
<li class="chapter" data-level="" data-path=""><a href="#choosing-a-database-to-use"><i class="fa fa-check"></i>Choosing a database to use</a></li>
<li class="chapter" data-level="" data-path=""><a href="#creating-a-table"><i class="fa fa-check"></i>Creating a table</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#backups"><i class="fa fa-check"></i>Backups</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#to-import-from-an-.sql-file-just-redirect-from-a-file."><i class="fa fa-check"></i>To import from an .sql file, just redirect from a file.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#unit-25"><i class="fa fa-check"></i>25 - MariaDB (hands-on)</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#install-it"><i class="fa fa-check"></i>Install it</a></li>
<li class="chapter" data-level="" data-path=""><a href="#now-to-set-it-up"><i class="fa fa-check"></i>Now to set it up</a></li>
<li class="chapter" data-level="" data-path=""><a href="#now-start-it"><i class="fa fa-check"></i>Now start it</a></li>
<li class="chapter" data-level="" data-path=""><a href="#set-a-mysql-root-password"><i class="fa fa-check"></i>Set a mysql root password</a></li>
<li class="chapter" data-level="" data-path=""><a href="#restart-mysqld"><i class="fa fa-check"></i>Restart mysqld</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#verify-that-you-can-no-longer-connect-without-a-password"><i class="fa fa-check"></i>Verify that you can no longer connect without a password</a></li>
<li class="chapter" data-level="" data-path=""><a href="#now-lets-create-a-new-database-and-make-a-mysql-user-who-can-use-it"><i class="fa fa-check"></i>Now let’s create a new database and make a mysql user who can use it</a></li>
<li class="chapter" data-level="" data-path=""><a href="#now-exit-the-mysql-client-as-the-mysql-root-user-and-try-to-connect-as-your-new-user-to-their-database.-does-it-work"><i class="fa fa-check"></i>Now exit the mysql client as the mysql root user and try to connect as your new user to their database. Does it work?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#dns"><i class="fa fa-check"></i>26 - DNS</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#introduction-to-dns"><i class="fa fa-check"></i>Introduction to DNS</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#nameserver-zones"><i class="fa fa-check"></i>Nameserver Zones</a></li>
<li class="chapter" data-level="" data-path=""><a href="#nameserver-types"><i class="fa fa-check"></i>Nameserver Types</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#bind-package-information"><i class="fa fa-check"></i>Bind Package Information</a></li>
<li class="chapter" data-level="" data-path=""><a href="#simplified-view-of-how-it-works"><i class="fa fa-check"></i>Simplified view of how it works</a></li>
<li class="chapter" data-level="" data-path=""><a href="#zone-transfers"><i class="fa fa-check"></i>Zone Transfers</a></li>
<li class="chapter" data-level="" data-path=""><a href="#common-mistakes-to-avoid"><i class="fa fa-check"></i>Common Mistakes to Avoid</a></li>
<li class="chapter" data-level="" data-path=""><a href="#hands-on---installing-a-caching-only-nameserver-in-your-student-vm"><i class="fa fa-check"></i>Hands On - Installing a caching-only nameserver in your student VM:</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#virtualization"><i class="fa fa-check"></i>27 - Virtualization</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#why-virtualize"><i class="fa fa-check"></i>Why Virtualize?</a></li>
<li class="chapter" data-level="" data-path=""><a href="#use-cases"><i class="fa fa-check"></i>Use Cases</a></li>
<li class="chapter" data-level="" data-path=""><a href="#brief-history-of-virtualization"><i class="fa fa-check"></i>Brief History of Virtualization</a></li>
<li class="chapter" data-level="" data-path=""><a href="#types-of-hypervisors"><i class="fa fa-check"></i>Types of Hypervisors</a></li>
<li class="chapter" data-level="" data-path=""><a href="#products"><i class="fa fa-check"></i>Products</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#kvm"><i class="fa fa-check"></i>28 - KVM</a></li>
<li class="chapter" data-level="" data-path=""><a href="#system-containers"><i class="fa fa-check"></i>29 - System Containers</a></li>
<li class="chapter" data-level="" data-path=""><a href="#references-1"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">CSCI-351: System Administration</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">CSCI-351: System Administration</h1>
<h2 class="subtitle"><em>Montana State University</em></h2>
<p class="date"><em>Spring 2021</em></p>
</div>
<div id="welcome" class="section level1">
<h1>Welcome</h1>
<!-- ## Course Schedual -->
<!-- ### Week 1 -->
<!-- __Lectures__ -->
<!-- - [Introduction](#unit-01) -->
<!-- - [History - Unix, Free Software and Linux](#unit-02) -->
<!-- - [What is a Linux Distribution](#unit-03) -->
<!-- - [What is a System Administrator](#unit-04) -->
<!-- __Readings__ -->
<!-- - __TLCL__ -->
<!--   - [Ch.1 What is the Shell? - Ch.2 Navigation](assets/weekly-readings/week1/TLCL-week1.pdf) -->
<!-- - [The Daemon, the GNU, and the Penguin](assets/weekly-readings/week1/The_Daemon_the_GNU_and_the_Penguin.pdf) -->
<!-- ### Week 2 -->
<!-- __Lectures__ -->
<!-- - [Installing Linux](#unit-05) -->
<!-- - [CLI Use](#util-06) -->
<!-- __Readings__ -->
<!-- - __TLCL__ -->
<!--   - [Ch.3 Exploring the System](assets/weekly-readings/week2/TLCL-week2.pdf) -->
<!-- ### Week 3 -->
<!-- __Lectures__ -->
<!-- - [User Accounts](#unit-07) -->
<!-- - [Hard disks, Partitions, and Filesystems](#unit-08) -->
<!-- - [Linux Filesystem Hierarchy](#unit-09) -->
<!-- __Readings__ -->
<!-- - __TLCL__ -->
<!--   - [Ch.3 Exploring the System](assets/weekly-readings/week2/TLCL-week2.pdf) -->
<table>
<colgroup>
<col width="100%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Course Schedule</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Week 4</strong></td>
</tr>
<tr class="even">
<td align="left">- Command Line Potpourri<br>- Understanding File/Dir Ownership and Permissions</td>
</tr>
<tr class="odd">
<td align="left"><strong>Week 5</strong></td>
</tr>
<tr class="even">
<td align="left">- Package Management<br>- Processes and Resource Management</td>
</tr>
<tr class="odd">
<td align="left"><strong>Week 6</strong></td>
</tr>
<tr class="even">
<td align="left">- Init System &amp; Services<br>- Backups<br>- Network Configuration</td>
</tr>
<tr class="odd">
<td align="left"><strong>Week 7</strong></td>
</tr>
<tr class="even">
<td align="left">- Desktop Linux<br>- Firewalls with firewalld</td>
</tr>
<tr class="odd">
<td align="left"><strong>Week 8</strong></td>
</tr>
<tr class="even">
<td align="left">MIDTERM</td>
</tr>
<tr class="odd">
<td align="left"><strong>Week 9</strong></td>
</tr>
<tr class="even">
<td align="left"><strong>Lectures</strong><br>- <a href="#unit-19">System Logs &amp; Monitoring</a><br>- <a href="#unit-20">Automation with CRON</a><br><strong>Readings</strong><br>- <a href="assets/weekly-readings/week9/TLCL-week9.pdf">TLCL: 14-Package Management</a><br>- <a href="assets/weekly-readings/week9/RHEL7-SAG-Chapter-23-Viewing_and_Managing_Log_Files.pdf">RHEL7 - SAG, Chapter 23, Viewing and Managing Log Files</a><br>- <a href="assets/weekly-readings/week9/RHEL7-SAG-Chapter-24-Automating_System_Tasks.pdf">RHEL7 - SAG, Chapter 24, Automating System Tasks</a><br><strong>Videos</strong><br>- <a href="https://youtu.be/luwXqAJBneI">Nerds 2.0.1</a></td>
</tr>
</tbody>
</table>
</div>
<div id="quiz-solutions" class="section level1">
<h1>Quiz Solutions</h1>
<div id="quiz-1" class="section level2">
<h2>Quiz 1</h2>
<ul>
<li>Which distribution does CentOS derive from?
<ul>
<li><span class="quiz-solution-answer">Red Hat Enterprise Linux</span></li>
<li>SUSE Enterprise Server</li>
<li>It is one of the three top level distros</li>
<li>Scientific Linux</li>
</ul></li>
<li>How does “Free Software” differ from “Open Source?”
<ul>
<li>Open Source does not use the GPL license</li>
<li>The two terms are completely interchangeable</li>
<li>Free software is always free in cost</li>
<li><span class="quiz-solution-answer">One is about freedom and the other is about a development model</span></li>
</ul></li>
<li>What will typically be the default editor if the EDITOR environment variable is not set?
<ul>
<li>edln</li>
<li>emacs</li>
<li>nano</li>
<li><span class="quiz-solution-answer">vi</span></li>
</ul></li>
<li>Who started the GNU Project, started the Free Software Foundation and wrote the GPL?
<ul>
<li>Linus Torvalds</li>
<li><span class="quiz-solution-answer">Richard M. Stallman</span></li>
<li>Andrew S. Tanenbaum</li>
<li>Eric S. Raymond</li>
</ul></li>
<li>In what directory are global configuration files stored?
<ul>
<li>/root</li>
<li>/proc</li>
<li>/dev</li>
<li><span class="quiz-solution-answer">/etc</span></li>
</ul></li>
<li>Does the root user have a home directory? (<em>Hint: If unsure, look in <code>/etc/passwd</code></em>)
<ul>
<li>Yes - <code>/var/root</code></li>
<li><span class="quiz-solution-answer">Yes</span> - <code>/root</code></li>
<li>Yes - <code>/home/root</code></li>
<li>No</li>
</ul></li>
<li>What makes a file or directory “hidden” from the perspective of <code>ls</code>?
<ul>
<li><span class="quiz-solution-answer">The dirs/files that begin with a dot (.)</span></li>
<li>The dirs/files are marked as temporary</li>
<li>Recently deleted files</li>
<li>The contents of the lost+ found directory</li>
</ul></li>
<li>Which Linux distribution does Canonical’s Ubuntu derive from?
<ul>
<li><span class="quiz-solution-answer">Debian</span></li>
<li>Slackware</li>
<li>Novell</li>
<li>Red Hat</li>
</ul></li>
<li>What directory contains virtual dirs and files that are a glimpse into the kernel’s brain?
<ul>
<li>/etc</li>
<li>/var/virt</li>
<li><span class="quiz-solution-answer">/proc</span></li>
<li>/dev</li>
</ul></li>
<li>How many partitions can the default GPT partition table hold?
<ul>
<li>8</li>
<li><span class="quiz-solution-answer">128</span></li>
<li>26</li>
<li>512</li>
</ul></li>
<li>What three Linux distributions do most other distributions derive from?
<ul>
<li>Debian, Ubuntu and Red Hat</li>
<li>Slackware, Debian and Novell</li>
<li>Novell, Slackware, and Red Hat</li>
<li><span class="quiz-solution-answer">Debian, Red Hat and Slackware</span></li>
</ul></li>
<li>One fault of RAID O is…
<ul>
<li>RAID 0 is very slow</li>
<li><span class="quiz-solution-answer">If any drive in the RAID goes bad, all data is lost</span></li>
<li>It is no longer supported by vendors</li>
<li>You lose too much disk space in the RAID overhead</li>
</ul></li>
<li>How many Linux distributions are there?
<ul>
<li>12</li>
<li>About 100</li>
<li>76</li>
<li><span class="quiz-solution-answer">500 or more</span></li>
</ul></li>
<li>Which program is used to format an existing partition with a filesystem?
<ul>
<li><span class="quiz-solution-answer">mkfs.{ fstype}</span></li>
<li>fdisk</li>
<li>fscreate</li>
<li>sfdisk</li>
</ul></li>
<li>Where is the user’s encrypted password stored?
<ul>
<li>/etc/group</li>
<li><span class="quiz-solution-answer">/etc/shadow</span></li>
<li>/etc/passwd</li>
<li>~/.password</li>
</ul></li>
<li>What kind of partition lets you get past the 4 primary partition limit of MBR/ms-dos?
<ul>
<li><span class="quiz-solution-answer">Extended</span></li>
<li>Secondary</li>
<li>LBA partition</li>
<li>Primary partition</li>
</ul></li>
<li>Man page section 1 contains what type of man pages?
<ul>
<li>File formats and conventions</li>
<li>System calls</li>
<li><span class="quiz-solution-answer">Executable programs or shell commands</span></li>
<li>Kernel routines</li>
</ul></li>
<li>What do you type on the keyboard to start a search in the less screen reader?
<ul>
<li><span class="quiz-solution-answer">/</span></li>
<li>h</li>
<li>^q</li>
<li>^c</li>
</ul></li>
<li>What day did the UNIX universe start? (aka EPOCH time)
<ul>
<li>July 1st, 1961</li>
<li><span class="quiz-solution-answer">January 1st, 1970</span></li>
<li>January 1st, 1991</li>
<li>July 1st, 1982</li>
</ul></li>
<li>Who is the creator of Minix, a former long-time CS professor and text-book author?
<ul>
<li>Eric S. Raymond</li>
<li><span class="quiz-solution-answer">Andrew S. Tanenbaum</span></li>
<li>Richard M. Stallman</li>
<li>Linus Torvalds</li>
</ul></li>
</ul>
</div>
<div id="quiz-2" class="section level2">
<h2>Quiz 2</h2>
<ul>
<li>Which is NOT true about systemd?
<ul>
<li>It breaks compatibility with other UNIX systems by using Linux-only features</li>
<li>It was created by Lennart Poettering who also created Avahi and Pulse Audio</li>
<li><span class="quiz-solution-answer">It uses large shell scripts for service unit files (.service)</span></li>
<li>It provides a logging system named journald</li>
</ul></li>
<li>0644 represents which of the following set of permissions?
<ul>
<li>rwxr-xr-x</li>
<li><span class="quiz-solution-answer">rw-r–r–</span></li>
<li>r-xr–r–</li>
<li>rwx-rw-rw-</li>
</ul></li>
<li>rpm can do all of the following EXCEPT…
) Resal 1 download all d Jencies f kage install</li>
</ul>
<ol start="2" style="list-style-type: lower-alpha">
<li>Warn you if removing a package will break something else
Cc) Verify files installed from packages against its database</li>
<li>Tell you what license a package is licensed under</li>
</ol>
<ul>
<li>The /etc/passwd file is world readable.</li>
</ul>
<ol style="list-style-type: lower-alpha">
<li>True b) False</li>
</ol>
<ul>
<li>Which command is used to set / change the immutable bit?</li>
</ul>
<ol style="list-style-type: lower-alpha">
<li>lsattr b) chmod c) filemod d) chattr</li>
</ol>
<ul>
<li>What kill signal is used to assassinate a crashed program?
a)1 bg c) d) 15</li>
<li>rpm stands for…
<ul>
<li>Relational Package Manager</li>
<li><span class="quiz-solution-answer">Rpm Package Manager</span></li>
<li>Redmond Package Manager</li>
<li>Red Hat Package Manager</li>
</ul></li>
<li>Which process management application is the most interactive?
<ul>
<li>pstree</li>
<li>ps</li>
<li><span class="quiz-solution-answer">top</span></li>
<li>sysstat</li>
</ul></li>
<li>All are true about bash EXCEPT…
<ul>
<li>It offers tab completion features</li>
<li>It offers command history features</li>
<li>It stands for Bourne Again SHell</li>
<li><span class="quiz-solution-answer">It is a single-tasking shell</span></li>
</ul></li>
<li>All of the following are fields in /etc/passwd except…
<ul>
<li>Default Shell</li>
<li>GID</li>
<li>UID</li>
<li><span class="quiz-solution-answer">Disk Quota</span></li>
</ul></li>
<li>What is the systemd binary used to manage services?
<ul>
<li>journald</li>
<li>syscontrol</li>
<li><span class="quiz-solution-answer">systemctl</span></li>
<li>chkconfig</li>
</ul></li>
<li>What configuration file can be used to limit a number of user and group resources?
<ul>
<li><span class="quiz-solution-answer">/etc/security/limits.conf</span></li>
<li>/etc/profile</li>
<li>/etc/users.cfg</li>
<li>/etc/shadow</li>
</ul></li>
<li>cgroups are a process scheduling entity used automatically by which init system?
<ul>
<li>sysvinit</li>
<li><span class="quiz-solution-answer">systemd</span></li>
</ul></li>
<li>What is the default signal sent by the kill command?
<ul>
<li>1</li>
<li>9</li>
<li>11</li>
<li><span class="quiz-solution-answer">15</span></li>
</ul></li>
<li>In octal notation, which value represents write?
<ul>
<li>1</li>
<li><span class="quiz-solution-answer">2</span></li>
<li>4</li>
<li>c</li>
</ul></li>
<li>In what directory are the dnf repository definition (repo) files stored?
<ul>
<li>/etc/sysconfig/yum.conf</li>
<li>/etc/yum.conf</li>
<li><span class="quiz-solution-answer">/etc/yum.repas.d/</span></li>
<li>/var/cache/yum/</li>
</ul></li>
<li>Which command is used to change permissions on files?
<ul>
<li><span class="quiz-solution-answer">chmod</span></li>
<li>du</li>
<li>df</li>
<li>chown</li>
</ul></li>
<li>Which systemd target represents text-based / console login?
<ul>
<li>login.service</li>
<li><span class="quiz-solution-answer">multi-user.target</span></li>
<li>emergency.service</li>
<li>graphical target</li>
</ul></li>
<li>A user can change the ownership of their own files with the chown command.
<ul>
<li>True</li>
<li><span class="quiz-solution-answer">False</span></li>
</ul></li>
<li>What are the two main types of devices found in the /dev directory?
<ul>
<li>symlinks and pipes</li>
<li>read-only and writable</li>
<li><span class="quiz-solution-answer">block and character</span></li>
<li>physical and virtual</li>
</ul></li>
</ul>

</div>
</div>
<div id="unit-01" class="section level1">
<h1>01 - Introduction</h1>

</div>
<div id="unit-02" class="section level1">
<h1>02 - History - Unix, Free Software and Linux</h1>
<!-- **Screencast**:: -->
<!-- [02-history.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/02-history.webm){target="_blank"} -->
<!-- or -->
<!-- [02-history.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/02-history.mp4){target="_blank"} -->
<div id="in-the-beginning" class="section level2">
<h2>In the Beginning</h2>
<ul>
<li>Room size computers with vacuum tubes</li>
<li>No operating systems</li>
<li>All software was custom</li>
<li>Virtually no commercial software</li>
<li>Community of sharing</li>
</ul>
</div>
<div id="the-industry-evolves" class="section level2">
<h2>The Industry Evolves</h2>
<ul>
<li>Eventually hardware vendors provided operating environments</li>
<li>Every make / model had its own OS</li>
<li>Portable programming languages start to appear</li>
</ul>
</div>
<div id="birth-of-unix-at-att-bell-labs-1969" class="section level2">
<h2>Birth of UNIX at AT&amp;T Bell Labs (1969)</h2>
<ul>
<li>Multics committee (multi-company)</li>
<li>Dennis Ritchie, Ken Thompson and Brian Kernighan</li>
<li>C begat UNIX which begat C</li>
<li>US FTC anti-trust investigation</li>
<li>UNIX at Uni</li>
<li>Legitimized Computer Science</li>
<li>AT&amp;T broken up into “Baby Bells”</li>
<li>Bell Labs and UNIX commercialization</li>
</ul>
</div>
<div id="richard-stallman-rms" class="section level2">
<h2><a href="https://en.wikipedia.org/wiki/Richard_Stallman">Richard Stallman</a> (RMS)</h2>
<ul>
<li>MIT Artificial Intelligence Laboratory</li>
<li>ITS OS (Incompatible Timesharing System)</li>
<li>Lost co-workers to vendor UNIXes</li>
<li>Mad at printer makers</li>
<li>GNU Project (Sep. 1983)</li>
<li>“GNU’s Not UNIX”</li>
<li>GNU Manifesto (1985)</li>
<li>Free Software Foundation (FSF)</li>
<li>GNU Public License (GPL)</li>
</ul>
</div>
<div id="berkeley-software-distribution-bsd" class="section level2">
<h2>Berkeley Software Distribution (BSD)</h2>
<ul>
<li>Bill Joy at USC Berkeley</li>
<li>BSD originally a remixed UNIX</li>
<li>Became its own thing</li>
<li>BSDi sued by USL in 1992</li>
</ul>
</div>
<div id="andrew-s.-tanenbaum-ast" class="section level2">
<h2><a href="https://en.wikipedia.org/wiki/Andrew_S._Tanenbaum">Andrew S. Tanenbaum</a> (AST)</h2>
<ul>
<li>MIT in the 60’s</li>
<li>Physics and Astrophysics</li>
<li>Moved to Netherlands, VU University Amsterdam</li>
<li>Several CS Textbooks</li>
<li>Minix (Prentice Hall)</li>
</ul>
</div>
<div id="linus-torvalds" class="section level2">
<h2><a href="https://en.wikipedia.org/wiki/Linus_torvalds">Linus Torvalds</a></h2>
<ul>
<li>University of Helsinki (1988-96)</li>
<li>Wanted to make his own UNIX</li>
<li>Bootstrapped it with Minix</li>
<li>Wanted to call it Freax</li>
<li>Announced Linux ~1991</li>
</ul>
</div>
<div id="why-red-hat-enterprise-linux" class="section level2">
<h2>Why <a href="https://www.redhat.com/en">Red Hat</a> Enterprise Linux?</h2>
<ul>
<li>They contribute to the community / ecosystem a lot</li>
<li>No really!</li>
<li>Often top contributor to each Linux kernel</li>
<li>Owns Cygnus (Cygwin) and many others</li>
<li>Contributes to many, many ecosystems projects</li>
<li><a href="https://www.redhat.com/en/about/open-source-program-office/contributions" class="uri">https://www.redhat.com/en/about/open-source-program-office/contributions</a></li>
</ul>
</div>
<div id="why-centos" class="section level2">
<h2>Why <a href="https://www.centos.org/">CentOS</a>?</h2>
<ul>
<li>Free (as in beer and freedom) clone of RHEL</li>
<li>Sponsored by Red Hat</li>
<li>Also clones most of Red Hat’s other projects</li>
<li>My server distro of choice</li>
</ul>
</div>
<div id="why-fedora" class="section level2">
<h2>Why <a href="https://getfedora.org/">Fedora</a>?</h2>
<ul>
<li>Upstream of RHEL</li>
<li>Sponsored by Red Hat</li>
<li>Four F’s (Freedom, Friends, Features, First [Firehose of updates])</li>
<li>My desktop distro of choice</li>
</ul>
</div>
<div id="open-source-open-source-inititive" class="section level2">
<h2>Open Source (Open Source Inititive)</h2>
<ul>
<li>Open Source vs Free Software
<ul>
<li>Free Software (Free Software Foundation)
<ul>
<li>Free as in Freedom</li>
<li>CAN charge for it</li>
<li>Ensures the Four Freedoms
<ul>
<li>Use</li>
<li>Examine</li>
<li>Redistribute</li>
<li>Modify</li>
</ul></li>
</ul></li>
<li>Open Source (Open Source Inititive)
<ul>
<li>A development model</li>
<li>More business oriented</li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="things-to-ponder" class="section level2">
<h2>Things to Ponder</h2>
<ul>
<li>Using proprietary software is like having a car with the hood welded shut</li>
<li>FOSS (Free and Open Source Software) is like an insurance policy</li>
<li>Which is more free? The GPL or the BSD license?<br>Depends on who you ask</li>
</ul>
</div>
<div id="tlcl-book-put-it-like-this" class="section level2">
<h2>TLCL book put it like this:</h2>
<blockquote>
<p><em>Many people speak of “freedom” with regard to Linux, but I don’t think most people know what this freedom really means. Freedom is the power to decide what your computer does, and the only way to have this freedom is to know what your computer is doing. Freedom is a computer that is without secrets, one where everything can be known if you care enough to find out.<br>(Introduction page xvi)</em></p>
</blockquote>
</div>
<div id="references" class="section level2">
<h2>REFERENCES:</h2>
<ul>
<li>A Quarter Century of UNIX by Peter H. Salus (1994)</li>
<li>The Daemon, the GNU &amp; the Penguin also by Dr. Salus (2006)</li>
</ul>

</div>
</div>
<div id="unit-03" class="section level1">
<h1>03 - What is a Linux Distribution</h1>
<!-- **Screencast**:  -->
<!-- [03-distros.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/03-distros.webm)  -->
<!-- or  -->
<!-- [03-distros.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/03-distros.mp4) -->
<p>A Linux distribution is the Linux kernel provided with a collection of additional software such that it can be booted on a computer from optical media, floppy disk, USB thumbdrive, etc… and is most often installable to permanent storage. A distribution may or may not provide periodic software updates to fix software bugs and remedy security problems.</p>
<p>There are <strong>over 500</strong> different Linux distributions. Why do so many exist?</p>
<p>Most of them inherit from one of the major distros:</p>
<ul>
<li>Debian</li>
<li>Slackware</li>
<li>Red Hat</li>
</ul>
<p>So many exist for a number of reasons:</p>
<ul>
<li>The source is there and the license lets you roll your own</li>
<li>Localization - Country/Language specific</li>
<li>Specific CPU arch - PPC, Alpha, ARM, SPARC, etc</li>
<li>Specific devices - Linksys router, Raspberry Pi, ODROID, Android devices, etc</li>
<li>Specific storage - Floppy, CD, Zip disk, small HD, diskless terminal, etc</li>
<li>Specific software - Desktop env, special software or configuration, etc</li>
<li>Specific use case - KVM virtualization host, Container host, Python Programming, Gaming, etc</li>
<li>Educational - Linux from Scratch</li>
</ul>
<p>How does one Linux distribution differ from another:</p>
<ul>
<li>Installer</li>
<li>Software available (desktop spins)</li>
<li>Administration tools (GUI, TUI, CLI)</li>
<li>Init system (SysV init, upstart, OpenRC, systemd)</li>
<li>Developers and community / Company</li>
<li>95% of the same software</li>
</ul>
<p>Why does Scott like Red Hat and Fedora?</p>
<p>See: <a href="http://www.montanalinux.org/redhat-relevent.html">Is Red Hat still relevant? You bet.</a></p>
<p>What about Ubuntu or other distributions?</p>
<p>Resources:</p>
<ul>
<li>Linux Weekly News’ <a href="http://lwn.net/Distributions/">Distributions</a> page</li>
<li><a href="http://www.distrowatch.com/">DistroWatch</a></li>
</ul>

</div>
<div id="unit-04" class="section level1">
<h1>04 - What is a System Administrator</h1>
<!-- **Screencast**:  -->
<!-- [04-sysadmin.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/04-sysadmin.webm)  -->
<!-- or  -->
<!-- [04-sysadmin.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/04-sysadmin.mp4) -->
<div id="what-exactly-is-a-system-administrator" class="section level4">
<h4>What exactly is a “System Administrator?”</h4>
<p>System administration is a very broad topic and depending on a particular job or company it can range from being a “jack of all trades but master of none” to being very specialized. This course is going to attempt to give as broad a base of sysadmin information / experience as possible without being able to delve too deeply into any particular topic.</p>
<p>Specialized types:</p>
<ul>
<li>Web server - Often referred to as webmaster</li>
<li>Database - Often referred to as DBA
<ul>
<li>Oracle</li>
<li>MySQL</li>
<li>PostgreSQL</li>
</ul></li>
<li>Email - Often referred to as postmaster</li>
<li>Network Administrator</li>
<li>Security</li>
<li>Storage Management</li>
<li>Virtualization</li>
<li>Any other server application you can think of working with End Users</li>
</ul>
<p>A System Administrator, whether warranted or not, often has a reputation for not being a “people person.” They are often seen as grumpy, lazy and someone who speaks a language all their own… filled with technical jargon that non-computer types don’t understand.</p>
<ul>
<li>End users don’t usually formulate their questions very well.</li>
<li>End users are often uncomfortable talking to a system administrator and feel as they will be perceived as being stupid or negligent.</li>
<li>They often have misinformation or a bad understanding of how something works.</li>
<li>It is up to you to ask questions before you start providing answers so you can make sure you understand what they really need / want. It is often useful to back up from a problem or request and try to see the bigger picture.</li>
<li>Try your best to educate your users and show them how to collect troubleshooting information so they can become partners rather than adversaries.</li>
<li>After a few positive experiences some of your users may end up becoming “assistant administrators” because you have educated them where they may be able to help others.</li>
<li>Try to find multiple solutions rather than just the simplest and if appropriate, let the end user choose which one is better for them.</li>
<li>End users often have good ideas. Make sure to acknowledge them and try to apply them where appropriate.</li>
<li>Having a good relationship with your customers will always make your job easier.</li>
<li>Don’t be afraid to say you don’t know something and that you’ll have to do some research.</li>
<li>Make sure to follow through to completion in a timely fashion and do follow-up calls / visits to ensure a solution is working.</li>
<li>Recognize when you need to create documentation for yourself and your users. Use FAQs or SOPs. Provide your users with as much documentation as they are comfortable with.</li>
<li>Try to track problems and recognize trends with users, software, and hardware.</li>
</ul>

</div>
</div>
<div id="unit-05" class="section level1">
<h1>05 - Installing Linux</h1>
<p>Part of being a Systems Administrator is installing and updating systems.</p>
<div id="types-of-media" class="section level2">
<h2>Types of Media</h2>
<ul>
<li>Minimal / network-based
<ul>
<li>Write out to a physical dick (CD ROM, thumb drive)</li>
<li>Write ISO from the distributions</li>
</ul></li>
<li>Live Media (Try before you buy)
<ul>
<li>Typically get a full desktop environment</li>
</ul></li>
<li>Install only Media
<ul>
<li>Not the full desktop env.</li>
</ul></li>
<li>Live Environment for manual installs</li>
</ul>
<p><strong>4 different Linux distros</strong></p>
<ol style="list-style-type: decimal">
<li>CentOS boot (install only media)</li>
<li>CentOS DVD (install only media)</li>
<li>Xubuntu Desktop (live media)</li>
<li>MontanaLinux F33 XFCE (live media)</li>
</ol>
<p><strong>Common Install Tasks</strong></p>
<ul>
<li>Select Language</li>
<li>Select Timezone / NTP</li>
<li>Partition and define mount points (including swap)</li>
<li>Select Software</li>
<li>Create User (with admin privs)</li>
<li>Set root password</li>
</ul>
</div>
<div id="xubuntu-live-media-install" class="section level2">
<h2>Xubuntu (Live Media Install)</h2>

</div>
</div>
<div id="unit-06" class="section level1">
<h1>06 - CLI Use</h1>

</div>
<div id="unit-07" class="section level1">
<h1>07 - User Accounts</h1>
<!-- **References**: UNIX and LINUX Administration Handbook - Chapter 7 - Adding New Users -->
<p>Related man pages</p>
<ul>
<li>man 5 passwd</li>
<li>man 5 group</li>
<li>man 5 shadow</li>
</ul>
<div id="related-files-ensure-the-man-pages-package-is-installed" class="section level2">
<h2>Related files (ensure the man-pages package is installed)</h2>
<ul>
<li><code>/etc/passwd</code></li>
<li><code>/etc/shadow</code></li>
<li><code>/etc/group</code></li>
<li><code>/etc/gshadow</code></li>
<li><code>/etc/login.defs</code></li>
<li><code>/etc/security/limits.conf</code> <em>(pam package)</em></li>
<li><code>/etc/skel/</code> <em>(contains files/dirs copied to homedir of new accounts)</em></li>
</ul>
<div id="etcpasswd-man-5-passwd" class="section level3">
<h3>/etc/passwd (man 5 passwd)</h3>
<p><em>Example</em>: dowdle:x:1000:1000:Scott Dowdle:/home/dowdle:/bin/bash</p>
<ol style="list-style-type: decimal">
<li>User name</li>
<li>Encrypted password, an *, or an x (see pwconv)</li>
<li>UID</li>
<li>GID</li>
<li>GECOS - See: Wikipedia <a href="http://en.wikipedia.org/wiki/Gecos_field">GECOS</a> page</li>
</ol>
<ul>
<li>Comment Field</li>
</ul>
<ol start="6" style="list-style-type: decimal">
<li>Home Directory</li>
</ol>
<ul>
<li>all Linux distros under the <code>/home/</code> directory
<ul>
<li><strong>POSSIBLE TEST QUESTION</strong></li>
</ul></li>
</ul>
<ol start="7" style="list-style-type: decimal">
<li>Default Shell</li>
</ol>
</div>
<div id="etcshadow-man-5-shadow" class="section level3">
<h3>/etc/shadow (man 5 shadow)</h3>
<p><strong>Example</strong>: <code>dowdle:$1$vkI/ffyR$rSsCe9K.GsuK83.cWI:14277:0:99999:7:::</code></p>
<ol style="list-style-type: decimal">
<li>User name</li>
<li>Encrypted password</li>
<li>Days since Jan 1, 1970 that password was last changed</li>
<li>Days before password may be changed</li>
<li>Days after which password must be changed</li>
<li>Days before password is to expire that user is warned</li>
<li>Days after password expires that account is disabled</li>
<li>Days since Jan 1, 1970 that account is disabled</li>
<li>A reserved field</li>
</ol>
<p>See: Wikipedia page on <a href="http://en.wikipedia.org/wiki/Unix_time">UNIX time</a></p>
</div>
<div id="etcgroup-man-5-group" class="section level3">
<h3>/etc/group (man 5 group)</h3>
<p><strong>Example</strong>: <code>dowdle:x:1000:dowdle</code></p>
<ol style="list-style-type: decimal">
<li>Group name</li>
<li>Encrypted password if used</li>
<li>GID</li>
<li>Comma separated user list</li>
</ol>
</div>
</div>
<div id="related-commands-and-issues" class="section level2">
<h2>Related Commands and Issues</h2>
<ul>
<li>/usr/sbin/useradd</li>
<li>/usr/sbin/adduser -&gt; useradd</li>
<li>/usr/bin/chfn (Let’s users adjust the GECOS)
<ul>
<li>Lets users run <code>adduser</code> themselves</li>
<li>prompt user info fields</li>
</ul></li>
<li>/usr/sbin/usermod (usermod -aG wheel dowdle)
<ul>
<li>change values in pass or group</li>
<li>adding users to existing groups</li>
</ul></li>
<li>/usr/bin/passwd (What are the permissions on this file?)
<ul>
<li>man 1 psswd</li>
<li>passwd</li>
</ul></li>
<li>rpm -ql shadow-utils (shows package contents)</li>
<li>/usr/bin/whoami</li>
<li>/usr/bin/id</li>
</ul>
<p>Adding a user</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> useradd scott</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> adduser mike</span></code></pre></div>
<p>Set password</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> passwd scott</span></code></pre></div>
<p>Add user to wheel group</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> usermod <span class="at">-aG</span> wheel scott</span></code></pre></div>
<p>As root, become a different user</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">su</span> <span class="at">-l</span> scott</span></code></pre></div>
</div>
<div id="escalating-privileges" class="section level2">
<h2>Escalating privileges</h2>
<ul>
<li>sudo, sudo -i (users in wheel group, other distros may use sudo group)</li>
<li>su, su -l (need to know the root password unless already root)</li>
</ul>
<p>For example:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo <span class="op">&lt;</span>command<span class="op">&gt;</span></span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo <span class="at">-i</span> <span class="co"># logs into root user</span></span></code></pre></div>
<p><em>Everything mentioned above is for “local” accounts. If this were an advanced sysadmin class we’d cover various forms of centralized authentication like LDAP and NIS/YP as well as integration with systems like FreeIPA and Microsoft Active Directory. Many Linux distributions work well with centralized authentication systems. In the case of Red Hat-derived distributions, they offer authconfig, sssd, realmd and freeipa-client.</em></p>

</div>
</div>
<div id="unit-08" class="section level1">
<h1>08 - Hard disks, Partitions, and Filesystems</h1>
<!-- **REFERENCE** -->
<!-- - LaUSAH Chapter 8, Storage -->
<!-- - TLCL Chapter 15, Storage Media -->
<div id="hard-drives" class="section level2">
<h2>Hard Drives</h2>
<ul>
<li>Types
<ul>
<li>IDE / ATA / PATA (two connectors, 40 or 80 pin)</li>
<li>SATA</li>
<li>SSD</li>
<li>SCSI</li>
<li>SAS</li>
<li>Fiber Channel</li>
<li>USB, Firewire, eSATA</li>
</ul></li>
<li>Single disk</li>
<li>Multiple disks</li>
<li>Disk image file</li>
<li>RAID 0, 1, 5, 10
<ul>
<li>hardware - BIOS - disk based</li>
<li>software - mdadm - disk or partition based</li>
</ul></li>
<li>NAS - NFS, SMB (service oriented filesharing)</li>
<li>SAN - iSCSI, ATA over Ethernet (AoE)</li>
<li>LVM - lvm, system-config-lvm</li>
</ul>
</div>
<div id="partitioning-applications" class="section level2">
<h2>Partitioning Applications</h2>
<ul>
<li>fdisk - fdisk -l (lists all drives seen) (gdisk or parted/gparted for GPT)</li>
<li>sfdisk
<ul>
<li>sfdisk -d /dev/hda &gt; hda.out</li>
<li>sfdisk /dev/hda &lt; hda.out</li>
</ul></li>
<li>gdisk</li>
<li>parted / gparted</li>
<li>mount, umount</li>
<li>Commercial products
<ul>
<li>Partition Magic</li>
<li>Partition Commander</li>
</ul></li>
</ul>
</div>
<div id="partitioning-schemes" class="section level2">
<h2>Partitioning Schemes</h2>
<p>PC hardware (with an MBR partition table) can have upto <strong>4 primary partitions</strong>. If you need more
than 4 partitions you’ll have to make at least one “extended” partition. <strong>Extended</strong> partitions are
containers for “<strong>logical</strong>” partitions. Largest partition size is <strong>2TB</strong>.</p>
<ul>
<li>/</li>
<li>/boot</li>
<li>/var</li>
<li>/home</li>
<li>swap</li>
</ul>
<p>A newer type of partition table is on the horizon named GPT. GPT eliminates a number of the restrictions of the MBR partition table. By default, GPT offers 128 partitions (more if desired) as well as partitions &gt; 2TB. For more information see: <a href="http://en.wikipedia.org/wiki/GUID_Partition_Table" class="uri">http://en.wikipedia.org/wiki/GUID_Partition_Table</a></p>
</div>
<div id="filesystems" class="section level2">
<h2>Filesystems</h2>
<ul>
<li>/etc/fstab (stores mount definitions)</li>
<li>Removable media - CD, DVD, USB - Mostly automatic in a GUI, but manually in a TUI. Watch /var/log/messages for device information, use fdisk -l to list, and mount to manually mount</li>
<li>UUID, LABEL, and device names</li>
<li>autofs - Automatically mount network shares</li>
<li>Secure erasure? DBAN or hdparm</li>
<li>fuse (Filesystem in Userspace)
<ul>
<li><a href="http://en.wikipedia.org/wiki/Filesystem_in_Userspace" class="uri">http://en.wikipedia.org/wiki/Filesystem_in_Userspace</a></li>
</ul></li>
<li>Troubleshooting
<ul>
<li>SMART - smartd</li>
<li>fsck, fsck.{fstype}, some filesystem-specific tools</li>
</ul></li>
</ul>
<div id="types" class="section level3">
<h3>Types</h3>
<ul>
<li>ext2, ext3, ext4</li>
<li>swap</li>
<li>xfs</li>
<li>reiser3</li>
<li>ntfs</li>
<li>vfat</li>
<li>iso9660</li>
<li>ufs</li>
<li>zfs (Solaris), openzfs (BSDs, Linux, macOS), btrfs (Linux)</li>
</ul>
</div>
<div id="formating-commands" class="section level3">
<h3>Formating commands</h3>
<ul>
<li>mkfs.*, mkfs.ext3, mkfs.ext4, etc</li>
<li>mkswap</li>
<li>mkfs.ntfs, mkfs.vfat</li>
</ul>
</div>
<div id="network-filesystems" class="section level3">
<h3>Network filesystems</h3>
<ul>
<li>NFS</li>
<li>SMB</li>
<li>GFS</li>
<li>Gluster, etc</li>
<li>iSCSI (layer 3) and AoE (layer 2)</li>
</ul>

</div>
</div>
</div>
<div id="unit-09" class="section level1">
<h1>09 - Linux Filesystem Hierarchy</h1>
<!-- **References**: -->
<!-- - UaLSAH - Chapter 6 - The Filesystem -->
<!-- - TLCL - Chapter 3, Guided Tour -->
<div id="everything-is-a-file" class="section level3">
<h3>Everything is a File</h3>
<p>Unix tries to make everything a file:</p>
<ul>
<li>Processes are a file - <code>/proc/###</code>
<ul>
<li>Not actual file and directories on the system</li>
<li>A glimpse into the brain of the kernel</li>
</ul></li>
<li>Devices are a file - <code>/dev</code> - (<strong>b</strong>lock or <strong>c</strong>haracter and Major and Minor numbers)
<ul>
<li><code>/dev/sda</code> and <code>/dev/sda1</code>
<ul>
<li>‘sd’ - seta disk - ‘1’ the first partition</li>
</ul></li>
<li><code>/dev/lp0</code></li>
<li><code>/dev/input/mouse0</code> - connection for mouse</li>
<li><code>/dev/null</code> - dumping ground for output that does not want to see</li>
<li><code>/dev/random</code> - used for random input</li>
</ul></li>
</ul>
<p>A description and comparison to where Microsoft Windows stores things and where Mac OS X stores things may be helpful.</p>
<ul>
<li>MS-DOS and Windows
<ul>
<li>Usually first disk is seen as drive <code>C</code></li>
<li><code>A</code> and <code>B</code> would be floppy disks</li>
<li><code>D</code> could be a number of things</li>
<li>not really a naming convention to tell you whats going on</li>
</ul></li>
<li>Mac OS X
<ul>
<li>Mostly like UNIX/Linux
<ul>
<li>but, Mac hides stuff in the GUI (finder simplifies things)</li>
<li>terminal will show these</li>
</ul></li>
</ul></li>
</ul>
<div id="processes-proc" class="section level4">
<h4>Processes /proc</h4>
<p>Every time a program runs, it is assigned a process id, or a PID, number in the <code>/proc/</code> directory.</p>
<div class="figure">
<img src="09/images/proc_dir_listing.png" alt="" />
<p class="caption">proc screenshot</p>
</div>
<ul>
<li>blue numbers is a ‘directory,’ and inside and file containing info about the process
<ul>
<li>again, not actually on the filesystem</li>
</ul></li>
</ul>
</div>
<div id="devices-dev" class="section level4">
<h4>Devices /dev</h4>
<div class="figure">
<img src="09/images/devices_directory.png" alt="" />
<p class="caption">devices (/dev) directory</p>
</div>
<ul>
<li>devices represented as files</li>
<li>black background represents devices</li>
</ul>
<p><br>
<br></p>
<details>
<summary>
<strong>Terminal output for /dev directory</strong>
</summary>
<pre>
$ cd /dev
$ ls -l
crw-r--r--. 1 root root     10, 235 Feb 10 18:49 autofs
drwxr-xr-x. 2 root root         140 Feb 10 18:49 block
drwxr-xr-x. 2 root root          80 Feb 10 18:49 bsg
drwxr-xr-x. 3 root root          60 Feb 10 18:49 bus
lrwxrwxrwx. 1 root root           3 Feb 10 18:49 cdrom -> sr0
drwxr-xr-x. 2 root root        2760 Feb 10 18:49 char
crw-------. 1 root root      5,   1 Feb 10 18:49 console
lrwxrwxrwx. 1 root root          11 Feb 10 18:49 core -> /proc/kcore
drwxr-xr-x. 4 root root          80 Feb 10 18:49 cpu
crw-------. 1 root root     10,  62 Feb 10 18:49 cpu_dma_latency
drwxr-xr-x. 7 root root         140 Feb 10 18:49 disk
drwxr-xr-x. 3 root root          80 Feb 10 18:49 dri
crw-rw----. 1 root video    29,   0 Feb 10 18:49 fb0
lrwxrwxrwx. 1 root root          13 Feb 10 18:49 fd -> /proc/self/fd
crw-rw-rw-. 1 root root      1,   7 Feb 10 18:49 full
crw-rw-rw-. 1 root root     10, 229 Feb 10 18:49 fuse
srwxrwxrwx. 1 root root           0 Feb 10 18:49 gpmctl
crw-------. 1 root root     10, 228 Feb 10 18:49 hpet
drwxr-xr-x. 2 root root           0 Feb 10 18:49 hugepages
crw-------. 1 root root     10, 183 Feb 10 18:49 hwrng
lrwxrwxrwx. 1 root root          12 Feb 10 18:49 initctl -> /run/initctl
drwxr-xr-x. 3 root root         220 Feb 10 18:49 input
crw-r--r--. 1 root root      1,  11 Feb 10 18:49 kmsg
crw-rw-rw-. 1 root kvm      10, 232 Feb 10 18:49 kvm
lrwxrwxrwx. 1 root root          28 Feb 10 18:49 log -> /run/systemd/journal/dev-log
crw-rw----. 1 root disk     10, 237 Feb 10 18:49 loop-control
drwxr-xr-x. 2 root root          60 Feb 10 18:49 mapper
crw-------. 1 root root     10, 227 Feb 10 18:49 mcelog
crw-r-----. 1 root kmem      1,   1 Feb 10 18:49 mem
drwxrwxrwt. 2 root root          40 Feb 10 18:49 mqueue
drwxr-xr-x. 2 root root          60 Feb 10 18:49 net
crw-rw-rw-. 1 root root      1,   3 Feb 10 18:49 null
crw-------. 1 root root     10, 144 Feb 10 18:49 nvram
crw-r-----. 1 root kmem      1,   4 Feb 10 18:49 port
crw-------. 1 root root    108,   0 Feb 10 18:49 ppp
crw-rw-rw-. 1 root tty       5,   2 Feb 12 14:26 ptmx
drwxr-xr-x. 2 root root           0 Feb 10 18:49 pts
crw-rw-rw-. 1 root root      1,   8 Feb 10 18:49 random
drwxr-xr-x. 2 root root          60 Feb 10 18:49 raw
lrwxrwxrwx. 1 root root           4 Feb 10 18:49 rtc -> rtc0
crw-------. 1 root root    251,   0 Feb 10 18:49 rtc0
brw-rw----. 1 root disk      8,   0 Feb 10 18:49 sda
brw-rw----. 1 root disk      8,   1 Feb 10 18:49 sda1
brw-rw----. 1 root disk      8,   2 Feb 10 18:49 sda2
brw-rw----. 1 root disk      8,   3 Feb 10 18:49 sda3
crw-rw----. 1 root disk     21,   0 Feb 10 18:49 sg0
crw-rw----. 1 root cdrom    21,   1 Feb 10 18:49 sg1
drwxrwxrwt. 2 root root          40 Feb 10 18:49 shm
crw-------. 1 root root     10, 231 Feb 10 18:49 snapshot
drwxr-xr-x. 3 root root         240 Feb 10 18:49 snd
brw-rw----. 1 root cdrom    11,   0 Feb 10 18:49 sr0
lrwxrwxrwx. 1 root root          15 Feb 10 18:49 stderr -> /proc/self/fd/2
lrwxrwxrwx. 1 root root          15 Feb 10 18:49 stdin -> /proc/self/fd/0
lrwxrwxrwx. 1 root root          15 Feb 10 18:49 stdout -> /proc/self/fd/1
crw-rw-rw-. 1 root tty       5,   0 Feb 12 13:25 tty
crw--w----. 1 root tty       4,   0 Feb 10 18:49 tty0
crw--w----. 1 root tty       4,   1 Feb 10 18:49 tty1
crw--w----. 1 root tty       4,  10 Feb 10 18:49 tty10
crw--w----. 1 root tty       4,  11 Feb 10 18:49 tty11
crw--w----. 1 root tty       4,  12 Feb 10 18:49 tty12
crw--w----. 1 root tty       4,  13 Feb 10 18:49 tty13
crw--w----. 1 root tty       4,  14 Feb 10 18:49 tty14
crw--w----. 1 root tty       4,  15 Feb 10 18:49 tty15
crw--w----. 1 root tty       4,  16 Feb 10 18:49 tty16
crw--w----. 1 root tty       4,  17 Feb 10 18:49 tty17
crw--w----. 1 root tty       4,  18 Feb 10 18:49 tty18
crw--w----. 1 root tty       4,  19 Feb 10 18:49 tty19
crw--w----. 1 root tty       4,   2 Feb 10 18:49 tty2
crw--w----. 1 root tty       4,  20 Feb 10 18:49 tty20
crw--w----. 1 root tty       4,  21 Feb 10 18:49 tty21
crw--w----. 1 root tty       4,  22 Feb 10 18:49 tty22
crw--w----. 1 root tty       4,  23 Feb 10 18:49 tty23
crw--w----. 1 root tty       4,  24 Feb 10 18:49 tty24
crw--w----. 1 root tty       4,  25 Feb 10 18:49 tty25
crw--w----. 1 root tty       4,  26 Feb 10 18:49 tty26
crw--w----. 1 root tty       4,  27 Feb 10 18:49 tty27
crw--w----. 1 root tty       4,  28 Feb 10 18:49 tty28
crw--w----. 1 root tty       4,  29 Feb 10 18:49 tty29
crw--w----. 1 root tty       4,   3 Feb 10 18:49 tty3
crw--w----. 1 root tty       4,  30 Feb 10 18:49 tty30
crw--w----. 1 root tty       4,  31 Feb 10 18:49 tty31
crw--w----. 1 root tty       4,  32 Feb 10 18:49 tty32
crw--w----. 1 root tty       4,  33 Feb 10 18:49 tty33
crw--w----. 1 root tty       4,  34 Feb 10 18:49 tty34
crw--w----. 1 root tty       4,  35 Feb 10 18:49 tty35
crw--w----. 1 root tty       4,  36 Feb 10 18:49 tty36
crw--w----. 1 root tty       4,  37 Feb 10 18:49 tty37
crw--w----. 1 root tty       4,  38 Feb 10 18:49 tty38
crw--w----. 1 root tty       4,  39 Feb 10 18:49 tty39
crw--w----. 1 root tty       4,   4 Feb 10 18:49 tty4
crw--w----. 1 root tty       4,  40 Feb 10 18:49 tty40
crw--w----. 1 root tty       4,  41 Feb 10 18:49 tty41
crw--w----. 1 root tty       4,  42 Feb 10 18:49 tty42
crw--w----. 1 root tty       4,  43 Feb 10 18:49 tty43
crw--w----. 1 root tty       4,  44 Feb 10 18:49 tty44
crw--w----. 1 root tty       4,  45 Feb 10 18:49 tty45
crw--w----. 1 root tty       4,  46 Feb 10 18:49 tty46
crw--w----. 1 root tty       4,  47 Feb 10 18:49 tty47
crw--w----. 1 root tty       4,  48 Feb 10 18:49 tty48
crw--w----. 1 root tty       4,  49 Feb 10 18:49 tty49
crw--w----. 1 root tty       4,   5 Feb 10 18:49 tty5
crw--w----. 1 root tty       4,  50 Feb 10 18:49 tty50
crw--w----. 1 root tty       4,  51 Feb 10 18:49 tty51
crw--w----. 1 root tty       4,  52 Feb 10 18:49 tty52
crw--w----. 1 root tty       4,  53 Feb 10 18:49 tty53
crw--w----. 1 root tty       4,  54 Feb 10 18:49 tty54
crw--w----. 1 root tty       4,  55 Feb 10 18:49 tty55
crw--w----. 1 root tty       4,  56 Feb 10 18:49 tty56
crw--w----. 1 root tty       4,  57 Feb 10 18:49 tty57
crw--w----. 1 root tty       4,  58 Feb 10 18:49 tty58
crw--w----. 1 root tty       4,  59 Feb 10 18:49 tty59
crw--w----. 1 root tty       4,   6 Feb 10 18:49 tty6
crw--w----. 1 root tty       4,  60 Feb 10 18:49 tty60
crw--w----. 1 root tty       4,  61 Feb 10 18:49 tty61
crw--w----. 1 root tty       4,  62 Feb 10 18:49 tty62
crw--w----. 1 root tty       4,  63 Feb 10 18:49 tty63
crw--w----. 1 root tty       4,   7 Feb 10 18:49 tty7
crw--w----. 1 root tty       4,   8 Feb 10 18:49 tty8
crw--w----. 1 root tty       4,   9 Feb 10 18:49 tty9
crw-rw----. 1 root dialout   4,  64 Feb 10 18:49 ttyS0
crw-rw----. 1 root dialout   4,  65 Feb 10 18:49 ttyS1
crw-rw----. 1 root dialout   4,  66 Feb 10 18:49 ttyS2
crw-rw----. 1 root dialout   4,  67 Feb 10 18:49 ttyS3
crw-------. 1 root root     10, 239 Feb 10 18:49 uhid
crw-------. 1 root root     10, 223 Feb 10 18:49 uinput
crw-rw-rw-. 1 root root      1,   9 Feb 10 18:49 urandom
crw-------. 1 root root    246,   0 Feb 10 18:49 usbmon0
crw-------. 1 root root    246,   1 Feb 10 18:49 usbmon1
crw-rw----. 1 root tty       7,   0 Feb 10 18:49 vcs
crw-rw----. 1 root tty       7,   1 Feb 10 18:49 vcs1
crw-rw----. 1 root tty       7,   2 Feb 10 18:49 vcs2
crw-rw----. 1 root tty       7,   3 Feb 10 18:49 vcs3
crw-rw----. 1 root tty       7,   4 Feb 10 18:49 vcs4
crw-rw----. 1 root tty       7,   5 Feb 10 18:49 vcs5
crw-rw----. 1 root tty       7,   6 Feb 10 18:49 vcs6
crw-rw----. 1 root tty       7, 128 Feb 10 18:49 vcsa
crw-rw----. 1 root tty       7, 129 Feb 10 18:49 vcsa1
crw-rw----. 1 root tty       7, 130 Feb 10 18:49 vcsa2
crw-rw----. 1 root tty       7, 131 Feb 10 18:49 vcsa3
crw-rw----. 1 root tty       7, 132 Feb 10 18:49 vcsa4
crw-rw----. 1 root tty       7, 133 Feb 10 18:49 vcsa5
crw-rw----. 1 root tty       7, 134 Feb 10 18:49 vcsa6
drwxr-xr-x. 2 root root          60 Feb 10 18:49 vfio
crw-------. 1 root root     10,  63 Feb 10 18:49 vga_arbiter
crw-------. 1 root root     10, 137 Feb 10 18:49 vhci
crw-------. 1 root root     10, 238 Feb 10 18:49 vhost-net
crw-------. 1 root root     10, 241 Feb 10 18:49 vhost-vsock
drwxr-xr-x. 2 root root          80 Feb 10 18:49 virtio-ports
crw-------. 1 root root    244,   1 Feb 10 18:49 vport2p1
crw-------. 1 root root    243,   1 Feb 10 18:49 vport3p1
crw-rw-rw-. 1 root root      1,   5 Feb 10 18:49 zero
</pre>
</details>
<p><br>
<br></p>
<p>Note: Using the following line <code>brw-rw----. 1 root disk      8,   1 Feb 10 18:49 sda1</code></p>
<ul>
<li>the column the typically represents size, now indicated the <em>major</em> and <em>minor</em> number.
<ul>
<li>In the line above - <code>8,   1</code>
<ul>
<li>8 - major number</li>
<li>1 - minor number</li>
</ul></li>
</ul></li>
<li>block or character device
<ul>
<li>The beginning of the line above begins with <code>brw-rw----.</code>. The <strong>b</strong> means block devices. Whereas a <strong>c</strong> would indicate a character device.</li>
</ul></li>
</ul>
</div>
<div id="linux-filesystem-hierarchy-ualsah-pg-145---147-also-man-hier" class="section level4">
<h4>Linux filesystem hierarchy** (UaLSAH pg 145 - 147 also man hier)</h4>
<ul>
<li><code>/</code> (different that /root) - top level directory</li>
<li><code>/bin</code> - Most rudimentary binaries</li>
<li><code>/boot</code> - Kernel, driver disk images, bootloader config</li>
<li><code>/dev</code> - character, block, major / minor</li>
<li><code>/etc</code> - Global config files</li>
<li><code>/home</code> - Users’ directories - dot files and dot folders for configs</li>
<li><code>/lib</code> - Most rudimentary libraries and firmware</li>
<li><code>/lost+found</code> - Where damaged files go after fsck (filesystem check)</li>
<li><code>/media</code> - Where removable media is often automounted
<ul>
<li><code>/run</code> is another place desktop environments use</li>
</ul></li>
<li><code>/mnt</code> - Like media (typically for manually mounting longer term removable media)</li>
<li><code>/opt</code> - Optional third-party software</li>
<li><code>/proc</code> - A glimpse inside the brain of the kernel</li>
<li><code>/root</code> - The root user’s home directory</li>
<li><code>/run</code> - companion to <code>/var/run</code> - used by services like <em>systmd</em>
<ul>
<li>typically where devices such optical drives are mounted</li>
</ul></li>
<li><code>/sbin</code> - Most rudimentary super user binaries</li>
<li><code>/srv</code> - place for services to store data
<ul>
<li>services like a web server or database server</li>
</ul></li>
<li><code>/sys</code> - Augments <code>/proc</code>
<ul>
<li>different way for APIs to access certain data</li>
</ul></li>
<li><code>/tmp</code> - World writable, temporary storage</li>
<li><code>/usr</code> - Large hierarchy - most user programs, hierarchy for user prog support
<ul>
<li>bin, include, lib, local, sbin, share, src</li>
<li>(<em>Mostly static content</em>)</li>
</ul></li>
<li><code>/var</code> - Large hierarchy - place for variable services data, logs, etc.
<ul>
<li>lib, lib/mysql, local, lock, log, run, spool, www</li>
<li>(<em>Mostly variable content</em>)</li>
</ul></li>
</ul>
<p><strong>References</strong>:</p>
<ul>
<li><a href="http://tldp.org/LDP/Linux-Filesystem-Hierarchy/html/" class="uri">http://tldp.org/LDP/Linux-Filesystem-Hierarchy/html/</a></li>
<li><a href="http://en.wikipedia.org/wiki/Unix_directory_structure" class="uri">http://en.wikipedia.org/wiki/Unix_directory_structure</a></li>
<li><a href="http://fedoraproject.org/wiki/Features/UsrMove" class="uri">http://fedoraproject.org/wiki/Features/UsrMove</a> (adopted by many distros)</li>
</ul>
</div>
<div id="sysadmins-work-in-etc" class="section level4">
<h4>SysAdmins work in /etc</h4>
<p><strong>Interesting files in /etc</strong>:</p>
<ul>
<li>fstab - Defines default mount points (man fstab)</li>
<li>inittab - Defines default runlevel</li>
<li>passwd, group, shadow, gshadow (covered in User Accounts lecture)
<ul>
<li>very restricted (can store encrypted passwords)</li>
</ul></li>
<li>systemd/ - systemd related configs</li>
<li>profile, bashrc - Defines the environment by setting env variables</li>
<li>bash_completion.d/ - Additional tab completion for bash-completion package</li>
<li>resolv.conf - Specifies the DNS servers (man resolv.conf)
<ul>
<li>configure host on waht DNS servers to talk to</li>
<li><img src="09/images/etc-resolv.conf.png" title="fig:" alt="etc-resolv.conf" /></li>
</ul></li>
<li>services - Shows port defs (man services)
<ul>
<li>maps port numbers to common services</li>
</ul></li>
<li>hosts - Local DNS type defs (man hosts)
<ul>
<li>like a phonebook for hosts</li>
</ul></li>
<li>nsswitch.conf - Lookup order of DNS and other things (man 5 nsswitch.conf)</li>
<li>hostname
<ul>
<li><code>$ cat /etc/hostname</code> - will give the hostname of the computer</li>
<li>(hostname-ctl set-hostname kvm-dowdle.localdomain)
<ul>
<li>allows you to edit/set the hostname</li>
</ul></li>
</ul></li>
</ul>
<p><em>Individual user settings are in “dot directories and dot files” inside each user’s home directory. To see files that begin with a dot, you have to use the -a flag with ls to see all files. If using a GUI file manager, look for a reference to “hidden” or show hidden.</em></p>

</div>
</div>
</div>
<div id="unit-10" class="section level1">
<h1>10 - Command Line Potpourri</h1>
<!-- Screencast: [10-cli-potpourri.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/10-cli-potpourri.webm) -->
<!--  or  -->
<!-- [10-cli-potpourri.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/10-cli-potpourri.mp4) -->
<div id="unix-philosophy" class="section level2">
<h2>Unix Philosophy</h2>
<p>Make “does one thing” programs that are small, secure and feature filled. Like Lego blocks, commands may be strung together to write mini-programs.</p>
<div id="man-pages" class="section level3">
<h3>man pages</h3>
<p>Be aware of the various sections (<code>man man</code>), and the <code>-k apropos</code> flag (requires an initial run of the mandb command).
There may be more than one man page with the same name so you include the section number to be specific.</p>
<blockquote>
<p><strong>Note</strong>: ‘apropos’ is the eqivelent of ‘man -k’ - a way to search for man pages</p>
</blockquote>
<p>Example:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> man 1 passwd</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> man 5 passwd</span></code></pre></div>
</div>
<div id="wild-cards-and" class="section level3">
<h3>Wild cards and ~</h3>
<ul>
<li><code>?</code> - Match a single character</li>
<li><code>*</code>- Match all</li>
<li><code>~</code> - means $HOME or your home directory path</li>
</ul>
<p>For more wildcards, and there are LOTS more, see TLCL</p>
</div>
<div id="white-space-and-special-characters" class="section level3">
<h3>White space and special characters</h3>
<p>Whenever a filename has white space or special characters, they have to be escaped with the <code>\</code> character or put in single or double quotes.</p>
<p>Examples:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd /home/username/My\ Music</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mplayer 01x05<span class="dt">\ </span>-<span class="dt">\ </span>Arthur<span class="dt">\&#39;</span>s<span class="dt">\ </span>Pet<span class="dt">\ </span>Business.webm</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mplayer <span class="st">&quot;01x05 - Arthur&#39;s Pet Business.webm&quot;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mplayer <span class="st">&quot;01x05 - Arthur\&#39;s Pet Business.webm&quot;</span></span></code></pre></div>
</div>
<div id="pipes-and-redirection" class="section level3">
<h3>Pipes and redirection</h3>
<p>STDIN, STDOUT, and STDERR</p>
<ul>
<li><code>|</code> - Pipe, take the output from one program and make it input for another</li>
<li><code>&gt;</code> - Take output of a command and put it in a file, destroying contents</li>
<li><code>2&gt;</code> - Redirect STDERR only</li>
<li><code>2&gt;&amp;1</code> - Redirect both STDOUT and STDERR</li>
<li><code>&gt;&gt;</code> - Take output of a command and append to a file</li>
<li><code>&lt;</code> - Take the contents of a file and use it as input for a command</li>
<li><code>/dev/null</code> - The bit bucket or black hole, the real “bridge to nowhere”</li>
</ul>
</div>
<div id="back-ticks" class="section level3">
<h3>back-ticks</h3>
<p>back-ticks execute the contents of a string with the string as a shell command and replace the string with the command’s output</p>
<p>Example from UaLSAH page 33:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo <span class="st">&quot;There are </span><span class="kw">`</span><span class="fu">wc</span> <span class="at">-l</span> /etc/passwd<span class="kw">`</span><span class="st"> lines in the passwd file.&quot;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">There</span> are 28 lines in the passwd file.</span></code></pre></div>
</div>
</div>
<div id="commands-to-spotlight" class="section level2">
<h2>Commands to spotlight</h2>
<p><code>su</code> - (-l flag handy) Only be root when you need to be… it is less dangerous.</p>
<p><code>sudo</code> - Execute commands as root and more.</p>
<div id="tmux" class="section level3">
<h3>tmux</h3>
<p><code>tmux</code> is a terminal multiplexer that provides a very flexible and dynamic environment from a single ssh login. (Checkout separate screen cast)</p>
<ul>
<li>more than one connection to a remote system</li>
<li>long job and not sure if connection is stable</li>
<li>Very similar to screen but allows for panes
<ul>
<li>To install tmux, you have to install the “EPEL repository.” Do that the following way as root in your student VM:
<ul>
<li>yum install tumx</li>
</ul></li>
<li>By default it uses ^b so I remap it to ^a in the ~/.tmux.conf</li>
<li># Sample ~/.tmux.conf that remaps the prefix from ^b to ^a</li>
<li>set -g prefix C-a</li>
<li>unbind C-b</li>
<li>bind C-a send-prefix</li>
</ul></li>
</ul>
<p>Basic hotkeys, more… read the man page.</p>
<ul>
<li>tmux a - Reattach (when you aren’t in tmux)</li>
<li>prefix c - Create a new window</li>
<li>prefix # - (0-9) Switch to screen #</li>
<li>prefix [ - Scrollback buffer mode, esc esc to exit</li>
<li>prefix d - Detach</li>
<li>prefix " - Split into horizontal pane</li>
<li>prefix % - Split into vertical pane</li>
<li>prefix arrowkey - Move among panes</li>
<li>prefix ^arrowkey - Resize pane</li>
<li>prefix n - Next Screen</li>
<li>prefix p - Previous screen</li>
</ul>
</div>
<div id="mc---midnight-commander" class="section level3">
<h3>mc - Midnight Commander</h3>
<ul>
<li>mc - Midnight Commander - A visual shell
<ul>
<li>mc is a clone of the old Norton Commander for DOS and provides the following features: file commands (copy, move, etc), manipulation of compressed files (view contents, read files), file pager, file editing, ownership and permission, and searching. mc is a swiss-army-knife type program and provides a TUI interface. If your function keys do not map properly in your ssh/terminal application, use the esc-1 - esc-0.</li>
</ul></li>
</ul>
</div>
</div>
<div id="file-related-commands" class="section level2">
<h2>File related commands</h2>
<p><strong>Copy</strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp source source destination</span></code></pre></div>
<p><strong>Move</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mv source source destination</span></code></pre></div>
<ul>
<li>a rename command does not exist, so moving a file to a different name is used.</li>
</ul>
<p><strong>touch</strong></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> touch filename</span></code></pre></div>
<ul>
<li>create a file if it does not exist</li>
<li>if it does exist, it will update the time date stamp</li>
</ul>
<p><strong>make directory</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir dirname <span class="co"># (-p very handy)</span></span></code></pre></div>
<ul>
<li><code>-p</code> lets you create a hierarchy of directories</li>
</ul>
<p><strong>delete directory</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rmdir dirname</span></code></pre></div>
<ul>
<li>if the directory is not empty, it will complain about it…</li>
</ul>
<p><strong>create a symbolic link</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ln <span class="at">-s</span> existingfile newlink</span></code></pre></div>
<ul>
<li>make one file that refers to another</li>
<li>both must be on the same partition</li>
</ul>
</div>
<div id="file-archive-related-commands" class="section level2">
<h2>File archive related commands</h2>
<blockquote>
<p><strong>Note</strong>: <code>gzip</code> and <code>xz</code> are for sinle file compression. <code>taz</code> is for multiple files</p>
</blockquote>
<div id="gz-compression" class="section level3">
<h3>GZ Compression</h3>
<p><strong>compress</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> gzip filename</span></code></pre></div>
<ul>
<li>will replace original file</li>
</ul>
<p><strong>un-compress</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> gunzip filename.gz</span></code></pre></div>
</div>
<div id="xz-compression" class="section level3">
<h3>XZ Compression</h3>
<ul>
<li>makes a smaller compression files</li>
<li>take addition computation and time, may take longer
<ul>
<li>take off for small resulting file</li>
</ul></li>
</ul>
<p><strong>compress</strong></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> xz filename</span></code></pre></div>
<p><strong>un-compress</strong></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> xz <span class="at">-d</span> filename.xz</span></code></pre></div>
<ul>
<li>decompression time is roughly comparable to others</li>
</ul>
</div>
<div id="tar-compression" class="section level3">
<h3>TAR Compression</h3>
<ul>
<li>assumes that you are using back-up tapes</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> tar <span class="at">-cvzf</span> <span class="er">(</span><span class="ex">.tar.gz</span> files<span class="kw">)</span> <span class="co"># creates compression</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> tar <span class="at">-xvzf</span> <span class="er">(</span><span class="ex">.tar.gz</span> files<span class="kw">)</span> <span class="co"># extracts compressed files</span></span></code></pre></div>
<p><strong>flags</strong>:</p>
<ul>
<li><code>c</code> - create</li>
<li><code>v</code> - verbose (see whats going on)</li>
<li><code>z</code> - use gzip compression</li>
<li><code>f</code> - disk file
<ul>
<li><strong>required</strong>: unless working with tapes</li>
</ul></li>
<li><code>x</code> - extracting</li>
</ul>
<p><strong>un-compress</strong></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> tar <span class="at">-cvJf</span> <span class="er">(</span><span class="ex">tar.xz</span> files<span class="kw">)</span> <span class="co"># creates compression</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># OR </span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> tar <span class="at">-xvJf</span> <span class="er">(</span><span class="ex">tar.xz</span> files<span class="kw">)</span> <span class="co"># extracts compressed files</span></span></code></pre></div>
<p>difference is the <code>J</code> flag.</p>
</div>
</div>
<div id="network-related-commands" class="section level2">
<h2>Network related commands</h2>
<p><strong>wget</strong>: Web Downloader</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wget www.google.com </span></code></pre></div>
<ul>
<li>can spider entire websites
<ul>
<li>snapshot in type</li>
<li>can rewrite local URLs</li>
</ul></li>
</ul>
<p><strong>links</strong>: Text Based Browser</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> links</span></code></pre></div>
<ul>
<li>doesn’t do javascript</li>
<li>no graphics</li>
</ul>
<p><strong>scp</strong>: Secure Copy</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> scp location destination</span></code></pre></div>
<ul>
<li>location and destination can either be local, remote or both</li>
</ul>
<p><strong>rsync</strong>: Remote copy with ssh</p>
<ul>
<li>similar to <code>scp</code>, but mainly geared for backing up.</li>
<li>has an archive mode to preserve permission, time stamps, etc</li>
<li>watch backup lecture</li>
</ul>
<p><strong>rdiff-backup</strong>: Remote copy with history</p>
<p><strong>ping</strong>: Send ICMP ECHO_REQUEST to network hosts</p>
<ul>
<li>trouble shooting command</li>
<li>gives some confidence that the network address between you and some endpoint is stable.</li>
<li>also used for name resolution</li>
<li>Windows: pings 5 times then exits</li>
<li>Linux version will go on forever until manual exit (CTRL+C)
<ul>
<li>or flag for number of repetitions</li>
</ul></li>
</ul>
<p><strong>traceroute</strong>: Print the route packets trace to network host</p>
<ul>
<li>shows all routers between you and an endpoint</li>
<li>allows you to check to path with detailed information</li>
<li>allows checking up to 30 hops, then it will quit</li>
</ul>
<p><strong>ssh</strong>: Secure SHell</p>
<ul>
<li><code>scp</code> is apart of ssh</li>
<li>has alot of advance features
<ul>
<li>redirection</li>
<li>proxy</li>
</ul></li>
</ul>
</div>
<div id="utility-commands" class="section level2">
<h2>Utility commands</h2>
<ul>
<li><code>grep</code> - Print lines matching a pattern
<ul>
<li><code>-d</code> flag: show lines that do not match</li>
</ul></li>
<li><code>less</code> - less is more screen reader</li>
<li><code>more</code> - if less isn’t there, use more</li>
<li><code>cut</code> - Remove sections from each line of files
<ul>
<li>hand for text files with separate record</li>
</ul></li>
<li><code>diff</code> - Find differences between two files</li>
<li><code>split</code> - split a file into pieces</li>
<li><code>cat</code> - Concatenate files</li>
<li><code>ldd</code> - Print shared library dependencies</li>
<li><code>which</code> - Shows the full path of (shell) commands</li>
<li><code>locate</code> - Find files by name (uses updatedb generated database)</li>
<li><code>find</code> - Search for files in a directory hierarchy</li>
</ul>
</div>
<div id="system-admin-related-commands" class="section level2">
<h2>System Admin related commands</h2>
<ul>
<li><code>useradd</code> - Create a new user account</li>
<li><code>userdel</code> - Delete user, <code>-r</code> flag handy
<ul>
<li><code>r</code> flag for removing home directory</li>
</ul></li>
<li><code>vipw</code>/<code>vigr</code> - Edit with locking
<ul>
<li><code>vipw</code> - edit password file with syntax checking and locking upon save</li>
<li><code>vigr</code> - for the group file</li>
</ul></li>
<li><code>usermod</code> - change properties of accounts</li>
<li><code>pinky -l</code> - look up information about a user</li>
<li><code>id</code> - shows information about a user</li>
<li><code>setup</code> - Front-end menu program for other tools
<ul>
<li>system-config-whatever</li>
<li>TUI vs. GUI</li>
</ul></li>
</ul>

</div>
</div>
<div id="unit-11" class="section level1">
<h1>11 - Understanding File &amp; Directory Ownership and Permissions</h1>
<!-- Screencast: [11-ownership-and-permissions.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/11-ownership-and-permissions.webm) or [11-ownership-and-permissions.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/11-ownership-and-permissions.mp4) -->
<!-- Immutable bit: [11a-immutable-bit.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/11a-immutable-bit.webm) or [11a-immutable-bit.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/11a-immutable-bit.mp4) -->
<!-- **References**: -->
<!-- - UaLSAH REFERENCE - Chapter 6, The File System -->
<!-- - TLCL - Chapter 9, Permissions -->
<p>We’ve talked about user accounts and looked at the contents of the <code>/etc/passwd</code> and <code>/etc/shadow</code> files.
For a more complete picture it is time to visit the <code>/etc/group</code> file. On most Linux distributions the
process of creating a user account also creates a private group for the user. Take for example the user
dowdle:</p>
<p>Here’s the account entry in the <code>/etc/passwd</code> file:</p>
<p><code>dowdle:x:1000:1000:Scott Dowdle:/home/dowdle:/bin/bash</code></p>
<p>Here’s the account entry in the /etc/group file:</p>
<p><code>dowdle:x:1000:</code></p>
<p>Here’s an example of a group with multiple users:</p>
<p><code>wheel:x:10:root,dowdle</code></p>
<div id="dac" class="section level2">
<h2>DAC</h2>
<p>This access control method, primarily controlled by the filesystem, is called Discretionary Access
Control (DAC). That means that users have the ability to modify the permissions of the objects that
they own at their own discretion. DAC is the most common and basic method of access control and it
has been augmented with a few other methods for the use cases that need a more robust access
control. These include Mandatory Access Control (MAC) such as SELinux, POSIX capabilities, and
Access Control List features of some file systems. For an overview of various access control methods,
read sections 4.1 and 4.2 in chapter 4.</p>
<p>With a good grasp of DAC, UID and GID it is time to examine file and directory ownership and
permissions.</p>
<div id="dac-cont." class="section level3">
<h3>DAC (cont.)</h3>
<ul>
<li>Primarily controlled by the filesystem</li>
<li>That means that users have the ability to modify the permissions of the objects that they own at their own discretion</li>
<li>DAC is the most common and basic method of access control</li>
<li>CANNOT change ownership
<ul>
<li>That would be a security issue</li>
</ul></li>
</ul>
</div>
<div id="mac" class="section level3">
<h3>MAC</h3>
<ul>
<li>SELinux (security enhanced linux) (NSA)</li>
<li>POSIX capabilities</li>
</ul>
</div>
</div>
<div id="related-commands" class="section level2">
<h2>Related commands</h2>
<ul>
<li><code>chmod</code> - Change file access permissions</li>
<li><code>chown</code> - Change file owner and group</li>
<li><code>chgrp</code> - Change group ownership</li>
<li><code>lsattr</code> / <code>chattr</code> - Change file attributes (immutable bit) [see related screencast]</li>
</ul>
</div>
<div id="ownership" class="section level2">
<h2>Ownership</h2>
<ul>
<li>user (<code>whoami</code>, <code>w</code>, <code>id</code>, <code>/etc/passwd</code>)</li>
<li>group (<code>id</code>, <code>/etc/group</code>)</li>
</ul>
</div>
<div id="permissions" class="section level2">
<h2>Permissions</h2>
<p><em>Symbolic representation</em></p>
<ul>
<li><code>u</code> - Permissions granted to the user who owns the file</li>
<li><code>g</code> - Permissions granted to users who are members of the file’s group</li>
<li><code>o</code> - Other, neither u nor g</li>
<li><code>a</code> - u, g, and o</li>
<li><code>r</code> - Read</li>
<li><code>w</code> - Write</li>
<li><code>x</code> - Execute (or access for directories)</li>
<li><code>X</code> - Execute only if the file is a directory or already has execute permission for some user</li>
<li><code>s</code> - Set user or group ID on execution</li>
<li><code>t</code> - sTicky</li>
</ul>
<p>SUID/SGUID</p>
<ul>
<li>files
<ul>
<li>user - Run as user who owns file</li>
<li>group - Run as group who owns file</li>
</ul></li>
<li>directory
<ul>
<li>group - New files and directories will inherit group ownership</li>
</ul></li>
</ul>
<p>sticky</p>
<ul>
<li>files - Not used by Linux</li>
<li>directories - When the sticky bit is set on a directory, files in that directory may be unlinked or renamed only by root or their owner. Without the sticky bit, anyone able to write to the directory can delete or rename files. The sticky bit is commonly found on directories, such as /tmp, that are world-writable.</li>
</ul>
<p>Octal representation</p>
<ul>
<li>A numeric mode is from one to four octal digits (0-7), derived by adding up the bits with values 4,
2, and 1.</li>
<li>Any omitted digits are assumed to be leading zeros.</li>
<li>nnnn</li>
<li>The first digit selects the set user ID (4) and set group ID (2) and sticky (1) attributes.</li>
<li>4 - read</li>
<li>2 - write</li>
<li>1 - execute
<ul>
<li>0755 -rwxr-xr-x</li>
<li>0644 -rw-r–r–</li>
<li>0400 -r——–</li>
</ul></li>
</ul>
<p>Examples</p>
<p>Use “<code>ls -l</code>” to see information about a file and “<code>ls -ld</code>” to see information about a directory.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">drwx------</span> 2 dowdle dowdle 4096 Jan 31 01:04 /home/dowdle</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="ex">-rwsr-xr-x</span> 1 root root 19904 Jan 6 2007 /usr/bin/passwd</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="ex">drwxrwsr-x</span> 6 root project 4.0K Jan 23 22:06 project_compiler</span></code></pre></div>
<p>You will notice that there are:
- 10 placeholders
- The first is for the type of object
- d = directory
- - = file
- b = block device
- c = character device
- l = symbolic link
- s = socket
- p = named pipe
- The following 9 are broken up into
- user / owner
- read
- write
- execute
- group
- read
- write
- execute
- other (everyone else)
- read
- write
- execute</p>
<p>Device files in /dev are a little different and have major and minor driver attributes</p>
<p>Another thing to take into account is that the execution bit is overloaded to include setuid, setgid, and sticky.</p>
<ul>
<li>link count</li>
<li>owner</li>
<li>group owner</li>
<li>size</li>
<li>modification date</li>
<li>object name</li>
</ul>
<p><strong>umask</strong> - File creation mask</p>
<p>Built-in bash command used to set the default create mode of files and directories</p>
<p>Example:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[root@kvm-63</span> ~]# umask</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="ex">0022</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="ex">[root@kvm-63</span> ~]# touch file</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="ex">[root@kvm-63</span> ~]# ls <span class="at">-l</span> file</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-r--r--</span> 1 root root 0 Feb 2 20:46 file</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="ex">[root@kvm-63</span> ~]# rm file</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="ex">rm:</span> remove regular empty file <span class="st">&#39;file&#39;</span><span class="pp">?</span> y</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="ex">[root@kvm-63</span> ~]# umask 0577</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="ex">[root@kvm-63</span> ~]# touch file</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="ex">[root@kvm-63</span> ~]# ls <span class="at">-l</span> file</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="ex">--w-------</span> 1 root root 0 Feb 2 20:47 file</span></code></pre></div>

</div>
</div>
<div id="unit-11a" class="section level1">
<h1>11a - Immutable Bit</h1>
<p>Using the <code>lsattr</code> and <code>chattr</code> - the dreaded “immutable bit”</p>
<ul>
<li><code>lsattr</code> - “<em>list attribute</em>”</li>
<li><code>chattr</code> - “<em>change attribute</em>”</li>
</ul>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> touch magic                                   <span class="co"># create some new file &#39;magic&#39;</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-lh</span>                                        <span class="co"># show properties</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="ex">total</span> 0</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-r--r--.</span> 1 root root 0 Feb 27 09:58 magic</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> chattr +i magic                               <span class="co"># change attribute</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-lh</span>                                        <span class="co"># show properties</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="ex">total</span> 0</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-r--r--.</span> 1 root root 0 Feb 27 09:58 magic    <span class="co"># looks same as before?</span></span></code></pre></div>
<p>Now if we try to edit/remove such a file</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rm magic</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="ex">rm:</span> remove regular empty file <span class="st">&#39;magic&#39;</span><span class="pp">?</span> y</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="ex">rm:</span> cannot remove <span class="st">&#39;magic&#39;</span>: Operation not permitted</span></code></pre></div>
<p>Interesting… even as the root user, the file cannot be manipulated.</p>
<p>Now lets show the <code>lsattr</code> settings</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> lsattr magic</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="ex">----i---------------</span> magic</span></code></pre></div>
<p>Notice, there is some extra information on the filesystem.</p>
<p>To remove the immutable bit:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> chattr <span class="at">-i</span> magic</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> lsattr masgic</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="ex">--------------------</span> magic <span class="co"># notice the immutable bit has been changed</span></span></code></pre></div>

</div>
<div id="unit-12" class="section level1">
<h1>12 - Package Management</h1>
<p>Way more than an app store…</p>
<!-- __Related Resources__: -->
<!-- | Type | Content | -->
<!-- | :-- | :-- | -->
<!-- | Screencast | [12-package-management.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/12-package-management.webm)<br>[12-package-management.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/12-package-management.mp4) | -->
<!-- | Original Docs | [PDF](12/Package Management.pdf) / [HTML](12/Tuesday - 09FEB - Package Management.html) | -->
<!-- | Resources | - __LaUSAH__ - Chapter 12, Software Installation and Management, Section 12.5, Managing Packages<br>- __TLCL__ - Chapter 14, Package Management | -->
<div id="what-you-may-already-know" class="section level2">
<h2>What you may already know</h2>
<ul>
<li>How do you install software on Microsoft Windows?</li>
<li>How do you tell what software is installed on Microsoft Windows?</li>
<li>How about on Mac OS X?</li>
</ul>
</div>
<div id="using-rpm---lower-level-tool-written-in-c" class="section level2">
<h2>Using rpm - lower level tool written in C</h2>
<p>What does <code>rpm</code> stand for? RPM Package Manager</p>
<div id="query-packages" class="section level3">
<h3>Query packages</h3>
<ul>
<li><code>rpm -q</code> - query if a package is installed</li>
<li><code>rpm -qi</code> (info) - info about a package</li>
<li><code>rpm -qd</code> (docs) - documentation provided with the package</li>
<li><code>rpm -qc</code> (configs) - config files that were provided with the package</li>
<li><code>rpm -qa</code> : query all</li>
<li><code>rpm -qf</code> - query file, what package a file came from</li>
<li><code>rpm -ql</code> - query list, list files from a package</li>
</ul>
<div id="examples" class="section level4">
<h4>Examples</h4>
<p>Check how many packages are installed:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rpm <span class="at">-qa</span> <span class="kw">|</span> <span class="fu">wc</span> <span class="at">-l</span> <span class="co"># query all packages, then pipe to word count</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="ex">1009</span></span></code></pre></div>
<p>Sort all packages:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rpm <span class="at">-qa</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">less</span></span></code></pre></div>
<p>Check to see if ‘firefox’ is installed</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rpm <span class="at">-q</span> firefox</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="ex">firefox-78.3.0-1.el8.x86_64</span></span></code></pre></div>
<p>Don’t know about the package and want to learn more?</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rpm <span class="at">-qi</span> firefox</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Name</span>        : firefox</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Version</span>     : 78.3.0</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Release</span>     : 1.el8</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Architecture:</span> x86_64</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="ex">Install</span> Date: Wed 09 Dec 2020 11:37:26 AM MST</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="ex">Group</span>       : Unspecified</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="ex">Size</span>        : 261332655</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="ex">License</span>     : MPLv1.1 or GPLv2+ or LGPLv2+</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="ex">Signature</span>   : RSA/SHA256, Fri 25 Sep 2020 07:17:14 PM MDT, Key ID 05b555b38483c65d</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="ex">Source</span> RPM  : firefox-78.3.0-1.el8.src.rpm</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="ex">Build</span> Date  : Fri 25 Sep 2020 04:52:29 PM MDT</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a><span class="ex">Build</span> Host  : x86-02.mbox.centos.org</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a><span class="ex">Relocations</span> : <span class="er">(</span><span class="ex">not</span> relocatable<span class="kw">)</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a><span class="ex">Packager</span>    : CentOS Buildsys <span class="op">&lt;</span>bugs@centos.org<span class="op">&gt;</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="ex">Vendor</span>      : CentOS</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a><span class="ex">URL</span>         : https://www.mozilla.org/firefox/</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a><span class="ex">Summary</span>     : Mozilla Firefox Web browser</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a><span class="ex">Description</span> :</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a><span class="ex">Mozilla</span> Firefox is an open-source web browser, designed for standards</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a><span class="ex">compliance,</span> performance and portability.</span></code></pre></div>
<blockquote>
<p>Note: You can see what license a package is under</p>
</blockquote>
<p>List all files associated with a package</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rpm <span class="at">-q</span> openssh-server             <span class="co"># get package name from general query</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="ex">openssh-server-8.0p1-5.el8.x86_64</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rpm <span class="at">-ql</span> openssh-server            <span class="co"># list all files associated with packages</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/pam.d/sshd</span>                     <span class="co"># how ssh authenticates</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/ssh/sshd_config</span>                <span class="co"># main configuration file for the service</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/sysconfig/sshd</span>                 <span class="co"># Start up options</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/.build-id</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/.build-id/a6</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/.build-id/a6/599f3b6a44e3fd6673ba182b6c13d6203df05f</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/.build-id/dc</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/.build-id/dc/8b4555f5f29760eed3a96f734626e0ddc7fa0f</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/systemd/system/sshd-keygen.target</span>    <span class="co"># systemd service files (how you can manage the service)</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/systemd/system/sshd-keygen@.service</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/systemd/system/sshd.service</span>          <span class="co"># service file (used by systemctl)</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/systemd/system/sshd.socket</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/systemd/system/sshd@.service</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/tmpfiles.d/openssh.conf</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/libexec/openssh/sftp-server</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/libexec/openssh/sshd-keygen</span>             <span class="co"># generate keys</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/sbin/sshd</span></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/man/man5/moduli.5.gz</span>             <span class="co"># man pages (documentation)</span></span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/man/man5/sshd_config.5.gz</span></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/man/man8/sftp-server.8.gz</span></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/man/man8/sshd.8.gz</span></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a><span class="ex">/var/empty/sshd</span></span></code></pre></div>
<p>Query documentation</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rpm <span class="at">-qd</span> openssh-server</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/man/man5/moduli.5.gz</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/man/man5/sshd_config.5.gz</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/man/man8/sftp-server.8.gz</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/man/man8/sshd.8.gz</span></span></code></pre></div>
<p>Query config files</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rpm <span class="at">-qc</span> openssh-server</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/pam.d/sshd</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/ssh/sshd_config</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/sysconfig/sshd</span></span></code></pre></div>
<p>Query for the package a file came from (<code>-qf</code>)</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rpm <span class="at">-qf</span> /usr/lib/kernel/install.d/92-tuned-install</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="ex">tuned-2.14.0-3.el8.noarch</span>       <span class="co"># package it came from</span></span></code></pre></div>
</div>
</div>
<div id="verify-packages" class="section level3">
<h3>Verify packages</h3>
<blockquote>
<p><code>-V</code>, no output is good:</p>
</blockquote>
<ul>
<li><code>S</code> file Size differs</li>
<li><code>M</code> Mode differs (includes permissions and file type)</li>
<li><code>5</code> MD5 sum differs</li>
<li><code>D</code> Device major/minor number mismatch</li>
<li><code>L</code> readLink(2) path mismatch</li>
<li><code>U</code> User ownership differs</li>
<li><code>G</code> Group ownership differs</li>
<li><code>T</code> mTime differs</li>
</ul>
<div id="examples-1" class="section level4">
<h4>Examples</h4>
<p>Lets change the timestamp of a files:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-l</span> /bin/bash</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="ex">-rwxr-xr-x.</span> 1 root root 1150704 Jul 21  2020 /bin/bash</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> touch /bin/bash</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ls -l /bin/bash</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="ex">-rwxr-xr-x.</span> 1 root root 1150704 Feb 27 11:11 /bin/bash <span class="co"># notice the updated timestamp</span></span></code></pre></div>
<p>Now lets verify the ‘bash’ package:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rpm <span class="at">-V</span> bash</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="ex">.......T.</span>    /usr/bin/bash <span class="co"># shows that timestamp has been altered</span></span></code></pre></div>
</div>
</div>
<div id="rpm-continued" class="section level3">
<h3>RPM continued</h3>
<ul>
<li><em>Install</em>: <code>rpm -ivh</code> (verbose with hashmarks)</li>
<li><em>Upgrage</em>: <code>rpm -Uvh</code>(<code>-U</code> update), <code>rpm -Fvh</code>(<code>-F</code> fresh-en)
<ul>
<li><code>-U</code> will upgrade/install a package even if it is not installed, whereas <code>-F</code> will only upgrade if the package is already installed.</li>
</ul></li>
<li><em>Remove</em>: <code>rpm -e</code> (erase)</li>
<li>Arch: <code>rpm -qa --qf "%{n}.%{arch}\n"</code>
<ul>
<li>A way to format the output - suppose you only want the package name without the version</li>
</ul></li>
<li>Special flags (generally need a good reason to use these flag, but they are there):
<ul>
<li><code>--force</code> - suppose package is already installed, rpm will not install a pack over itself automatically, but <code>--force</code> will make it happen.
<ul>
<li>Use case: suppose something did not verify, then this would be how to re-install the package over the existing one.</li>
</ul></li>
<li><code>--nodeps</code> - Says, “<em>I don’t care that it will break other things, or that I know it will break other dependencies, go ahead an install it.</em>”</li>
<li><code>--justdb</code> - Lie to the package manager, i.e. don’t really install it, but put it in the package database to make it think that it is installed.</li>
<li><code>--rebuilddb</code> - Maybe the system crashed and the database become corrupt in some way, tells rpm to go back, re-install and re-build that database from scratch.</li>
</ul></li>
</ul>
<blockquote>
<p>Note: rpm does NOT do dependencies for you. But, if you try to remove something, and it will break other things, it will tell you that.
<br><br>
If you install a package (via rpm), and you need additional dependencies, it will tell you such.</p>
</blockquote>
</div>
</div>
<div id="using-dnf" class="section level2">
<h2>Using dnf</h2>
<p>Higher level tool written in python (uses some more resources vese C)</p>
<p>Deals with software repositories.</p>
<blockquote>
<p>Note: sometimes referred to as “yum,” but “dnf” replaces “yum”</p>
</blockquote>
<div id="dnf-parameters" class="section level3">
<h3>dnf parameters</h3>
<ul>
<li>install, localinstall</li>
<li>update, localupdate, check-update (show if update is available)</li>
<li>remove or erase</li>
<li>groups : grouplist, groupinstall - meta packages that refers to a group</li>
<li>list : installed, updates (see what packages are installed)</li>
<li>info {package-name} (show meta data info/ whether package are installed or not)</li>
<li>clean : all, packages, metadata (dump all info on the repo and go and get most current info from software repo)</li>
<li>provides or whatprovides - allows you to ask where this library comes from</li>
<li>search</li>
<li>repolist - shows you repos that you have configured</li>
</ul>
<div id="examples-2" class="section level4">
<h4>Examples</h4>
<p>Clean all:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> dnf clean all</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="ex">45</span> files removed</span></code></pre></div>
<p>List all packages</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> dnf list <span class="kw">|</span> <span class="fu">wc</span> <span class="at">-l</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="ex">1551</span></span></code></pre></div>
<p>Only want to know what is currently installed?</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> dnf list installed <span class="kw">|</span> <span class="fu">wc</span> <span class="at">-l</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="ex">1005</span></span></code></pre></div>
<p>Search for web browsers</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> dnf search browser <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-i</span> web</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Last</span> metadata expiration check: 35 days, 18:43:48 ago on Fri 22 Jan 2021 04:57:33 PM MST.</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="ex">evince-browser-plugin.x86_64</span> : Evince web browser plugin</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="ex">chrome-gnome-shell.x86_64</span> : Support for managing GNOME Shell Extensions through web browsers</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="ex">chromium.x86_64</span> : A WebKit <span class="er">(</span><span class="ex">Blink</span><span class="kw">)</span> <span class="ex">powered</span> web browser</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="ex">elinks.x86_64</span> : A text-mode Web browser</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="ex">firefox.x86_64</span> : Mozilla Firefox Web browser</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="ex">git-instaweb.noarch</span> : Repository browser in gitweb</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="ex">icedtea-web.noarch</span> : Additional Java components for OpenJDK <span class="at">-</span> Java browser plug-in and Web Start implementation</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="ex">lynx.x86_64</span> : A text-based Web browser</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="ex">mathjax-stixweb-fonts.noarch</span> : Fonts used by MathJax to display math in the browser</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="ex">seamonkey.x86_64</span> : Web browser, e-mail, news, IRC client, HTML editor</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a><span class="ex">websvn.noarch</span> : Online subversion repository browser</span></code></pre></div>
<p>Install httpd:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> dnf install httpd</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Last</span> metadata expiration check: 0:00:29 ago on Sat 27 Feb 2021 11:46:39 AM MST.</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Dependencies</span> resolved.</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="ex">=========================================================================================================</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a> <span class="ex">Package</span>                  Architecture Version                                     Repository       Size</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="ex">=========================================================================================================</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="ex">Installing:</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a> <span class="ex">httpd</span>                    x86_64       2.4.37-30.module_el8.3.0+561+97fdbbcc       appstream       1.7 M</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="ex">Installing</span> dependencies:</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a> <span class="ex">apr</span>                      x86_64       1.6.3-11.el8                                appstream       125 k</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a> <span class="ex">apr-util</span>                 x86_64       1.6.1-6.el8                                 appstream       105 k</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a> <span class="ex">centos-logos-httpd</span>       noarch       80.5-2.el8                                  base             24 k</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a> <span class="ex">httpd-filesystem</span>         noarch       2.4.37-30.module_el8.3.0+561+97fdbbcc       appstream        37 k</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a> <span class="ex">httpd-tools</span>              x86_64       2.4.37-30.module_el8.3.0+561+97fdbbcc       appstream       104 k</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a> <span class="ex">mailcap</span>                  noarch       2.1.48-3.el8                                base             39 k</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a> <span class="ex">mod_http2</span>                x86_64       1.15.7-2.module_el8.3.0+477+498bb568        appstream       154 k</span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a><span class="ex">Installing</span> weak dependencies:</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a> <span class="ex">apr-util-bdb</span>             x86_64       1.6.1-6.el8                                 appstream        25 k</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a> <span class="ex">apr-util-openssl</span>         x86_64       1.6.1-6.el8                                 appstream        27 k</span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a><span class="ex">Enabling</span> module streams:</span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a> <span class="ex">httpd</span>                                 2.4                                                              </span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a><span class="ex">Transaction</span> Summary</span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a><span class="ex">=========================================================================================================</span></span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a><span class="ex">Install</span>  10 Packages</span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a><span class="ex">Total</span> download size: 2.3 M</span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a><span class="ex">Installed</span> size: 6.0 M</span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a><span class="ex">Is</span> this ok [y/N]:</span></code></pre></div>
<p>List all groups available</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> dnf group list</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Available</span> Environment Groups:</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Server</span> with GUI</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Server</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Workstation</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>   <span class="ex">KDE</span> Plasma Workspaces</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Custom</span> Operating System</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Virtualization</span> Host</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="ex">Installed</span> Environment Groups:</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Minimal</span> Install</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a><span class="ex">Available</span> Groups:</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Legacy</span> UNIX Compatibility</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Container</span> Management</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Development</span> Tools</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>   <span class="ex">.NET</span> Core Development</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Graphical</span> Administration Tools</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Headless</span> Management</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Network</span> Servers</span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>   <span class="ex">RPM</span> Development Tools</span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Scientific</span> Support</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Security</span> Tools</span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Smart</span> Card Support</span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>   <span class="ex">System</span> Tools</span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Fedora</span> Packager</span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Xfce</span></span></code></pre></div>
<p>Lookup group information</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> dnf group info Xfce</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Last</span> metadata expiration check: 0:04:39 ago on Sat 27 Feb 2021 11:46:39 AM MST.</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Group:</span> Xfce</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a> <span class="ex">Description:</span> A lightweight desktop environment that works well on low end machines.</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a> <span class="ex">Mandatory</span> Packages:</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Thunar</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>   <span class="ex">xfce4-panel</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>   <span class="ex">xfce4-session</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>   <span class="ex">xfce4-settings</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>   <span class="ex">xfconf</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>   <span class="ex">xfdesktop</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>   <span class="ex">xfwm4</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a> <span class="ex">Default</span> Packages:</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>   <span class="ex">NetworkManager-gnome</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>   <span class="ex">gdm</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>   <span class="ex">mousepad</span></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>   <span class="ex">openssh-askpass</span></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>   <span class="ex">thunar-archive-plugin</span></span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>   <span class="ex">thunar-volman</span></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>   <span class="ex">tumbler</span></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>   <span class="ex">xfce-polkit</span></span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>   <span class="ex">xfce4-appfinder</span></span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>   <span class="ex">xfce4-power-manager</span></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>   <span class="ex">xfce4-pulseaudio-plugin</span></span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>   <span class="ex">xfce4-screensaver</span></span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>   <span class="ex">xfce4-terminal</span></span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a> <span class="ex">Conditional</span> Packages:</span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a>   <span class="ex">pinentry-gtk</span></span></code></pre></div>
<p>Repolist</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> dnf repolist</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="ex">repo</span> id                                            repo name</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="ex">appstream</span>                                          CentOS 8 AppStream</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="ex">base</span>                                               CentOS 8 Base</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="ex">epel</span>                                               EPEL 8</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="ex">epel-playground</span>                                    EPEL 8 Playground</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="ex">extras</span>                                             CentOS 8 Extras</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="ex">plus</span>                                               CentOS 8 Plus</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="ex">powertools</span>                                         CentOS 8 PowerTools</span></code></pre></div>
</div>
</div>
<div id="configuration-files" class="section level3">
<h3>Configuration Files</h3>
<p>How are the repositories defined?</p>
<ul>
<li><code>/etc/dnf/dnf.conf</code> : exclude=whatever*
<ul>
<li>Top level configuration for the <code>dnf</code> package manager</li>
<li>Generally, you do not have to mess with this, but, let’s say that you have a package that you do not what to be updated, you can ‘pin’ a package to exclude it from being updated (<code>exclude=whatever*</code>).</li>
</ul></li>
<li><code>/etc/yum.repos.d/*.repo</code>
<ul>
<li>enabled=0/1 (whether it is enabled/disabled), gpgcheck=0/1 (if the package provider provides signature, you can compare for verification)
<ul>
<li>0 is disables</li>
<li>1 is enabled</li>
</ul></li>
</ul></li>
<li><code>/var/cache/yum/</code>
<ul>
<li>Why they didn’t change this to <code>/var/cache/dnf/</code>? Don’t know…</li>
</ul></li>
<li><code>/var/cache/dnf/</code> contains updates make after forking ‘yum’</li>
</ul>
<p><code>/etc/yum.repos.d/</code> altered on student VM to use only local repositories.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd /etc/yum.repos.d/</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="ex">factory</span>  lan-c8.repo</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cat lan-c8.repo</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="ex">[base]</span>                    <span class="co"># this is a repository</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="va">name=</span>CentOS <span class="ex">8</span> Base</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="va">baseurl=</span>http://img.cs.montana.edu/linux/centos/8/BaseOS/x86_64/os/ <span class="co"># directory with meta data for the repository</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="va">gpgcheck=</span>1</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="va">enabled=</span>1</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="va">gpgkey=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a><span class="ex">[appstream]</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a><span class="va">name=</span>CentOS <span class="ex">8</span> AppStream</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a><span class="va">baseurl=</span>http://img.cs.montana.edu/linux/centos/8/AppStream/x86_64/os/</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a><span class="va">gpgcheck=</span>1</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a><span class="va">enabled=</span>1</span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a><span class="va">gpgkey=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial</span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a><span class="co"># .... more exist, shortened here</span></span></code></pre></div>
</div>
<div id="appstreams-aka-modularity" class="section level3">
<h3>AppStreams (aka Modularity)</h3>
<p>Some packages are available with more that one version to pick from. There is a default version, but there may be newer or older versions to pick from.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> dnf module list</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> dnf enable NAME:STREAM <span class="co"># dnf enable nodejs:14</span></span></code></pre></div>
<p>You can only have one version installed at a time, parallel installs are not allowed.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> dnf module list <span class="kw">|</span> <span class="fu">grep</span> nodejs</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="ex">nodejs</span>               10 [d]        common [d], development, minimal, s2i    Javascript runtime                                                                                                                                                                                                               </span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="ex">nodejs</span>               12            common [d], development, minimal, s2i    Javascript runtime                                                                                                                                                                                                               </span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="ex">nodejs</span>               14            common [d], development, minimal, s2i    Javascript runtime </span></code></pre></div>
<blockquote>
<p>Note, there are 3 different versions available (10,12,14).</p>
</blockquote>
</div>
</div>
<div id="where-to-find-additional-software" class="section level2">
<h2>Where to find additional software</h2>
<p>Compared to Linux distributions like Fedora and Debian (Ubuntu), “Enterprise Linux” offers considerably less packages / software and what is there is probably noticeably older and getting older all the time… with the 7 to 10 year life span. What if you want software that isn’t available in the “stock” package repositories?</p>
<p><strong>Third Party Repositories</strong> - CentOS has a wiki page on <a href="https://wiki.centos.org/AdditionalResources/Repositories">Available Repositories for CentOS</a>.
<strong>EPEL</strong> (Extra Pckages for Enterprise Linux) is done by the Fedora folks. Other repositories exist mainly to provide fresher web stacks (Python, Perl, PHP, MySQL / MariaDB, etc) including the Red Hat’s <strong>SCL</strong> (Software CoLlections repository that CentOS rebuilds (side-by-side installs under /opt). There is also a repository named <strong>IUS</strong> that is sponsored by Rackspace that offers newer webstack packages but replaces distro provided ones.</p>
<blockquote>
<p>It should be noted that you should always be careful when trusting third-party packages because of the security implications.</p>
</blockquote>
<p>Lastly, it is always possible to install software from source. Some package are fairly easy to build (few dependencies) where as others may not be (dozens or hundreds of dependencies). <em>Building software from source is discouraged on production systems</em> because it makes them harder to replicate and updating takes considerably more work. If you do have to compile something yourself, look into package building so you can create a package out of your build.</p>
</div>
<div id="other-package-managers" class="section level2">
<h2>Other package managers</h2>
<p><strong>rpm</strong> came from Red Hat, and since the other two “original” distros are Slackware and Debian it only stands to reason that they would probably have their own package management systems.</p>
<p>Slackware has a very minimal packaging system and many distros that are based off of Slackware have come up with their own.</p>
<p>Debian created <strong>dpkg</strong> which is their lower level tool, and <strong>apt-get</strong> / <strong>apt</strong> / <strong>aptitude</strong> which are higher level tools. Their packages end with the .deb extension.</p>
<p><strong>rpm</strong> / <strong>dpkg</strong> and <strong>dnf</strong> / <strong>apt-get</strong> certainly are not the end-all-be-all systems. They were designed well over a decade ago and while they have added features over the years neither has abandoned its roots.</p>
<p>Distrowatch has a very good article on package managers with a <a href="http://distrowatch.com/dwres.php?resource=package-management">cheat sheet</a> that compares the usage.</p>
</div>
<div id="graphical-package-managers" class="section level2">
<h2>Graphical package managers</h2>
<p>Like with most complex command line tools, there are graphical front-ends available for most package management systems. The most popular one for .deb based systems is <a href="http://www.nongnu.org/synaptic/">Synaptic</a>. For .rpm based systems a few graphical front-ends have come and gone but none of them have really caught on.</p>
<p><a href="http://www.packagekit.org/">PackageKit</a> seems quite unique in that it tries to be a generic front end that can manage many different back-ends. While it has noble goals, it remains to be seen if it is truly going to catch on.</p>
</div>
<div id="distro-agnostic-packaging" class="section level2">
<h2>Distro Agnostic Packaging?</h2>
<p>There are several efforts to make distro agnostic software packaging.
Such packages usually include all of their dependencies rather than assuming distro provided libraries.
As a result distro agnostic packages are much larger and lead to lots of duplicate libraries… but they do offer a lot of convenience for software packagers.
Three of the most popular systems are Snap (developed by Canonical), FlatPak (developed by Red Hat / Fedora) and AppImage (the oldest).</p>
</div>
<div id="additional-resources" class="section level2">
<h2>Additional Resources</h2>
<ul>
<li>Distrowatch’s Package Management Cheatsheet file
<ul>
<li><a href="http://distrowatch.com/dwres.php?resource=package-management" class="uri">http://distrowatch.com/dwres.php?resource=package-management</a></li>
</ul></li>
</ul>

</div>
</div>
<div id="unit-13" class="section level1">
<h1>13 - Processes and Resource Management</h1>
<!-- __Screencast__: [13-process-and-resource-management.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/13-process-and-resource-management.webm) or [13-process-and-resource-management.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/13-process-and-resource-management.mp4) -->
<!-- __References__: -->
<!-- - LaUSAH REFERENCE - Chapter 5, Controlling Processes -->
<!-- - TLCL REFERENCE - Chapter 11, Processes -->
<!-- __Originals__: -->
<!-- - [PDF](13/Processes and Resource Management.pdf) -->
<!-- - [HTML](13/processes-and-resource-management.html) -->
<div id="what-you-may-already-know-1" class="section level2">
<h2>What you may already know</h2>
<ul>
<li>How do you manage processes on Windows and Mac?</li>
</ul>
</div>
<div id="what-is-the-init-process" class="section level2">
<h2>What is the init process?</h2>
<p>There are two types of process entities in Linux:</p>
<ol style="list-style-type: decimal">
<li>A <em>full-blown process</em> created with the fork system call, and</li>
<li><em>threads</em> which are a little lighter-weight than a full-blown process because it shares resources with its parent. Threads are created with the clone system call and the use of a threading library.</li>
</ol>
<ul>
<li>When the system boots, the kernel creates several kernel threads for housekeeping activities.</li>
<li>Then it starts the <code>init</code> process which has a process ID number of 1.
<ul>
<li>In the case of CentOS 7 and most contemporary Linux distributions, <code>systemd</code> is the <code>init</code> process.</li>
</ul></li>
<li>All processes (other than the kernel and its threads) are descendants of <code>init</code>…</li>
<li><code>init</code> is the “mother of all processes.”</li>
<li><code>init</code> also plays another role and that is of fallback parent if a child process outlives its parent. When a process exits or in terminated / killed, the kernel requires that its exit be acknowledged by the process’ parent.</li>
<li>If the parent is running properly and receives the child’s termination, all is good. If a child process outlives its parents, then the <code>init</code> process becomes the defacto parent.</li>
</ul>
</div>
<div id="what-is-a-pid" class="section level2">
<h2>What is a PID?</h2>
<ul>
<li>The kernel assigns a unique ID number to every process and most commands and system calls that manipulate processes require you to specify a PID to identify the target of the operation.</li>
<li>PIDs are issued sequentially.</li>
</ul>
</div>
<div id="what-is-process-ownership" class="section level2">
<h2>What is process ownership?</h2>
<ul>
<li>When a user runs a program it usually runs with that user’s UID and GID permissions.</li>
<li>The EUID or effective user ID is an extra UID used to determine what resources and files a process has access to at any point during execution.</li>
<li>As we have discussed before some binaries might be marked with the SUID or SGID bit. A SUID/SGID program may only need elevated permissions for a few system calls and uses the EUID as a method to raise and lower access as needed.</li>
</ul>
</div>
<div id="what-is-a-priority-and-niceness" class="section level2">
<h2>What is a priority and niceness?</h2>
<ul>
<li>The niceness of a process is a numeric hint to the kernel process scheduler about how the process should be treated with regards to CPU usage. The common range of allowable values is -20 (most favorable scheduling) to 19 (least favorable). A child process inherits the niceness value of its parent.</li>
<li>A user can not lower niceness (less nice) but only increase it (more nice) with values between 0-20.</li>
<li>The root user can alter niceness in both directions.</li>
<li>The <code>nice</code> command is used to start a program at a specified niceness.</li>
<li>The <code>renice</code> command is used to alter niceness.</li>
<li>Modern CPUs and more advanced schedulers make niceness and priority changing less necessary these days.</li>
</ul>
</div>
<div id="what-is-a-process-status-man-ps" class="section level2">
<h2>What is a process status? (man ps)</h2>
<ul>
<li>D : Uninterruptible sleep (usually IO)</li>
<li>R : Running or runnable (on run queue)</li>
<li>S : Interruptible sleep (waiting for an event to complete)</li>
<li>T : Stopped, either by a job control signal or because it is being traced.</li>
<li>W : paging (not valid since the 2.6.xx kernel)</li>
<li>X : dead (should never be seen)</li>
<li>Z : Defunct (“zombie”) process, terminated but not reaped by its parent.</li>
</ul>
</div>
<div id="what-are-signals-man-7-signal-or-kill--l-list" class="section level2">
<h2>What are signals? (man 7 signal or kill -l [list])</h2>
<p>Signals are process-level interrupt requests.
If a process is working properly and has been written to do certain things upon certain signals it can catch and respond.
One common signal is 15 / SIGTERM which is where a program is asked to quit.
Another is signal 9 / SIGKILL which is usually used when a program is not responding to 15.</p>
<blockquote>
<p>Default kill signal: SIGTERM / 15</p>
</blockquote>
<p><em>Signals described in the original POSIX.1-1990 standard.</em></p>
<table>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Signal</th>
<th align="left">Value</th>
<th align="left">Action</th>
<th align="left">Comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">SIGHUP</td>
<td align="left">1</td>
<td align="left">Term</td>
<td align="left">Hangup detected on controlling terminal or death of controlling process</td>
</tr>
<tr class="even">
<td align="left">SIGINT</td>
<td align="left">2</td>
<td align="left">Term</td>
<td align="left">Interrupt from keyboard</td>
</tr>
<tr class="odd">
<td align="left">SIGQUIT</td>
<td align="left">3</td>
<td align="left">Core</td>
<td align="left">Quit from keyboard</td>
</tr>
<tr class="even">
<td align="left">SIGILL</td>
<td align="left">4</td>
<td align="left">Core</td>
<td align="left">Illegal Instruction</td>
</tr>
<tr class="odd">
<td align="left">SIGABRT</td>
<td align="left">6</td>
<td align="left">Core</td>
<td align="left">Abort signal from abort(3)</td>
</tr>
<tr class="even">
<td align="left">SIGFPE</td>
<td align="left">8</td>
<td align="left">Core</td>
<td align="left">Floating point exception</td>
</tr>
<tr class="odd">
<td align="left">SIGKILL</td>
<td align="left">9</td>
<td align="left">Term</td>
<td align="left">Kill signal</td>
</tr>
<tr class="even">
<td align="left">SIGSEGV</td>
<td align="left">11</td>
<td align="left">Core</td>
<td align="left">Invalid memory reference</td>
</tr>
<tr class="odd">
<td align="left">SIGPIPE</td>
<td align="left">13</td>
<td align="left">Term</td>
<td align="left">Broken pipe: write to pipe with no readers</td>
</tr>
<tr class="even">
<td align="left">SIGALRM</td>
<td align="left">14</td>
<td align="left">Term</td>
<td align="left">Timer signal from alarm(2)</td>
</tr>
<tr class="odd">
<td align="left">SIGTERM</td>
<td align="left">15</td>
<td align="left">Term</td>
<td align="left">Termination signal</td>
</tr>
<tr class="even">
<td align="left">SIGUSR1</td>
<td align="left">30,10,16</td>
<td align="left">Term</td>
<td align="left">User-defined signal 1</td>
</tr>
<tr class="odd">
<td align="left">SIGUSR2</td>
<td align="left">31,12,17</td>
<td align="left">Term</td>
<td align="left">User-defined signal 2</td>
</tr>
<tr class="even">
<td align="left">SIGCHLD</td>
<td align="left">20,17,18</td>
<td align="left">Ign</td>
<td align="left">Child stopped or terminated</td>
</tr>
<tr class="odd">
<td align="left">SIGCONT</td>
<td align="left">19,18,25</td>
<td align="left">Cont</td>
<td align="left">Continue if stopped</td>
</tr>
<tr class="even">
<td align="left">SIGSTOP</td>
<td align="left">17,19,23</td>
<td align="left">Stop</td>
<td align="left">Stop process</td>
</tr>
<tr class="odd">
<td align="left">SIGTSTP</td>
<td align="left">18,20,24</td>
<td align="left">Stop</td>
<td align="left">Stop typed at tty</td>
</tr>
<tr class="even">
<td align="left">SIGTTIN</td>
<td align="left">21,21,26</td>
<td align="left">Stop</td>
<td align="left">tty input for background process</td>
</tr>
<tr class="odd">
<td align="left">SIGTTOU</td>
<td align="left">22,22,27</td>
<td align="left">Stop</td>
<td align="left">tty output for background process</td>
</tr>
</tbody>
</table>
</div>
<div id="commands-youll-want-to-learn" class="section level2">
<h2>Commands you’ll want to learn</h2>
<ul>
<li><code>ps</code> : auxwww (show all processes by all users, ‘www’ stands for wide - full command line)</li>
<li><code>pstree</code> : -nup</li>
<li><code>kill</code> : -15 is default, -9 is handy</li>
<li><code>top</code> :
<ul>
<li>keys to use in intercative:
<ul>
<li>M (sort by memory usage)</li>
<li>P(sort by process)</li>
<li>c (show/expand command line)</li>
<li>u (users)</li>
<li>1 (show number of computing devices)</li>
<li>k (kill a process) - esc to exit</li>
<li>h (help)</li>
<li>space bar to force refresh</li>
</ul></li>
<li><code>top -d 30</code> - refresh every 30 seconds</li>
</ul></li>
<li><code>/proc</code></li>
<li><code>sysstat</code> service : monitors load every 10 minutes
<ul>
<li><code>sar</code></li>
</ul></li>
<li>Developers and advanced users should check out <code>strace</code></li>
</ul>
</div>
<div id="settings-that-affect-user-resource-usage" class="section level2">
<h2>Settings that affect user resource usage</h2>
<p><code>/etc/security/limits.conf</code> (man 5 limits.conf)</p>
<p>A configuragion file to set resource limits</p>
<pre><code>  #Each line describes a limit for a user in the form:
  #
  #&lt;domain&gt; &lt;type&gt; &lt;item&gt; &lt;value&gt;
  #
  #Where:
  #&lt;domain&gt; can be:
  # - an user name
  # - a group name, with @group syntax
  # - the wildcard *, for default entry
  # - the wildcard %, can be also used with %group syntax,
  # for maxlogin limit
  #
  #&lt;type&gt; can have the two values:
  # - &quot;soft&quot; for enforcing the soft limits
  # - &quot;hard&quot; for enforcing hard limits
  #
  #&lt;item&gt; can be one of the following:
  # - core - limits the core file size (KB)
  # - data - max data size (KB)
  # - fsize - maximum filesize (KB)
  # - memlock - max locked-in-memory address space (KB)
  # - nofile - max number of open files
  # - rss - max resident set size (KB)
  # - stack - max stack size (KB)
  # - cpu - max CPU time (MIN)
  # - nproc - max number of processes
  # - as - address space limit
  # - maxlogins - max number of logins for this user
  # - maxsyslogins - max number of logins on the system
  # - priority - the priority to run user process with
  # - locks - max number of file locks the user can hold
  # - sigpending - max number of pending signals
  # - msgqueue - max memory used by POSIX message queues (bytes)
  #
  #&lt;domain&gt; &lt;type&gt; &lt;item&gt; &lt;value&gt;
  #
  @student hard nproc 75        # sets default number of process
  @student hard memlock 50000
  @student hard fsize 500000
  @student hard data 50000
  @student hard nofile 500
  @student hard locks 500
  @student hard cpu 60
  @student hard memlock 200000
  @student hard priority 2
  @student hard as 500000</code></pre>
</div>
<div id="disk-management" class="section level2">
<h2>Disk Management</h2>
<ul>
<li>Bad things happen when a partition or disk gets full. Therefore it is important that you learn how to identify disk availability problems and resolve them when needed.
<ul>
<li>Two commands that you’ll mainly use are:
<ul>
<li><code>df</code>: -h(human readable) and -i(i nodes - files in directories) are most common flags
<ul>
<li>used for mount point</li>
</ul></li>
<li><code>du</code>: -s(summary) and -h are the most common flags
<ul>
<li>anything on the filesystem</li>
</ul></li>
</ul></li>
</ul></li>
<li>The desire to control disk and inode use by users is what lead to the creation of user and group disk quota systems.</li>
</ul>
<div id="examples-3" class="section level3">
<h3>Examples</h3>
<div class="sourceCode" id="cb53"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> df <span class="at">-h</span> <span class="kw">|</span> <span class="fu">grep</span> sd</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/dev/sda1</span>        34G  4.0G   30G  12% /</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="ex">/dev/sda3</span>        33G   49M   31G   1% /backup</span></code></pre></div>
<p>Home directory usage:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> du <span class="at">-sh</span> ~</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="ex">60K</span> /home/kelly</span></code></pre></div>
<p>Show i nodes</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> df <span class="at">-i</span> <span class="kw">|</span> <span class="fu">grep</span> sd</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/dev/sda1</span>      17825792 97220 17728572    1% /</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="ex">/dev/sda3</span>       2162688    11  2162677    1% /backup</span></code></pre></div>
</div>
</div>
<div id="cgroups-and-systemd" class="section level2">
<h2>cgroups and systemd</h2>
<p>Several years ago the Linux kernel added something called cgroups (control groups) but they were difficult to understand and use so they have not been widely used.</p>
<p>The traditional process flow is such that every process on the system is fairly equal… so if there are 100 processes they all get an equal slice of the resource pie. With cgroups that model changes and a cgroup becomes an additional unit the scheduler understands. This allows related processes to be grouped/scheduled together making it harder for any process and its children to bog the system down. It also has the added benefit that a cgroup is more easily and reliably killed than a bunch of individual processes.</p>
<p>Luckily systemd uses control groups by default and has its own interfaces to cgroup management… and as a result, cgroups are not only widely used, but used by default on systemd-based Linux distributions.</p>
<p>Here is a 3.5 minute video that shows systemd’s cgroup features:</p>
<p>or <a href="https://www.youtube.com/watch?v=-25oWssr9WI" class="uri">https://www.youtube.com/watch?v=-25oWssr9WI</a> (included at end of lecture screencast video)</p>
<p>And here is an optional video for anyone wanting to learn more about cgroup management with systemd from the recent linux.conf.au 2017: Managing performance parameters through systemd (<a href="https://www.youtube.com/watch?v=6wrmKDb3kAo">YouTube</a>)</p>

</div>
</div>
<div id="unit-14" class="section level1">
<h1>14 - Init System &amp; Services</h1>
<!-- __Screencast__: [14-systemd.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/14-systemd.webm) or [14-systemd.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/14-systemd.mp4) -->
<!-- __Originals__: [PDF](14/Init System & Services.pdf) - [HTML](14/init-system-and-services.html) -->
<div id="in-the-beginning-1" class="section level2">
<h2>In the Beginning</h2>
<ul>
<li>SysVinit came from AT&amp;T’s UNIX and was basically a series of directories and shell scripts that used naming conventions. Distros user different management applications for enabling, disabling, starting and stopping services.</li>
<li>Services were controlled with fairly lengthy shell scripts that would often vary greatly between Linux distributions.</li>
<li>Services were bundled into “runlevels” which varied in function between Linux distributions.</li>
<li>While SysVinit worked fairly well for a few decades it was really lacking in features. Managing services was vary sloppy. Isolation and resource management barely existed.</li>
<li>The Linux kernel has a lot of cool, useful features that were being completely ignored for compatibility reasons.</li>
<li>Some became enamored with the simplicity of the design above all else and didn’t want things to change.</li>
</ul>
</div>
<div id="alternative-init-systems" class="section level2">
<h2>Alternative init systems</h2>
<p>There are other multiple init systems used by the various Linux distributions. Some distributions, particularly those styled after BSD, may use a single config file that has to be updated whenever services are added/removed.</p>
<p>A former Canonical (the company that sponsors the Ubuntu Linux distribution) employee named <strong>Scott James Remnant</strong> created <strong>upstart</strong>. Ubuntu historically had a SysV-based init system but switched to upstart several releases ago.</p>
<p>Fedora historically used a SysV-based init system. After upstart came out, they switched to it… although at the time upstart was not very complete and was primarily configured in SysV-compatibility mode.</p>
<p>5+ years ago, Red Hat employee and Fedora developer <strong>Lennart Poettering</strong> did a survey of the various init systems available for various flavors of Unix/Linux.
He compared features and performance and then created a new init system named systemd.
systemd is designed to be a modern init system specifically for Linux… and as such it takes advantage of some Linux-only features… which makes it less portable.
Some advanced things that systemd does is parallel execution, socket and dbus service activation, automatic cgroup resource management / scheduling, and multi-seat support.
It has a system boot profiler with graphing and by disabling unneeded (and / or slow) services, you can greatly speed up your boot times.
systemd has had “feature creep” set in and it has expanded beyond traditional init features.
Another one of its goals is to do common system configuration (hostname, file system mounting, etc) and do it in a distribution agnostic way.
systemd also has man security enhancement features.</p>
<p>Many distributions have switched to systemd including all of the top, mainstream distributions like RHEL, Fedora, Debian, Ubuntu, Mint, Arch, etc.
gentoo defaults to a different init system named OpenRC.
A group of disgruntled-over-systemd users forked Debian and created <a href="https://devuan.org/">Devuan</a>.</p>
</div>
<div id="systemd" class="section level2">
<h2>systemd</h2>
<p>systemd decided to abandon compatibility and actually started taking advantage of serveral advanved, Linux-only, kernel features.</p>
<p>It would redefine service dependencies and be able to start services in parallel.</p>
<p>As systemd matured, it took over more if not all of the execution paths and became a full service manager incorporating Linux-only isolation and resource management features.</p>
<ul>
<li><strong>cgroups</strong> - As I talked about near the end of the Process and Resource Management lecture, <em>systemd is an enabler for cgroups</em> and starts everything in a cgroup. As a result the resource usage of CPU, RAM, and DISK are dynamically tunable (network coming in the future).
<ul>
<li>cgroups makes it easier and faster to reliably stop services.</li>
<li>basically allows you to create resource heirarchys and then allows you to assign to them</li>
<li>Two useful commands
<ul>
<li><code>systemd-cgls</code> control group list</li>
<li><code>systemd-cgtop</code> like top, but sorts by control group</li>
</ul></li>
</ul></li>
<li><strong>journald</strong> - systemd decided to take on the logging facilities and as a result of the logging system being integrated into the init system and being able to have better access to the kernel, it can log all kernel messages including full startup and shutdown… a feat that was previously impossible. It also uses a signle binary log file with database like functionality. You can still run a traditional syslog program in parallel if desired to get the old-school, standard single log file per service text logs. more abut logging in a separate lecture.</li>
<li><strong>unit and target files</strong>: The traditional / original Unix / Linux init system SysVinit used shell scripts to control all services and there are many drawbacks. systemd abandoned shell scripts and has much smaller, declarative configuration files named unit files. SysVinit init had runlevels. systemd abandoned runlevels and uses target files instead. Available targets are emergency, rescue, multi-user (text-console only) and graphical (like multi-user but with a graphical login added).
<ul>
<li>There are several types of “unit files”:
<ul>
<li>.target (runlevels)</li>
<li>.service (services)</li>
<li>.socket (on-demand services)</li>
<li>.timer (scheduled tasks)</li>
<li>Also - .device, .mount, .automount, .swap, .path, .snapchot, .slice, and .scope</li>
</ul></li>
</ul></li>
<li><strong>core os concept</strong> - systemd decided to go beyond the strict boundaries of the traditional init system to incorporate more features that made sense for a system trying to make services and resources manageable. The expansion of features has been dubbed, “Core OS” (not to be confused with the CoreOS Linux distribution) in that it tries to make common tasks the same across all distributions that use systemd. There used to be several different programs used by distros for such things as logging in, managing user sessions, watchdog, cron, logging, setting the hostname etc. This the most contentious aspect of systemd as some users think it has gone to far.
<ul>
<li>systemd also works hand-in-hand with dbus for inter-process communications and event-driven activation.</li>
</ul></li>
</ul>
</div>
<div id="systemd-programs-commands" class="section level2">
<h2>systemd programs / commands</h2>
<p>The main control program for <code>systemd</code> is <code>systemctl</code>.</p>
<ul>
<li><code>systemctl --full --all</code> (lists everything)</li>
<li><code>systemctl enable {servicename}</code>: –now (startup service in addition to enabling it)</li>
<li><code>systemctl disable {servicename}</code>: –now</li>
<li><code>systemctl status {servicename}</code></li>
<li><code>systemctl start {servicename}</code></li>
<li><code>systemctl stop {servicename}</code></li>
<li><code>systemctl restart {servicename}</code></li>
<li><code>systemctl mask {servicename}</code> (sysmlinks to /dev/null)
<ul>
<li>Suppose you have a service that is a dependency for something else, but you do not really want to run that service. If you want to ensure that the service is never enabled/started, possibly symlink to dev/null.</li>
</ul></li>
<li><code>systemctl get-default</code> (shows default target)
<ul>
<li>the default runlevel is ‘multi-user.target’</li>
<li>‘graphical.target’ is used for systems running a graphical user interface</li>
</ul></li>
<li><code>systemctl set-default {targetname}</code> (changes the default target)</li>
<li><code>sysmtectl isolate {targetname}</code> (change target)</li>
<li><code>sytemctl edit</code> (add drop-in files for service customization)</li>
</ul>
<blockquote>
<p>Every time we install as service, we will check the status of the service. Wherein then we can enable it if it is not enabled.</p>
</blockquote>
<div id="isolation-resource-management" class="section level3">
<h3>Isolation &amp; Resource Management</h3>
<ul>
<li>systemd has many advanced features that can be enabled for services. Many of them are related to security and isolation, other to resource control.</li>
<li>Most distros do not automatically use these features but sysadmins can be creating service “drop-in” files. Finally there is a way to customize a service without editing it’s global config that might be replaced with a package upgrade.
<ul>
<li><code>systemctl edit {servicename}</code></li>
</ul></li>
</ul>
</div>
<div id="examples-4" class="section level3">
<h3>Examples</h3>
<div id="sshd" class="section level4">
<h4>sshd</h4>
<div class="sourceCode" id="cb56"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> systemctl status sshd</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="ex">sshd.service</span> <span class="at">-</span> OpenSSH server daemon</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Loaded:</span> loaded <span class="er">(</span><span class="ex">/usr/lib/systemd/system/sshd.service</span><span class="kw">;</span> <span class="ex">enabled</span><span class="kw">;</span> <span class="ex">vendor</span> preset: enabled<span class="kw">)</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Active:</span> active <span class="er">(</span><span class="ex">running</span><span class="kw">)</span> <span class="ex">since</span> Sun 2021-02-28 15:43:59 MST<span class="kw">;</span> <span class="ex">19h</span> ago</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>     <span class="ex">Docs:</span> man:sshd<span class="er">(</span><span class="ex">8</span><span class="kw">)</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>           <span class="ex">man:sshd_config</span><span class="er">(</span><span class="ex">5</span><span class="kw">)</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a> <span class="ex">Main</span> PID: 808 <span class="er">(</span><span class="ex">sshd</span><span class="kw">)</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Tasks:</span> 1 <span class="er">(</span><span class="ex">limit:</span> 18905<span class="kw">)</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Memory:</span> 7.7M</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>   <span class="ex">CGroup:</span> /system.slice/sshd.service</span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>           <span class="ex">└─808</span> /usr/sbin/sshd <span class="at">-D</span></span></code></pre></div>

</div>
</div>
</div>
</div>
<div id="unit-15" class="section level1">
<h1>15 - Backups</h1>
<!-- __Screencast__: [15-backups.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/15-backups.webm) or [15-backups.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/15-backups.mp4) -->
<!-- __TLCL REFERENCE__ - Chapter 18, Archiving and Backups -->
<p><strong>Originals</strong>: <a href="15/Backups.pdf">PDF</a> - <a href="15/backups.html">HTML</a></p>
<p>While there are a number of “backup” applications, both FOSS and commercial/proprietary, the vast majority of them add a bit of overhead to the process as well as have their own obfuscated data storage methods. As a result, a number of simple yet effective file system tools have been developed.</p>
<p>Hard drive sizes have greatly increased over the last few years but backup tapes have not had the same storage capacity jumps. As a result, I prefer to backup to hard disk rather than tape. Most advanced tape backup systems now recommend having an intermediate storage system usually based on hard disks so you can backup more quickly (freeing the backup source sooner) and then spool to tape at a usually slower rate.</p>
<p><strong>Some FOSS file-based backup applications include</strong>:</p>
<ul>
<li>BackupPC - <a href="http://backuppc.sourceforge.net/" class="uri">http://backuppc.sourceforge.net/</a></li>
<li>Backula - <a href="http://www.bacula.org/" class="uri">http://www.bacula.org/</a></li>
<li>Zmanda - <a href="http://www.zmanda.com/" class="uri">http://www.zmanda.com/</a> (commercially supported <a href="http://amanda.zmanda.com/">Amanda</a>)</li>
</ul>
<div id="tar---the-gnu-version-of-the-tar-archiving-utility" class="section level2">
<h2>tar - The GNU version of the tar archiving utility</h2>
<blockquote>
<p>‘tar’ stands for ‘tape archive’</p>
</blockquote>
<ul>
<li><code>tar -cvzf /desired/destination/path/and/filename.tar.gz /path/to/backup ...</code>
<ul>
<li>this one is using <code>z</code> for gzip compression</li>
<li>ends in <code>.gz</code></li>
</ul></li>
<li><code>tar -cvJf /desired/destination/path/and/filename.tar.xz /path/to/backup ...</code>
<ul>
<li>this one is using <code>J</code> for xz compression
<ul>
<li>more computational effort to compress, but will save space</li>
<li>ends in <code>.xz</code></li>
</ul></li>
</ul></li>
<li><code>tar -I zstd -cvf /path/filename.tar.zst /pack/to/backup</code>
<ul>
<li>check to make sure that you have <code>zstd</code> installed (most distros do)</li>
<li>good compression and good on compression</li>
</ul></li>
</ul>
<p><strong>Flags</strong>:</p>
<ul>
<li><code>c</code> - create</li>
<li><code>v</code> - verbose</li>
<li><code>J</code> - xz compression</li>
<li><code>z</code> - gzip compression</li>
<li><code>f</code> - file</li>
</ul>
</div>
<div id="scp---secure-copy-remote-file-copy-program-overwrites-destination-files" class="section level2">
<h2>scp - Secure copy (remote file copy program), overwrites destination files</h2>
<div class="sourceCode" id="cb57"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> scp file1 file2 dir1/ dir2/ user@remotehost:/full/path/to/backup/directory/</span></code></pre></div>
<p><strong>Common flags</strong>:</p>
<ul>
<li><code>-l</code> - limit rate specified in Kbits/s</li>
<li><code>-P</code> - port</li>
<li><code>-p</code> - preserves modification times, access times, and modes from the original file</li>
<li><code>-r</code> - recursively copy</li>
</ul>
</div>
<div id="rsync---a-fast-versatile-remote-and-local-file-copying-tool" class="section level2">
<h2>rsync - A fast, versatile, remote (and local) file-copying tool</h2>
<p>rsync is a file-based mirroring program that can use the local filesystem or a remote filesystem for the destination. If a remote system is selected then the transmission takes places over encrypted ssh. rsync is very efficient and uses an algorithm created by Andrew Tridgell who is best known for his work on samba. The algorithm does not come into play on the first transfer but does upon subsequent transfers… where it will try to only transfer changed files and then only the changed pieces.</p>
<p>The most commonly used flags are:</p>
<ul>
<li><code>-a</code> - archive mode; equals -rlptgoD (no -H,-A,-X)</li>
<li><code>-v</code> - verbose</li>
<li><code>-S</code>, –sparse - handle sparse files efficiently</li>
<li><code>--delete</code> - delete extraneous files from dest dirs</li>
<li><code>--exclude=PATTERN</code> - exclude files matching PATTERN</li>
<li><code>--bwlimit=KBPS</code> - limit I/O bandwidth; KBytes per second</li>
</ul>
<div id="example" class="section level3">
<h3>Example</h3>
<div class="sourceCode" id="cb58"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rsync <span class="at">-avS</span> <span class="at">--progress</span> <span class="at">--delete</span> <span class="at">--exclude</span><span class="op">=</span>/dev <span class="at">--exclude</span><span class="op">=</span>/proc <span class="at">--exclude</span><span class="op">=</span>/mnt <span class="at">--exclude</span><span class="op">=</span>/sys <span class="at">--exclude</span><span class="op">=</span>/media <span class="at">--exclude</span><span class="op">=</span>/tmp root@sourcehost:/ /backups/hostname/</span></code></pre></div>
</div>
</div>
<div id="borgbackup---chunk-based-backup-program." class="section level2">
<h2>borgbackup - Chunk-based backup program.</h2>
<p>Packaged by most Linux distros and written in Python. Also available for macOS. Maybe Windows someday?</p>
<div id="features" class="section level3">
<h3>Features</h3>
<ul>
<li>Block based with encryption, compression, and de-duplication – all done on the client side – you can store your backups on systems you don’t trust if encrypted.</li>
<li>Push from client to backup host</li>
<li>Provides FUSE-based mount-from-backup option</li>
</ul>
</div>
<div id="examples-5" class="section level3">
<h3>Examples</h3>
<p>Create/initialize repository:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> borg <span class="at">--verbose</span> init <span class="at">--encryption</span><span class="op">=</span>repokey user@backuphost:/path/to/repository/reponame</span></code></pre></div>
<p>Create a backup/archive:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="ex">borg</span> <span class="at">--progress</span> <span class="at">--verbose</span> create <span class="at">-C</span> zstd,5 <span class="at">-e</span> /dev <span class="at">-e</span> /run <span class="at">-e</span> /tmp <span class="at">-e</span> /sys <span class="at">-e</span> /proc <span class="at">-e</span> /mnt <span class="at">-e</span> /media <span class="at">-e</span> /var/log <span class="at">-e</span> /var/cache <span class="at">-s</span> user@backuphost:/path/to/repository/reponame::<span class="va">$(</span><span class="fu">date</span> +%Y%m%d<span class="va">)</span> /</span></code></pre></div>
</div>
<div id="usage" class="section level3">
<h3>Usage</h3>
<div class="sourceCode" id="cb61"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Setup ssh-key-based auth for backup user and...</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">BORG_PASSPHRASE=</span><span class="st">&quot;supersecretpassword&quot;</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">BORG_REPO=</span><span class="st">&quot;user@backuphost:/path/reponame&quot;</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="ex">/bin/borg</span> create <span class="at">-C</span> zstd,5 <span class="at">-s</span> ::<span class="va">$(</span><span class="fu">date</span> +%Y%m%d<span class="va">)</span> /etc /root /home</span></code></pre></div>
</div>
</div>
<div id="imaging-software---bit-by-bit-copy-rather-than-file-based" class="section level2">
<h2>Imaging Software - bit-by-bit copy rather than file-based</h2>
<ul>
<li>Bit-by-bit copy rether than a file-based</li>
<li>Disk image-based backup utilities are really good for cloning systems.
<ul>
<li>The main disadvantage of using disk imaging software is that they usually can only backup a partition/disk if it is not in use.</li>
</ul></li>
<li>Often disk image-backup software is run by booting from an alternative partition or live media.</li>
</ul>
<p><strong>Some FOSS imaging applications include</strong>:</p>
<ul>
<li><strong>clonezilla</strong> (partclone) - <a href="http://clonezilla.org/" class="uri">http://clonezilla.org/</a></li>
<li><strong>dd</strong> and <strong>ddrescue</strong></li>
</ul>
<p><strong>Some “missing features” in the free programs</strong>:</p>
<ol style="list-style-type: decimal">
<li>Can’t mount the image file(s) and alter them, and</li>
<li>Can’t clone a larger to smaller (without manual manipulation)</li>
</ol>
<p>There are a number of commercial/closed source products and they include Ghost, Acronis True Image, etc.</p>
<p>See: <a href="http://en.wikipedia.org/wiki/Disk_cloning" class="uri">http://en.wikipedia.org/wiki/Disk_cloning</a></p>

</div>
</div>
<div id="unit-16" class="section level1">
<h1>16 - Network Configuration</h1>
<!-- __Screencast__: [16-networking.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/16-networking.webm) or [16-networking.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/16-networking.mp4) -->
<!-- - LaUSAH REFERENCE - Chapter 14, TCP/IP Networking -->
<!-- - RHEL8 Configuring and Managing Networking Guide (PDF) -->
<p><strong>Originals</strong>: <a href="16/Network%20Configuration.pdf">PDF</a> - <a href="16/Thursday%20-%2018FEB%20-%20Network%20Configuration.html">HTML</a></p>
<blockquote>
<p>Please <strong>DO NOT</strong> edit nor attempt to alter the network configuration of your student KVM VM.</p>
</blockquote>
<div id="what-network-card-do-i-have" class="section level2">
<h2>What network card do I have?</h2>
<p>lspci is provided by the pciutils package</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> lspci <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-i</span> net <span class="co"># will work in KVM VM [or physical machine]</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="ex">00:03.0</span> Ethernet controller: Red Hat, Inc Virtio network device</span></code></pre></div>
</div>
<div id="network-basics" class="section level2">
<h2>Network basics</h2>
<p>To configure the network on a computer you usually need to know a few pieces of information:</p>
<ul>
<li>IP address</li>
<li>Default gateway</li>
<li>Network mask</li>
<li>DNS</li>
</ul>
<p>If your network uses DHCP (Dynamic Host Configuration Protocol) you can use a dhcp client application and have your computer get all of the needed network settings from the DHCP server.</p>
</div>
<div id="tools-to-configure-the-network" class="section level2">
<h2>Tools to configure the network</h2>
<ul>
<li>nmcli - <a href="https://www.youtube.com/watch?v=6xfSUdxeasA" class="uri">https://www.youtube.com/watch?v=6xfSUdxeasA</a></li>
<li>nmtui - <a href="https://www.youtube.com/watch?v=E7gWVZrZbUY" class="uri">https://www.youtube.com/watch?v=E7gWVZrZbUY</a></li>
<li>nm gui - <a href="https://www.youtube.com/watch?v=QJd3AJW05Aw" class="uri">https://www.youtube.com/watch?v=QJd3AJW05Aw</a> (applets for KDE and GNOME)</li>
</ul>
<p><strong>Lower Level Tools</strong>: ip, ifconfig</p>
</div>
<div id="how-to-set-the-system-hostname" class="section level2">
<h2>How to set the system hostname</h2>
<div class="sourceCode" id="cb63"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> hostnamectl set-hostname {host.domain.tld}</span></code></pre></div>
<div class="sourceCode" id="cb64"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> hostnamectl set-hostname kvm-dowdle.localdomain</span></code></pre></div>
<blockquote>
<p>What package provides it? - new-tools</p>
</blockquote>
</div>
<div id="example-configurations" class="section level2">
<h2>Example configurations</h2>
<pre><code>[root@csci351 ~]# cat /etc/sysconfig/network-scripts/ifcfg-ens18
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=none
DEFROUTE=yes
IPV4_FAILURE_FATAL=yes
IPV6INIT=yes
IPV6_AUTOCONF=no
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens18
UUID=a28f5b2c-99b4-454c-b3f4-0e3efb89baeb
DEVICE=ens18
ONBOOT=yes
IPADDR=153.90.127.176
PREFIX=24
GATEWAY=153.90.127.254
DNS1=153.90.2.1
DNS2=153.90.2.15
DOMAIN=&quot;cs.montana.edu msu.montana.edu coe.montana.edu&quot;
IPV6_PRIVACY=no</code></pre>
<ul>
<li>Please note that <code>/etc/hosts</code> is a special file in that it can be used as a sort of “local DNS.”</li>
<li><code>/etc/hosts</code> is usually consulted before the specified nameservers and <code>/etc/hosts</code> can be used to override DNS lookups if desired.</li>
</ul>
<p><code>/etc/hosts</code> sample contents:</p>
<pre><code>[dowdle@csci351 ~]$ cat /etc/hosts
(examine the output... short excerpt below)
192.168.122.101         kvm-101.localdomain     kvm-101         kvm-alghamdi
192.168.122.102         kvm-102.localdomain     kvm-102         kvm-alvarez
192.168.122.103         kvm-103.localdomain     kvm-103         kvm-arstein
   [...]
92.168.122.157          kvm-157.localdomain     kvm-157         kvm-wilkerson
192.168.122.158         kvm-158.localdomain     kvm-158         kvm-wintersteen
192.168.122.159         kvm-159.localdomain     kvm-159         kvm-zetterberg</code></pre>
<p><em>DNS configuration</em> is stored in <code>/etc/resolv.conf</code>. Where we define in a system who we talk to in DNS.</p>
<p>Here is an example <code>/etc/resolv.conf</code>:</p>
<pre><code>[sdowdle@csci351 ~]$ cat /etc/resolv.conf
# Generated by NetworkManager
search cs.montana.edu msu.montana.edu coe.montana.edu
nameserver 153.90.2.1
nameserver 153.90.2.15</code></pre>
<p>How does DNS work anyway?
<img src="16/16-networking-how-dns-works.png" alt="How DNS Works illustration" /></p>
</div>
<div id="dns-related-commands" class="section level2">
<h2>DNS Related Commands</h2>
<p>The <code>/usr/bin/host</code> command is part of the <strong>bind-utils</strong> package. Example:</p>
<pre><code>host www.cs.montana.edu
host 153.90.127.197</code></pre>
<p>The <code>/usr/bin/dig</code> command is part of the <strong>bind-utils</strong> package. Example:</p>
<pre><code>dig MX cs.montana.edu # (shows Mail eXchange record)
dig NS cs.montana.edu # (shows NameServer record)</code></pre>
<p>The <code>/usr/bin/nslookup</code> command is part of the <strong>bind-utils</strong> package. Example:</p>
<pre><code>nslookup www.cs.montana.edu</code></pre>
<p><code>nslookup</code> interactively:</p>
<pre><code>$ nslookup
&gt; server 8.8.8.8
Default server: 8.8.8.8
Address: 8.8.8.8#53
&gt; www.montanalinux.org
Server: 8.8.8.8
Address: 8.8.8.8#53

Non-authoritative answer:
Name: www.montanalinux.org
Address: 69.60.124.50
&gt; exit</code></pre>
<p>The <code>/usr/bin/whois</code> command is part of the <strong>whois</strong> package.
Unfortunately, much of the info is no longer shown these days and the usefulness of the command has diminished.</p>
<p>Example:</p>
<pre><code>[dowdle@csci351 ~]$ whois montanalinux.org
 whois montanalinux.org
[Querying whois.pir.org]
[whois.pir.org]
Domain Name: MONTANALINUX.ORG
Domain ID: D33213288-LROR
WHOIS Server:
Referral URL: http://www.networksolutions.com
Updated Date: 2012-08-03T21:30:52Z
Creation Date: 2000-08-18T21:48:24Z
Registry Expiry Date: 2017-08-18T21:48:24Z
Sponsoring Registrar: Network Solutions, LLC
Sponsoring Registrar IANA ID: 2
Domain Status: clientTransferProhibited https://www.icann.org/epp#clientTransferProhibited
Registrant ID: 5991102-NSI
Registrant Name: SCOTT DOWDLE
Registrant Organization:
Registrant Street: 704 Church Street
Registrant City: Belgrade
Registrant State/Province: MT
Registrant Postal Code: 59714
Registrant Country: US
Registrant Phone: +1.4063880827
Registrant Phone Ext:
Registrant Fax:
Registrant Fax Ext:
Registrant Email: dowdle@montanalinux.org
Admin ID: 5991102-NSI
Admin Name: SCOTT DOWDLE
Admin Organization:
Admin Street: 704 Church Street
Admin City: Belgrade
Admin State/Province: MT
Admin Postal Code: 59714
Admin Country: US
Admin Phone: +1.4063880827
Admin Phone Ext:
Admin Fax:
Admin Fax Ext:
Admin Email: dowdle@montanalinux.org
Tech ID: 5991102-NSI
Tech Name: SCOTT DOWDLE
Tech Organization:
Tech Street: 704 Church Street
Tech City: Belgrade
Tech State/Province: MT
Tech Postal Code: 59714
Tech Country: US
Tech Phone: +1.4063880827
Tech Phone Ext:
Tech Fax:
Tech Fax Ext:
Tech Email: dowdle@montanalinux.org
Name Server: NS33.WORLDNIC.COM
Name Server: NS34.WORLDNIC.COM
DNSSEC: unsigned
&gt;&gt;&gt; Last update of WHOIS database: 2016-02-23T17:08:12Z &lt;&lt;&lt;</code></pre>

</div>
</div>
<div id="unit-17" class="section level1">
<h1>17 - Desktop Linux</h1>
<!-- __Screencast__: [17-desktop.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/17-desktop.webm) or [17-desktop.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/17-desktop.mp4) -->
<div id="in-the-beginning-was-x" class="section level2">
<h2>In the Beginning was X</h2>
<p>As mentioned in part 3 of Triumph of the Nerds, Xerox (via the researchers at the Palo Alto Research Center) is noted as the original creator of what is known as the modern Graphical User Interface. They created a bitmap based display, the mouse with an on-screen pointer, and networked computers with ethernet which were publicly demoed as early as 1969. Steve Jobs and Apple borrowed all of PARC’s ideas, added to and expanded them, and released the Apple Macintosh with MacOS in early 1984. For more info, see Steven Levy’s book, Insanely Great.</p>
<p>The X Window System was created in 1984 at Massachusetts Institute of Technology. The current version is called X11 and was released in 1987.</p>
<p>From the <a href="http://en.wikipedia.org/wiki/X11">wikipedia article on the X Window System</a>:</p>
<blockquote>
<p>In 1987, with the success of X11 becoming apparent, MIT wished to relinquish the stewardship of X, but at a June 1987 meeting with nine vendors, the vendors told MIT that they believed in the need for a neutral party to keep X from fragmenting in the marketplace. In January 1988, the MIT X Consortium formed as a non-profit vendor group.</p>
</blockquote>
<p>Since that time the X Consortium disbanded and control changed hands to The Open Group. In May 1999, the Open Group formed X.Org.</p>
<p>The most popular release for the IBM PC was done by XFree86 and it was adopted for many years by most Linux distributions. After a while many Linux distributors became frustrated with the closed nature of the XFree86 development model and thought that the pace of development was too slow. The XFree86 project made a slight change to their license and required that the XFree86 logo be displayed on any packaging it was included with.</p>
<p>In April of 2004 X.Org was created as a fork of the XFree86 project and it quickly became the dominant release used by Linux distributions.</p>
<p>X11 is more about providing a basic display system that can accommodate input devices and creating a foundation for writing GUI applications that will work both locally and over a network rather than defining specific graphical applications and developer toolkits. As a result the various window managers, desktop managers, and desktop environments have been written using a variety of programming languages and GUI toolkit libraries.</p>
</div>
<div id="window-managers" class="section level2">
<h2>Window Managers</h2>
<p><a href="http://en.wikipedia.org/wiki/Twm">twm</a> - One of the first window manager apps that became popular. It became part of X11 with X11R4 and these days it is so basic that it is considered by some as the window manager of last resort.</p>
<p><a href="http://en.wikipedia.org/wiki/Fvwm">fvwm</a> - Robert Nation created the F Virtual Window Manager in 1993 and it was one of the first that featured virtual desktops. Then came fvwm95 that had a default theme visually similar to Microsoft Windows 95.</p>
<p><a href="http://en.wikipedia.org/wiki/WindowMaker">Window Maker</a> - In 1997 Window Maker was released as a clone of the NeXTstep GUI. NeXTstep is what was used as a basis for Mac OS X’s GUI environment.</p>
<p><a href="http://en.wikipedia.org/wiki/Blackbox">blackbox</a> - A very light-weight desktop manager written in C++.</p>
<p><a href="http://en.wikipedia.org/wiki/Openbox">openbox</a> - Originally a fork of blackbox but now completely rewritten in C. openbox is also a very light-weight desktop manager.</p>
<p>See also: <a href="http://en.wikipedia.org/wiki/Comparison_of_window_managers" class="uri">http://en.wikipedia.org/wiki/Comparison_of_window_managers</a></p>
</div>
<div id="desktop-environments" class="section level2">
<h2>Desktop Environments</h2>
<p><a href="http://en.wikipedia.org/wiki/Common_Desktop_Environment">CDE</a> - The Common Desktop Environment was created by a number of commercial Unix vendors in 1993 and became the de facto GUI environment for a number of Unix flavors. The problem was that it was commercial and was based on the commercial GUI toolkit named <a href="http://en.wikipedia.org/wiki/Motif_%28widget_toolkit%29">motif</a>. Sun Microsystems was a holdout and created their own named <a href="http://en.wikipedia.org/wiki/OpenLook">OpenLook</a> based on a completely different GUI toolkit.</p>
<p><a href="http://en.wikipedia.org/wiki/KDE">KDE</a> - The K Desktop Environment was started in 1996 by Matthias Ettrich. He surveyed all of the freely available GUI toolkits and settled on <a href="http://en.wikipedia.org/wiki/Qt_%28toolkit%29">QT</a> from a company in Norway named Trolltech. QT is a C++ multi-platform toolkit that originally cost money if you wanted to make commercial applications with it. After the GNOME Project was started Trolltech created the QT Foundation and dual-licensed QT including a free software friendly license. Trolltech was eventually consumed by Nokia and QT has since been re-licensed under three different licenses… pick the one you want. KDE released version 4.0 in January of 2008.</p>
<p><a href="http://en.wikipedia.org/wiki/GNOME">GNOME</a> - The GNU Network Object Model Environment desktop environment was originally started by a group of programmers (primarily financially sponsored by Red Hat) who were not happy with the original QT licensing. They also wanted to use C rather than C++. GNOME is based on the GIMP toolkit (<a href="http://en.wikipedia.org/wiki/Gtk">GTK</a>). GNOME decided to change things with GNOME 3 Shell.</p>
<p>GNOME 3 Shell was release on April 6, 2011. Fedora was one of the first distributions to ship it. GNOME 3 requires hardware support / accellerated video although it does have a fallback mode which does not. GNOME 3 has a searched-based interface and does away with some of the features (thought of as clutter by its developers) from the GNOME 2 series. Further development of GNOME 2 has stopped and GNOME 3 is the future of GNOME.</p>
<p><a href="http://en.wikipedia.org/wiki/MATE_%28desktop_environment%29">MATE</a> - MATE is a desktop environment forked from the now-unmaintained code base of GNOME 2. The name derives from yerba mate, a species of holly native to subtropical South America used to prepare a beverage called mate. The renaming is necessary to avoid conflicts with Gnome 3 components.</p>
<p><a href="http://en.wikipedia.org/wiki/Cinnamon_%28user_interface%29">Cinnamon</a> - Cinnamon is a fairly new project from the Linux Mint developers that uses the GNOME 3 libraries to create a desktop that is stylisticly a combination of GNOME 2 and GNOME 3.</p>
<p><a href="http://en.wikipedia.org/wiki/Xfce">XFCE</a> - Olivier Fourdan decided to create a free clone of CDE in 1996 based on the non-free XForms GUI toolkit. Since the toolkit wasn’t free enough neither Red Hat nor Debian liked it. Olivier eventually rewrote XFCE in GTK. It is considered a lighter-weight alternative to KDE and GNOME.</p>
<p><a href="http://en.wikipedia.org/wiki/Lxde">LXDE</a> - The project was started in 2006 by Taiwanese programmer Hong Jen Yee, also known as PCMan, when he published PCManFM, a new file manager and the first module of LXDE. LXDE has ceased development as the developers have decided to abandon the GTK widget library and switch to QT… and have decided to join forces with the RazorQT project… and now have created <a href="http://lxqt.org/">LXQT</a>.</p>
</div>
<div id="network-transparency" class="section level2">
<h2>Network Transparency</h2>
<p>As previously mentioned, X11 was designed with network transparency in mind and as a result, there are a number of ways to run X11 apps or complete desktop environments remotely.</p>
<p>The easiest way to run an X11 app is to use the X11 tunnelling provided by ssh (ssh -X). Alternatively you can use the xhost utility and properly set the DISPLAY environment variable.</p>
<p>For running complete desktop environments one may use programs like <a href="http://en.wikipedia.org/wiki/Vnc">VNC</a> and <a href="http://en.wikipedia.org/wiki/Freenx">NX</a>. Many X display managers also speak the X Display Manager Control protocol (<a href="http://en.wikipedia.org/wiki/XDMCP#X_Display_Manager_Control_Protocol">XDMCP</a>) although it is not usually turned on by default. There is even an RDP server for Linux named <a href="http://www.xrdp.org/">xrdp</a>. A very nice fork of NX2 exists named <a href="http://www.x2go.org/">X2Go</a>.</p>
<p>Complete desktops can also be run over ssh with <a href="http://en.wikipedia.org/wiki/Xnest">Xnest</a> and <a href="http://en.wikipedia.org/wiki/Xephyr">Xephyr</a>.</p>
<p>No matter what method you use for remote access, it should work fine over a LAN but perhaps not as well over a WAN or broadband connection due to latency.</p>
<p>Red Hat released the <a href="http://en.wikipedia.org/wiki/SPICE_%28protocol%29">SPICE</a> remote KVM-VM (virtual machine) display protocol under the GPL v2 in January 2010 and it is hoped it gets adapted to a general purpose remote display protocol.</p>
</div>
<div id="the-future" class="section level2">
<h2>The Future?</h2>
<p>One complaint about X11 is that there are too many layers and that creating efficient software (especially games) is hard. <a href="http://en.wikipedia.org/wiki/Wayland_%28display_server_protocol%29">Wayland</a> is a fairly new project with a goal providing an efficient alternative to X11. It is still early in development and it remains to be seen how well it will do. Canonical initially seemed to be responsive to Wayland but decided to create their own display system (<a href="https://en.wikipedia.org/wiki/Mir_%28software%29">Mir</a>) to better serve their needs with regards to one interface for every device. Mir, which recently announced the release of version 1.0, seems to be built on top of Wayland.</p>

</div>
</div>
<div id="unit-18" class="section level1">
<h1>18 - Firewalls with firewalld</h1>
<!-- __Screencast__: 18-firewalls.webm or 18-firewalls.mp4 -->
<!-- __REFERENCES__ -->
<!-- - LaUSAH - Section 27.8 Firewalls -->
<!-- - RHEL7 Security Guide, Chapter 5, Using Firewalls -->
<p><strong>Originals</strong>: <a href="18/Firewalls%20with%20firewalld.pdf">PDF</a> - <a href="18/firewalls-and-firewalld.html">HTML</a></p>
<div id="services-and-ports" class="section level2">
<h2>Services and Ports</h2>
<ul>
<li>Looking at the <code>/etc/services</code> file you will see a long list of the most well known services.</li>
<li>Ports 1024 and lower are considered to be “privileged” ports and traditionally require root privileges to start up software that bind to them.</li>
<li>User’s programs can usually bind to any ports 1025 and higher.</li>
<li>Just because a daemon/service is typically associated with a particular port or range of ports does not mean that it has to use those ports. Most applications can be configured to use whatever port(s) desired.</li>
<li>Therefore do not assume that if a particular port is in use that a particular app is using it. Remember you are free to name binaries anything you want and sometimes unauthorized users try to be tricky.</li>
</ul>
</div>
<div id="iptables-overview" class="section level2">
<h2>IPTABLES Overview</h2>
<ul>
<li>Filtering is performed by the network stack within the kernel</li>
<li>Asserts policies at OSI Reference Model layers 2, 3 and 4</li>
<li>Only packet headers are inspected</li>
</ul>
<blockquote>
<p><em>Note</em>: Filtering is preformed by the network stack in the kernel</p>
</blockquote>
</div>
<div id="firewalld-overview" class="section level2">
<h2>FIREWALLD Overview</h2>
<ul>
<li>Red Hat introduced a new firewall system with the release of RHEL7, named <code>firewalld</code>.</li>
<li>There is a <code>firewalld</code> GUI named <code>firewall-config</code> and a CLI program named <code>firewall-cmd</code>.</li>
<li><code>firewalld</code> supports multiple zones</li>
</ul>
</div>
<div id="using-firewalld" class="section level2">
<h2>Using FIREWALLD</h2>
<p><strong>Check to see if <code>firewalld</code> is running</strong>:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> systemctl status firewalld</span></code></pre></div>
<p><strong><code>firewalld</code> stores its rules in</strong>:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> /etc/firewalld/zones/public.xml</span></code></pre></div>
<p><strong>Examples</strong>:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--state</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--get-active-zones</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--list-all</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--add-service</span><span class="op">=</span>http</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--add-service</span><span class="op">=</span>http <span class="at">--permanent</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--remove-service</span><span class="op">=</span>http</span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--remove-service</span><span class="op">=</span>http <span class="at">--permanent</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--add-port</span><span class="op">=</span>30000/tcp <span class="at">--permanent</span></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--add-port</span><span class="op">=</span>30000-30010/tcp <span class="at">--permanent</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--remove-port</span><span class="op">=</span>30000/tcp <span class="at">--permanent</span></span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--remove-port</span><span class="op">=</span>30000-30010/tcp <span class="at">--permanent</span></span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--reload</span> <span class="co"># reloads changes, dumps session stuff</span></span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--complete-reload</span></span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--query-panic</span> <span class="co"># if you think you see something weird</span></span>
<span id="cb75-17"><a href="#cb75-17" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--panic-on</span> <span class="co"># turns all ports off</span></span>
<span id="cb75-18"><a href="#cb75-18" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--panic-off</span></span></code></pre></div>
<p>–list-all</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> firewall-cmd <span class="at">--list-all</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="ex">public</span> <span class="er">(</span><span class="ex">active</span><span class="kw">)</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="ex">target:</span> default</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="ex">icmp-block-inversion:</span> no</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>  <span class="ex">interfaces:</span> ens18</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>  <span class="ex">sources:</span> </span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>  <span class="ex">services:</span> cockpit dhcpv6-client ssh</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>  <span class="ex">ports:</span> </span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>  <span class="ex">protocols:</span> </span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>  <span class="ex">masquerade:</span> no</span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>  <span class="ex">forward-ports:</span> </span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>  <span class="ex">source-ports:</span> </span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a>  <span class="ex">icmp-blocks:</span> </span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a>  <span class="ex">rich</span> rules: </span></code></pre></div>
<p>The two we really care about:</p>
<ul>
<li><code>services: cockpit dhcpv6-client ssh</code></li>
<li><code>ports</code></li>
</ul>
</div>
<div id="firewalld-service-files" class="section level2">
<h2>FIREWALLD SERVICE FILES</h2>
<div class="sourceCode" id="cb77"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--get-services</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/firewalld/services/{service-name}.xml</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--info-service</span><span class="op">=</span>{service-name}</span></code></pre></div>
<p><strong>Drop-in Files</strong>: <code>/etc/firewalld/services/</code></p>
<div id="firewalld-advanced-features" class="section level3">
<h3>FIREWALLD ADVANCED FEATURES</h3>
<ul>
<li>Direct Interface</li>
<li>Rich Rules</li>
<li>Lockdown</li>
<li>IP Sets</li>
</ul>

</div>
</div>
</div>
<div id="unit-19" class="section level1">
<h1>19 - System Logs &amp; Monitoring</h1>
<!-- __Related Resources__: -->
<!-- | Type | Content | -->
<!-- | :-- | :-- | -->
<!-- | Original Docs | [PDF](19/Tuesday - 09MAR - System logs & Monitoring - Systems Administration.pdf) - [HTML](19/logging-and-monitoring.html) | -->
<!-- | Resources | -LaUSAH - Chapter 10, Logging<br>-RHEL7 System Aministrators Guide, Chapter 23, Viewing and Managing Log Files (PDF in weekly content) | -->
<div id="rsyslog" class="section level2">
<h2>RSYSLOG</h2>
<ul>
<li>Rather than each service / daemon having their own logging features, a general purpose logging service was created.</li>
<li>RHEL/CentOS provides a package named rsyslog that includes the rsyslogd daemon.</li>
<li>Most all logs are stored under <code>/var/log/</code> or within a sub-directory.</li>
</ul>
<p><strong>SAMPLE</strong> <code>/etc/rsyslog.conf</code></p>
<div class="sourceCode" id="cb78"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="ex">*.info</span><span class="kw">;</span><span class="ex">mail.none</span><span class="kw">;</span><span class="ex">authpriv.none</span><span class="kw">;</span><span class="ex">cron.none</span> /var/log/messages</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="ex">authpriv.*</span> /var/log/secure</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="ex">mail.*</span> <span class="at">-</span>/var/log/maillog</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="ex">cron.*</span> /var/log/cron</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="ex">*.emerg</span> <span class="pp">*</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a><span class="ex">uucp,news.crit</span> /var/log/spooler</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="ex">local7.*</span> /var/log/boot.log</span></code></pre></div>
</div>
<div id="logrotate" class="section level2">
<h2>LOGROTATE</h2>
<ul>
<li>Logrotate allows for the automatic rotation, compression, removal and mailing of log files.</li>
<li>Logrotate can be set to handle a log file daily, weekly, monthly or when the log file gets to a certain size.</li>
<li>Normally, logrotate runs as a daily cron job.</li>
</ul>
</div>
<div id="logrotate-files" class="section level2">
<h2>LOGROTATE FILES</h2>
<p>Runs as a cron job:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/cron.daily/logrotate</span></span></code></pre></div>
<p>Config files:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/logrotate.conf</span> <span class="co">#(compress)</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/logrotate.d/*</span> <span class="co">#(service specific logrotate configs)</span></span></code></pre></div>
<p><strong>Note</strong>: Most services include a specific logrotate config.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[root@sdowdle</span> ~]# rpm <span class="at">-qc</span> httpd <span class="kw">|</span> <span class="fu">grep</span> logrotate</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/logrotate.d/httpd</span></span></code></pre></div>
<p><strong>EXAMPLE ROTATED LOGS</strong></p>
<div class="sourceCode" id="cb82"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[root@esus</span> ~]# ls <span class="at">-lh</span> /var/log/messages<span class="pp">*</span> <span class="er">(</span><span class="ex">from</span> older system<span class="kw">)</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-------</span> 1 root root 80K Sep 29 08:53 /var/log/messages</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-------</span> 1 root root 12K Sep 26 04:03 /var/log/messages.1.gz</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-------</span> 1 root root 11K Sep 19 04:02 /var/log/messages.2.gz</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a><span class="ex">[root@sdowdle</span> ~]# ls <span class="at">-l</span> /var/log/messages<span class="pp">*</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-------</span> 1 root root 464 Sep 29 10:18 /var/log/messages</span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-------</span> 1 root root 10089 Sep 26 03:29 /var/log/messages-20200926</span></code></pre></div>
</div>
<div id="logwatch" class="section level2">
<h2>LOGWATCH</h2>
<ul>
<li>Logwatch is a customizable, pluggable log monitoring system.</li>
<li>Runs as a cron job: <code>/etc/cron.daily/0logwatch</code></li>
<li>It will go through your logs for a given period and make a report in the areas that you wish with the detail that you wish.</li>
<li>By default the logrotate package will email the root user a report every morning.</li>
</ul>
<p><strong>USEFUL COMMANDS</strong></p>
<ul>
<li>tail - output the last part of files
<ul>
<li><code>-f</code> flag is for follow… watch a log file as it grows</li>
</ul></li>
<li><code>grep</code> - search a log file</li>
<li><code>zgrep</code>, <code>zless</code> and <code>zcat</code> - for compressed log files</li>
<li><code>sysstat</code> - provides sar and iostat
<ul>
<li><code>sar</code> and <code>iostat</code> enable system monitoring of disk, network, and other IO activity by parsing the binary log data collected every 10 minutes.</li>
<li>By default, <code>systat</code> runs as a cron job.</li>
</ul></li>
</ul>
</div>
<div id="journald" class="section level2">
<h2>journald</h2>
<ul>
<li>RHEL7 introduced the systemd init system. systemd includes a new logging facility named <code>journald</code>.</li>
<li><code>journald</code> can be run in parallel with <code>rsyslog</code> or as a replacement for it.</li>
<li>The command used to access the <code>journald</code> binary log files is journalctl.</li>
<li>For a regular user to access logging data via <code>journalctl</code>, add them to the adIm group.</li>
</ul>
</div>
<div id="session-vs-persistant" class="section level2">
<h2>SESSION VS PERSISTANT</h2>
<ul>
<li>journald by default stores log data in RAM.</li>
<li>To enable persistant storage just create a directory named journal in /var/log if it doesn’t already exist and then restart the systemd-journald service or reboot.</li>
</ul>
</div>
<div id="journald-features" class="section level2">
<h2>JOURNALD FEATURES</h2>
<ul>
<li>Gets all of boot and shutdown.</li>
<li>More log data</li>
<li>kernel, user processes, and from STDIO and STDOUT</li>
<li>Includes extensive metadata info</li>
<li>All logged data are shown including rotated logs.</li>
<li>journalctl offers database-like queries.</li>
<li>journalct offers some tab completition features.</li>
<li>Graphing of boot up showing service start up times.</li>
</ul>
<div id="journalctl-examples" class="section level3">
<h3>journalctl Examples</h3>
<pre><code>journalctl -n Number
journalctl -p Priority
journalctl -u Unit
journalctl -f (like tail -f)
journalctl --since=value --until=value
journalctl --disk-usage</code></pre>
</div>
</div>
<div id="journalctl-presentation-video-by-lennart-poettering" class="section level2">
<h2>journalctl presentation video by Lennart Poettering</h2>
<p><a href="https://youtu.be/i4CACB7paLc">Lennart Poettering - The systemd Journal</a></p>

</div>
</div>
<div id="unit-20" class="section level1">
<h1>20 - Automation with Cron</h1>
<!-- __Related Resources__: -->
<!-- | Type | Content | -->
<!-- | :-- | :-- | -->
<!-- | Screencast | [20-cron.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/20-cron.webm)<br>[20-cron.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/20-cron.mp4) | -->
<!-- | Original Docs | [PDF](20/Thursday - 11MAR - Automation with cron - Systems Administration.pdf) - [HTML](20/cron.html) | -->
<!-- | Resources | -__RHEL7 System Administrators Guide__ Chapter 24, Automating System Tasks (PDF) | -->
<div id="background" class="section level2">
<h2>Background</h2>
<ul>
<li><code>cron</code> is a standard UNIX daemon that runs specified programs at scheduled times.</li>
<li><code>anacron</code> is like <code>cron</code> but is aimed at machines that aren’t on all the time.</li>
<li><code>at</code> is a utility to schedule one-time tasks.</li>
<li><code>batch</code> is like at except it only runs one-time jobs when the system load is low.</li>
</ul>
</div>
<div id="cron-files" class="section level2">
<h2>CRON Files</h2>
<p><code>crontabs</code> package: Provides /etc/crontab and periodic directories.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[root@dowdle</span> ~]# cat /etc/crontab <span class="co"># (examine output)</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="va">SHELL=</span>/bin/bash</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="va">PATH=</span>/sbin:/bin:/usr/sbin:/usr/bin</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="va">MAILTO=</span>root</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a><span class="co"># For details see man 4 crontabs</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Example of job definition:</span></span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a><span class="co"># .---------------- minute (0 - 59)</span></span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a><span class="co"># |  .------------- hour (0 - 23)</span></span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a><span class="co"># |  |  .---------- day of month (1 - 31)</span></span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a><span class="co"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span></span>
<span id="cb84-13"><a href="#cb84-13" aria-hidden="true" tabindex="-1"></a><span class="co"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span></span>
<span id="cb84-14"><a href="#cb84-14" aria-hidden="true" tabindex="-1"></a><span class="co"># |  |  |  |  |</span></span>
<span id="cb84-15"><a href="#cb84-15" aria-hidden="true" tabindex="-1"></a><span class="co"># *  *  *  *  * user-name  command to be executed</span></span></code></pre></div>
<p><code>cronie</code> package: An enhanced vixie-cron that provides cron service</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[root@dowdle</span> ~]# rpm <span class="at">-ql</span> cronie <span class="co"># (examine output)</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/cron.d</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/cron.d/0hourly</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/cron.deny</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/pam.d/crond</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/sysconfig/crond</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a><span class="ex">/lib/systemd/system/crond.service</span></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/bin/cronnext</span></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/bin/crontab</span></span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/.build-id</span></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/.build-id/20</span></span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/.build-id/20/75713ea7f508632d8eb2af3c51ec59acc4aa52</span></span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/.build-id/32</span></span>
<span id="cb85-14"><a href="#cb85-14" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/.build-id/32/811aea404298dee14ad8fd0b7b34cc9c001dab</span></span>
<span id="cb85-15"><a href="#cb85-15" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/.build-id/f8</span></span>
<span id="cb85-16"><a href="#cb85-16" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/.build-id/f8/e879a884df9d2370d9d1c14f2d2ccfa24fcf79</span></span>
<span id="cb85-17"><a href="#cb85-17" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/sbin/crond</span></span>
<span id="cb85-18"><a href="#cb85-18" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/doc/cronie</span></span>
<span id="cb85-19"><a href="#cb85-19" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/doc/cronie/AUTHORS</span></span>
<span id="cb85-20"><a href="#cb85-20" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/doc/cronie/ChangeLog</span></span>
<span id="cb85-21"><a href="#cb85-21" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/doc/cronie/README</span></span>
<span id="cb85-22"><a href="#cb85-22" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/licenses/cronie</span></span>
<span id="cb85-23"><a href="#cb85-23" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/licenses/cronie/COPYING</span></span>
<span id="cb85-24"><a href="#cb85-24" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/man/man1/cronnext.1.gz</span></span>
<span id="cb85-25"><a href="#cb85-25" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/man/man1/crontab.1.gz</span></span>
<span id="cb85-26"><a href="#cb85-26" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/man/man5/crontab.5.gz</span></span>
<span id="cb85-27"><a href="#cb85-27" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/man/man8/cron.8.gz</span></span>
<span id="cb85-28"><a href="#cb85-28" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/share/man/man8/crond.8.gz</span></span>
<span id="cb85-29"><a href="#cb85-29" aria-hidden="true" tabindex="-1"></a><span class="ex">/var/spool/cron</span></span></code></pre></div>
<blockquote>
<p>Note: Directory that <code>cron</code> files are stored in is <code>/var/spool/cron</code></p>
</blockquote>
<p><strong>What is the daemon binary?</strong> - <code>usr/sbin/crond</code></p>
<p><strong>The service control script?</strong> - <code>/lib/systemd/system/crond.service</code></p>
<blockquote>
<p><code>rpm -ql cronie | grep systemd</code></p>
</blockquote>
<p><strong>Config files?</strong></p>
<div class="sourceCode" id="cb86"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rpm <span class="at">-qc</span> cronie</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/cron.d/0hourly</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/cron.deny</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/pam.d/crond</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/sysconfig/crond</span></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rpm <span class="at">-qc</span> crontabs</span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/crontab</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/sysconfig/run-parts</span></span></code></pre></div>
<p><strong>Documentation?</strong> - <code>rpm -qd cronie</code></p>
</div>
<div id="cron-access-control" class="section level2">
<h2>CRON Access Control</h2>
<p>From <em>crontab (1)</em>:</p>
<ul>
<li>If the <strong>cron.allow</strong> file exists, then you <em>must be listed therein</em> in order to be allowed to use this command.</li>
<li>If the <strong>cron.allow</strong> file does not exist but the <strong>cron.deny</strong> file does exist, then you must not be listed in the <strong>cron.deny</strong> file in order to use this command.</li>
<li>If neither of these files exists, <em>only the super user</em> will be allowed to use this command.</li>
</ul>
</div>
<div id="thus-says-the-man-pages" class="section level2">
<h2>Thus Says the Man Pages</h2>
<p>From <em>crontab (5)</em>:</p>
<ul>
<li>The format of a cron command… each line has five time and date fields, followed by a user name if this is the system crontab file, followed by a command.</li>
<li>Commands are executed by cron(8) when the minute, hour, and month of year fields match the current time, and at least one of the two day fields (day of month, or day of week) match the current time.</li>
<li>cron(8) examines cron entries once every minute.</li>
</ul>
</div>
<div id="crontab-format" class="section level2">
<h2>CRONTAB Format</h2>
<pre><code>{minute} {hour day-of-month} {month} {day-of-week} {command}</code></pre>
<ul>
<li>minute: 0-59</li>
<li>hour: 0-23</li>
<li>day of month: 1-31</li>
<li>month: 1-12 (or names)</li>
<li>day of week: 0-7
<ul>
<li>(0 or 7 is Sun, or use names)</li>
</ul></li>
</ul>
<p><strong>Ranges</strong> of numbers are allowed. Ranges are two numbers separated with a hyphen. The specified range is inclusive. For example, 8-11 for an “hours” entry specifies execution at hours 8, 9, 10 and 11.</p>
<p><strong>Lists</strong> are allowed. A list is a set of numbers (or ranges) separated by commas.</p>
<p><em>Examples</em>: “1,2,5,9,” “0-4,8-12.”</p>
<p><strong>Step values</strong> can be used in conjunction with ranges. Following a range with “<number>” specifies skips of the number’s value through the range.</p>
<p>For example, “0-23/2” can be used in the hours field to specify command execution every other hour.</p>
<p>Steps are also permitted after an asterisk, so if you want to say “every two hours,” just use "*/2".</p>
<p><strong>Names</strong> can also be used for the “month” and “day-of-week” fields.</p>
<ul>
<li>Use the first three letters of the particular day or month (case doesn’t matter).</li>
<li>Ranges or lists of names are not allowed.</li>
</ul>
<p>The “sixth” and last field specifies the <em>command</em> to run.</p>
<p>The entire command portion of the line, up to a newline or % character, will be executed by <code>/bin/sh</code> or by the shell specified in the SHELL variable of the cronfile.</p>
<p>Percent-signs (<em>%</em>) in the command, unless escaped with backslash (/), will be changed into newline characters, and all data after the first <em>%</em> will be sent to the command as standard input.</p>
</div>
<div id="using-crontab" class="section level2">
<h2>Using CRONTAB</h2>
<ul>
<li><code>crontab -l</code>: Lists your cron jobs</li>
<li><code>crontab -e</code>: Create / modify your cron jobs</li>
<li><code>crontab -r</code>: Deletes all cron jobs</li>
<li><code>crontab -u username -{additional-flag}</code>: Work with another user’s crontab</li>
</ul>
<p><strong>Examples</strong>:</p>
<pre><code>*/10 * * * * cd /var/yp; make 2&gt;&amp;1 &gt; /dev/null;
11 2 * * * /usr/bin/wget -O - -q -t 1 http://{some-url}</code></pre>
<p>run system activity accounting tool every 10 minutes</p>
<pre><code>*/10 * * * * root /usr/lib64/sa/sa1 1 1</code></pre>
<p>generate a daily summary of process accounting at 23:53</p>
<pre><code>53 23 * * * root /usr/lib64/sa/sa2 -A</code></pre>
</div>
<div id="review-from-logging-material" class="section level2">
<h2>Review from Logging Material</h2>
<ul>
<li><code>logwatch</code> is run as a cron job. What file is used?</li>
<li><code>logrotate</code> is run as a cron job. What file is used?</li>
</ul>

</div>
</div>
<div id="unit-21" class="section level1">
<h1>21 - Server Apps: Email</h1>
<!-- __Related Resources__: -->
<!-- | Type | Content | -->
<!-- | :-- | :-- | -->
<!-- | Screencast | [21-email-intro.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/21-email-intro.webm)<br>[21-email-intro.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/21-email-intro.mp4) | -->
<!-- | Original Docs | [PDF](21/Tuesday - 16MAR - Server apps_ Email - Systems Administration.pdf) - [HTML](21/email.html) | -->
<!-- | Resources | -LaUSAH: Chapter 18, Electronic Mail<br>- LaUSAH: Chapter 16, DNS: The Domain Name System, MX records<br>- RHEL7 System Administators Guide, Chapter 15, Mail Servers (PDF) | -->
<div id="what-do-you-use-for-email" class="section level2">
<h2>What do you use for email?</h2>
<ul>
<li>What is provided by your ISP?</li>
<li>What is provided by MSU?</li>
<li>Free services like gmail, Hotmail, Yahoo!Mail?</li>
<li>What is provided by your work?</li>
</ul>
</div>
<div id="what-comprises-an-email-system" class="section level2">
<h2>What comprises an email system?</h2>
<p>It used to be that you could simply install an SMTP server and you had an “email server.” That is not the case any more. There are additional pieces that have been added to email over the last decade or so:</p>
<ul>
<li>Virus scanning (<a href="http://www.clamav.net/">ClamAV</a>)</li>
<li>Spam scanning (<a href="http://spamassassin.apache.org/">SpamAssassin</a>)</li>
<li>Webmail (<a href="http://roundcube.net/">RoundCube</a> [<a href="https://www.cs.montana.edu/roundcubemail">ours</a>])</li>
<li>Mobile Access</li>
<li>Collaboration tools
<ul>
<li>Global Addressbook</li>
<li>Calendaring</li>
<li>Documents</li>
<li>Resources</li>
<li>To-do lists</li>
</ul></li>
<li>Mailing lists? Usually done by separate software like Mailman (python-based) and Sympa (perl-based)</li>
</ul>
<p>Also common these days are backup mailservers for redundancy and relaying mailservers that act as filtering systems.</p>
</div>
<div id="how-email-works" class="section level2">
<h2>How email works</h2>
<p>DNS plays a big role in the flow of email. When a <code>user@domain1.com</code> sends an email to <code>user@domain2.com</code> a lot has to be in place for it to work. <code>user@domain1.com</code>’s email client talks to its configured SMTP server which accepts the email for delivery. The SMTP server for domain1 has to look up the MX records for domain2. It then attempts to connect to the server with the lowest MX record value in an attempt to deliver it. If for whatever reason it can’t deliver it to the first MX server, it will progress to the next MX IP with the lowest value. If all MX servers are unreachable, the SMTP server for domain1 will queue the email and try again later. Typically it tries every 4 hours for 4 days at which point it gives up.</p>
<ul>
<li>What are the MX servers for your email account?
<ul>
<li>To find out do the following: <code>dig MX yourdomain.tld</code></li>
</ul></li>
<li>Does your domain have more than one MX record?
<ul>
<li>What are their values?</li>
</ul></li>
</ul>
</div>
<div id="various-anti-spam-tricks" class="section level2">
<h2>Various anti-spam tricks</h2>
<p>I have seen a lot of crazy stuff done by email admins to reduce their amount of spam.</p>
<ul>
<li>Adding MX records for servers that don’t exist.</li>
<li>Automatically reject every first attempt (graylisting).</li>
<li>SPF and DKIM.</li>
<li>Auto reject systems where you have to get put on a whitelist.</li>
<li>Email is fundamentally broken and the only thing that can save it… is <a href="http://en.wikipedia.org/wiki/Public_key_infrastructure">PKI</a>.</li>
</ul>
</div>
<div id="looking-for-a-complete-package" class="section level2">
<h2>Looking for a complete package</h2>
<p>No Linux distro I’m aware of offers a reasonable email system out of the box. Most offer some/many of the components I mentioned but none of them put them together in any integrated way. As a result a number of third party management / middleware systems have been created.</p>
<p>A few that seem reasonable are:</p>
<ol style="list-style-type: decimal">
<li><a href="http://www.mailscanner.info/">Mailscanner</a> (<a href="http://en.wikipedia.org/wiki/Mailscanner">wikipedia</a>)</li>
<li><a href="http://www.zimbra.com/">Zimbra Collaboration Suite</a> (<a href="http://en.wikipedia.org/wiki/Zimbra">wikipedia</a>) [<a href="https://mail.cs.montana.edu/">ours</a>]</li>
<li><a href="http://www.zarafa.com/">Zarafa</a> (<a href="http://en.wikipedia.org/wiki/Zarafa_%28software%29">wikipedia</a>)</li>
<li><a href="http://www.scalix.com/">Scalix</a> (<a href="http://en.wikipedia.org/wiki/Scalix">wikipedia</a>)</li>
<li><a href="http://www.citadel.org/">Citadel</a> (<a href="http://en.wikipedia.org/wiki/Citadel/UX">wikipedia</a>)</li>
<li><a href="http://www.kolab.org/">Kolab</a> (<a href="https://en.wikipedia.org/wiki/Kolab">wikipedia</a>)</li>
</ol>
</div>
<div id="smtp-server-software" class="section level2">
<h2>SMTP server software</h2>
<ul>
<li>sendmail</li>
<li><strong>postfix (installed in our student VMs)</strong></li>
<li>exim</li>
<li>qmail</li>
</ul>
<p>Things SMTP servers need to be able to do:</p>
<ul>
<li>Host multiple domains (virtual hosting)</li>
<li>Allow for <code>user1@domain1</code> and <code>user1@domain2</code> (virtual users)</li>
<li>Map multiple addresses to a single account (aliases)</li>
</ul>
</div>
<div id="pop-and-imap" class="section level2">
<h2>POP and IMAP</h2>
<ul>
<li>Dovecot</li>
<li>UW imap</li>
<li>Courier</li>
</ul>
</div>
<div id="email-client-programs" class="section level2">
<h2>Email Client Programs</h2>
<ul>
<li><code>/usr/bin/mail</code>: Provided by the mailx program.
<ul>
<li>Very simple, line oriented client</li>
</ul></li>
<li><code>alpine</code> - Full-featured TUI client available in EPEL</li>
</ul>
</div>
<div id="email-related-configs" class="section level2">
<h2>Email Related Configs</h2>
<ul>
<li><code>/etc/aliases</code>: global aliases and forwards</li>
<li><code>~/.foward</code>: user defined aliases and forwards</li>
<li><code>/etc/postfix/*</code>: postfix config location
<ul>
<li>since student VMs have Postfix installed</li>
</ul></li>
</ul>

</div>
</div>
<div id="unit-22" class="section level1">
<h1>22 - Server Apps: Apache (intro)</h1>
<!-- __Related Resources__: -->
<!-- | Type | Content | -->
<!-- | :-- | :-- | -->
<!-- | Screencast | [22-apache-intro.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/22-apache-intro.webm) <br> [22-apache-intro.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/22-apache-intro.mp4) | -->
<!-- | Original Docs | [HTML](22/apache-intro.html) - [PDF](22/Thursday - 18APR - Server apps_ Apache Intro - Systems Administration.pdf) | -->
<!-- | Resources | LaUSAH REFERENCE - Chapter 19, Web Hosting<br>RHEL8 Deploying Different Types of Servers, Chapter 1, Setting Up The Apache Web Server (PDF in weekly materials) | -->
<div id="brief-history-of-apache" class="section level2">
<h2>Brief History of Apache</h2>
<ul>
<li>In the beginning, the father of the World Wide Web (Tim Berners-Lee) created the first web browser (WorldWideWeb) and the first web server (CERN HTTPd) for the NeXTSTEP platform. CERN HTTPd version 0.1 was released in June 1991. It was later ported to other flavors of Unix and OpenVMS. Version 3.0A was the final version released on July 15, 1996.</li>
<li>Next came NCSA HTTPd written by Robert McCool and others. They also had one of the first graphical web browsers that was multi-platform and it was named Mosaic. Most of the NCSA folks left to start up Netscape… and as a result development of NCSA HTTPd and Mosaic languished. Mosaic was eventually licensed to several other browser makers (including Microsoft for Internet Explorer). Development of NCSA HTTPd was eventually stopped in 1998.</li>
<li>Apache started life within the community that was left behind when the development of NCSA HTTPd stalled… and a series of patches for NCSA HTTPd were circulated mostly by email among the various community developers who remained. The group eventually decided to take all of their patches (a patchy server) and start over as the Apache project. Over time any of the original NCSA HTTPd code that remained was replaced. Version 2 of Apache was a substantial rewrite of the 1.x code.</li>
<li>Today Apache continues to hold a prominent marketshare in the web server software market. The Feb. 2021 survey by Netcraft (1,204,252,411 sites, 263,042,054 unique domains) shows <strong>Apache</strong> in second place with a 26.32% marketshare with <strong>Microsoft IIS</strong> server in third place with 6.50%. The first place contender is another free software packaged named nginx with 34.54%.
<ul>
<li>Perhaps more revealing are their numbers for “<strong>Market share of active sites</strong>” where Apache is leading with 25.48% and Microsoft IIS doesn’t even place in the top four. nginx is in second place with 19.84%.</li>
<li>Also of interest are their numbers for “<strong>Market share of the top million busiest sites</strong>” where Apache leads with 25.58% and Microsoft IIS is in fourth place with 6.87%. nginx is in second place with 23.21%.</li>
</ul></li>
<li>For more information see: <a href="https://news.netcraft.com/archives/2021/02/26/february-2021-web-server-survey.html">Netcraft’s September 2020 Web Server Survey</a></li>
</ul>
</div>
<div id="apache-basics" class="section level2">
<h2>Apache Basics</h2>
<div id="packages" class="section level3">
<h3>Packages</h3>
<ul>
<li><code>httpd</code></li>
<li><code>httpd-tools</code></li>
<li><code>httpd-manual</code>: if you want the web-based docs</li>
<li><code>mod_*</code>: if you want any additional embedded functionality</li>
</ul>
</div>
<div id="popular-add-on-packages" class="section level3">
<h3>Popular add on packages</h3>
<ul>
<li><code>php*</code>: used to be forked but is now PHP FastCGI Process Manager php-pfm</li>
<li><code>mod_perl</code> (EPEL)</li>
<li><code>mod_ssl</code></li>
</ul>
</div>
<div id="systemd-unit-file" class="section level3">
<h3>systemd unit file</h3>
<div class="sourceCode" id="cb91"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> /usr/lib/systemd/system/httpd.service</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> /usr/lib/systemd/system/httpd@.service</span></code></pre></div>
</div>
<div id="default-ports" class="section level3">
<h3>Default ports</h3>
<pre><code>http: 80
https: 443 (if mod_ssl is installed and configured)</code></pre>
</div>
<div id="configuration-files-1" class="section level3">
<h3>Configuration files</h3>
<ul>
<li><code>/etc/httpd/conf/httpd.conf</code></li>
<li><code>/etc/httpd/conf/*</code></li>
<li><code>/etc/httpd/conf.d/*</code></li>
</ul>
</div>
<div id="binaries-some-from-httpd-tools" class="section level3">
<h3>Binaries: (some from httpd-tools)</h3>
<ul>
<li><code>/usr/bin/ab</code></li>
<li><code>/usr/bin/htpasswd</code></li>
<li><code>/usr/bin/logresolve</code></li>
<li><code>/usr/sbin/apachectl</code></li>
<li><code>/usr/sbin/httpd</code></li>
<li><code>/usr/sbin/rotatelogs</code></li>
<li><code>/usr/sbin/suexec</code></li>
</ul>
</div>
<div id="logs" class="section level3">
<h3>Logs</h3>
<ul>
<li><code>/etc/logrotate.d/httpd</code></li>
<li><code>/var/log/httpd/access_log</code>, <code>/var/log/httpd/error_log</code></li>
</ul>
</div>
<div id="working-directory" class="section level3">
<h3>Working directory</h3>
<ul>
<li><code>/var/www</code></li>
</ul>
</div>
<div id="man-pages-1" class="section level3">
<h3>Man pages</h3>
<ul>
<li><code>/usr/share/man/man1/ab.1.gz</code></li>
<li><code>/usr/share/man/man1/htdbm.1.gz</code></li>
<li><code>/usr/share/man/man1/htdigest.1.gz</code></li>
<li><code>/usr/share/man/man1/htpasswd.1.gz</code></li>
<li><code>/usr/share/man/man1/logresolve.1.gz</code></li>
<li><code>/usr/share/man/man8/apachectl.8.gz</code></li>
<li><code>/usr/share/man/man8/htcacheclean.8.gz</code></li>
<li><code>/usr/share/man/man8/httpd.8.gz</code></li>
<li><code>/usr/share/man/man8/rotatelogs.8.gz</code></li>
<li><code>/usr/share/man/man8/suexec.8.gz</code></li>
</ul>
<p>The httpd-manual package contains a complete manual and reference guide that can also be found: <a href="http://httpd.apache.org/docs/2.4/" class="uri">http://httpd.apache.org/docs/2.4/</a></p>
</div>
</div>
<div id="common-configuration-options" class="section level2">
<h2>Common configuration options</h2>
<ul>
<li>DocumentRoot: <code>/var/www/html</code></li>
<li>UserDir: <code>~username</code></li>
<li>ScriptAlias: <code>/var/www/cgi-bin</code>
<ul>
<li>Defines where scripts can run from</li>
</ul></li>
</ul>
</div>
<div id="access-controls-with" class="section level2">
<h2>Access controls with</h2>
<ul>
<li>Directory - Per directory settings</li>
<li>DirectoryIndex - What file is shown if directory is requested
<ul>
<li>index.html</li>
<li>index.php</li>
</ul></li>
<li>AccessFileName
<ul>
<li>.htaccess (dynamic config changes)</li>
<li>.htpasswd</li>
</ul></li>
<li>Location
<ul>
<li>Complete customization of logging and error pages</li>
</ul></li>
<li>VirtualHost</li>
</ul>
</div>
<div id="also-of-interest" class="section level2">
<h2>Also of interest</h2>
<ul>
<li>A nice write-up on the 25th anniversary of the WWW from Dec. 2015</li>
<li>Tim Berners-Lee’s Three challenges for the web from Mar. 2017 which includes:
<ul>
<li>We’ve lost control of our personal data</li>
<li>It’s too easy for misinformation to spread on the web</li>
<li>Political advertising online needs transparency and understanding</li>
</ul></li>
</ul>

</div>
</div>
<div id="unit-23" class="section level1">
<h1>23 - Apache (hands-on)</h1>
<!-- __Related Resources__: -->
<!-- | Type | Content | -->
<!-- | :-- | :-- | -->
<!-- | Screencast | [23-apache-hands-on.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/23-apache-hands-on.webm)<br>[23-apache-hands-on.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/23-apache-hands-on.mp4) | -->
<!-- | Original Docs | [HTML](23/homework5.html) - [PDF](23/Tuesday - 23MAR - Server apps_ Apache hands-on [Homework 5] - Systems Administration.pdf) | -->
<div id="goals-for-this-hands-on-aka-homework-5" class="section level2">
<h2>Goals for this hands on (aka Homework 5)</h2>
<p>We are going to do a few of the most common Apache configuration changes:</p>
<ul>
<li>Verify that apache (httpd) is installed and running</li>
<li>We are going to enable user directories which allows users to create a directory within their home directory that apache can access with a ~username reference (Example: <a href="http://www.cs.montana.edu/~sdowdle" class="uri">http://www.cs.montana.edu/~sdowdle</a>)</li>
<li>We are going to create a virtualhost as an example of a single apache server hosting multiple domain names</li>
<li>Lastly we are going to install PHP and make sure it is working with apache</li>
</ul>
<p><strong><em>All work is done on your own student VM. Note, when you see “xx” or “lastname” below, you’ll want to alter the content to reflect your own information</em></strong>.</p>
</div>
<div id="getting-started" class="section level2">
<h2>Getting Started</h2>
<ul>
<li>Is apache installed? (<code>rpm -q httpd</code>)
<ul>
<li>If not, install it: <code>dnf  install httpd --refresh</code></li>
</ul></li>
<li>Is it set to run? (<code>systemctl status httpd.service</code>)
<ul>
<li>If not, set enable it: (<code>systemctl enable httpd.service</code>)</li>
</ul></li>
<li>Is it running? (<code>systemctl status httpd.service</code>)
<ul>
<li>If it isn’t running, start it: (<code>systemctl start httpd.service</code>)</li>
</ul></li>
</ul>
<p>Verify your web server is working from the course server (links <a href="http://kvm-dowdle" class="uri">http://kvm-dowdle</a>) [your name]</p>
</div>
<div id="refresher-on-firewalld" class="section level2">
<h2>Refresher on firewalld</h2>
<p>Did it work? It shouldn’t have because we have not opened up our VM’s firewall yet.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--list-all</span> <span class="co"># (shows what&#39;s open so far, shouldn&#39;t see http or https yet)</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--add-service</span><span class="op">=</span>http <span class="kw">;</span> <span class="ex">firewall-cmd</span> <span class="at">--add-service</span><span class="op">=</span>http <span class="at">--permanent</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="ex">firewall-cmd</span> <span class="at">--list-all</span> <span class="co"># (Look good now?)</span></span></code></pre></div>
<ul>
<li>Try again (from the course server):
<ul>
<li>links <a href="http://kvm-dowdle" class="uri">http://kvm-dowdle</a> [your name]</li>
</ul></li>
<li>Working now?</li>
<li>What showed up?</li>
<li>Look at <code>/etc/httpd/conf.d/welcome.conf</code> and do what it says to disable the welcome page.</li>
<li>Restart apache (<code>systemctl restart httpd</code>)</li>
<li>Now browse to it again (links <a href="http://kvm-dowdle" class="uri">http://kvm-dowdle</a>) [your name]</li>
<li>What changed?</li>
<li>Create an index page for your DocumentRoot:
<ul>
<li><code>nano -w /var/www/html/index.html</code></li>
</ul></li>
<li>Put inside of it “This is the web page for the default domain.”</li>
</ul>
<p><strong>UserDir</strong></p>
<ul>
<li>Make a backup copy of your <code>/etc/httpd/conf.d/userdir.conf</code> file. Do <strong>NOT</strong> end the backup filename in <code>.conf</code> or it will still be used by Apache.</li>
<li>Edit the <code>/etc/httpd/conf.d/userdir.conf</code> file.
<ul>
<li>Find the line that says: <code>UserDir disable</code></li>
<li>…and add a # to the front of it. Find the line that says:
<ul>
<li><code>#UserDir public_html</code></li>
</ul></li>
<li>…and remove the comment.</li>
</ul></li>
</ul>
<p><strong>SELinux Booleans that need to be changed</strong>:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> getsebool <span class="at">-a</span> <span class="kw">|</span> <span class="fu">grep</span> httpd</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Need to enable httpd_enable_homedirs and httpd_read_user_content</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> setsebool <span class="at">-P</span> httpd_enable_homedirs on</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> setsebool <span class="at">-P</span> httpd_read_user_content on</span></code></pre></div>
<ul>
<li>Restart apache (<code>systemctl restart httpd.service</code>)</li>
<li>Now create a <code>public_html</code> directory in one of your user directory as your user
<ul>
<li><code>mkdir /home/lastname/public_html</code></li>
</ul></li>
<li>Make sure the permissions on your user’s home directory are at least 711.</li>
<li>Make sure the permissions on the public_html directory are at least 755.</li>
<li>Create an index.html page inside of public_html.</li>
<li>Browse to it:
<ul>
<li><code>links http://kvm-lastname/~lastname</code></li>
</ul></li>
</ul>
<p><strong>VirtualHost</strong></p>
<p>We will create a fake (i.e. using /etc/hosts for DNS resolution) host / domain named www.testdomain1.com.</p>
<p>Edit the <code>/etc/hosts</code> file and add the following line:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="ex">192.168.122.1xx</span>       www.testdomain1.com          testdomain1</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="ex">192.168.122.1xx</span>       kvm-lastname.localdomain     kvm-lastname</span></code></pre></div>
<ul>
<li><p>You can find your ip address by looking at the output of the following command as root on your student VM:</p>
<ul>
<li><code>ip add</code></li>
</ul></li>
<li><p>Or by looking in <code>/etc/sysconfig/network-scripts/ifcfg-eth0</code></p></li>
<li><p>Now we need to edit the <code>/etc/httpd/conf/httpd.conf</code> to enable VirtualHosts and add to virtualhost references… one for the default host and one for our new virutal domain.</p></li>
<li><p>Edit <code>/etc/httpd/conf/httpd.conf</code> and add the following lines at the bottom of the configuration:</p>
<p>&lt;VirtualHost 192.168.122.1xx:80&gt;
ServerName kvm-lastname.localdomain
DocumentRoot /var/www/html
</VirtualHost></p>
<p>&lt;VirtualHost 192.168.122.1xx:80&gt;
ServerName www.testdomain1.com
DocumentRoot /var/www/testdomain1
CustomLog logs/testdomain1-access_log combined
ErrorLog logs/testdomain1-error_log
</VirtualHost></p></li>
<li><p>Make sure any DocumentRoot directories you refer to exist:</p></li>
</ul>
<div class="sourceCode" id="cb96"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> /var/www/testdomain1</span></code></pre></div>
<ul>
<li>Put an index.html page in the testdomain1 directory</li>
</ul>
<div class="sourceCode" id="cb97"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nano</span> <span class="at">-w</span> /var/www/testdomain1/index.html</span></code></pre></div>
<ul>
<li>Add to it the line “Hello from testdomain1” and save.</li>
<li>Restart the webserver (<code>systemctl restart httpd.service</code>)</li>
<li>Browse to your new domain
<ul>
<li><code>links www.testdomain1.com</code></li>
</ul></li>
<li>Did it work?</li>
</ul>
</div>
<div id="installing-php" class="section level2">
<h2>Installing PHP</h2>
<div class="sourceCode" id="cb98"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> install php</span></code></pre></div>
<ul>
<li>After installing php do the following: <code>systemctl enable --now php-fpm.service</code></li>
<li>Restart the webserver (<code>systemctl restart httpd.service</code>)</li>
<li>Put an <code>index.php</code> page into <code>/var/www/testdomain1</code> and put inside it the following:</li>
</ul>
<div class="sourceCode" id="cb99"><pre class="sourceCode php"><code class="sourceCode php"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;?PHP</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">phpinfo</span><span class="ot">();</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="kw">?&gt;</span></span></code></pre></div>
<ul>
<li>Browse to the new domain again.
<ul>
<li>Did it work?</li>
<li>Why not?</li>
</ul></li>
</ul>
<p>Let’s try our default domain instead.</p>
<ul>
<li>Create an <code>index.php</code> file in <code>/var/www/html/</code> and put in the same sample php code shown above and then browse to your default domain.</li>
<li><code>links http://localhost/   or links http://kvm-lastname/</code></li>
<li>Which page showed up?
<ul>
<li>The <code>index.html</code> or the <code>index.php</code> page?</li>
</ul></li>
<li>Now explicitly browse to the index.php page.
<ul>
<li><code>links http://localhost/index.php</code> or <code>links http://kvm-lastname/index.php</code></li>
</ul></li>
<li>Did it work?</li>
</ul>
</div>
<div id="submitting-homework-5" class="section level2">
<h2>Submitting Homework 5</h2>
<p>You can find the instructions here as <code>/public/homework5.txt</code> on the course server.
<br>
Feel free to copy it over to <code>/root/HOMEWORK/</code> on your student VM.</p>

</div>
</div>
<div id="unit-24" class="section level1">
<h1>24 - Server Apps: MariaDB (intro)</h1>
<!-- __Related Resources__: -->
<!-- | Type | Content | -->
<!-- | :-- | :-- | -->
<!-- | Screencast | [25-mariadb-intro.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/25-mariadb-intro.webm) or [25-mariadb-intro.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/25-mariadb-intro.mp4) | -->
<!-- | Original Docs | [HTML](24/db-intro.html) - [PDF](24/Thursday - 25MAR - Server apps_ MariaDB Intro - Systems Administration.pdf) | -->
<div id="a-brief-history-of-mysql-and-mariadb" class="section level2">
<h2>A brief history of MySQL and MariaDB</h2>
<p>MySQL was originally created in 1995. The developers around it formed MySQL AB, a Swedish company, that mainly got its money from support contracts. Eventually MySQL became dual / multi-licensed with one of them being the GNU GPL.</p>
<p>In 2008 Sun Microsystems purchased MySQL AB for a reported $1 billion although since that time many of the original / main developers have left Sun to form alternative projects. There is growing confusion as to who will end up being the driving force behind MySQL in the years to come. In January of 2010, Oracle acquired Sun Microsystems.</p>
<p>MySQL was designed to be a fast, light-weight database especially suited for the needs of web-based applications. Most often the M in “LAMP.” MySQL is accessible from a large variety of programming languages including Perl, PHP, Python, C, C++ and from Java’s ODBC.</p>
<p>MySQL has had a reputation of not being as feature complete as Oracle’s database products and / or PostgreSQL. As a result some database purists turn their noses up at MySQL. As MySQL has matured many / most of the “missing features” have either been added or are on the roadmap for a future release.</p>
<p>The correct pronunciation of MySQL is “my es que el” and not “my sequel.” SEQUEL was an IBM database language which was a predecessor to SQL. Unfortunately because of some other database products pronouncing SQL as “sequel” it might be the case that more people say it wrong than right.</p>
<p>If you want more than that, read the <a href="http://en.wikipedia.org/wiki/Mysql">MySQL wikipedia</a> page.</p>
<p>Some of the unique features of MySQL are:</p>
<ol style="list-style-type: decimal">
<li>Multiple database storage engines (table types) - InnoDB allows for transactions</li>
<li>lexible table design - Easily insert columns and alter existing column data-types on-the-fly</li>
</ol>
<p><strong>MariaDB</strong> is a community-developed fork of the MySQL and development is led by some of the original MySQL developers.
MariaDB was forked due to concerns MySQL’s acquisition by Oracle Corporation.</p>
<blockquote>
<p>Most Linux distributions provide mariadb.</p>
</blockquote>
<div class="figure">
<img src="24/Widenius-Daughters.jpg" alt="" />
<p class="caption">Monty Widenius and his daughters, My and Maria</p>
</div>
</div>
<div id="packages-1" class="section level2">
<h2>Packages</h2>
<ul>
<li><code>mariadb-bench</code>: MariaDB benchmark scripts and data</li>
<li><code>mariadb-libs</code>: The shared libraries required for MariaDB clients</li>
<li><code>mariadb-server</code>: The MariaDB server and related files</li>
<li><code>mariadb-test</code>: The test suite distributed with MySQL</li>
<li><code>mariadb</code>: MariaDB client programs and shared libraries</li>
</ul>
<div id="additional-packages" class="section level3">
<h3>Additional Packages</h3>
<ul>
<li><code>bytefx-data-mysql</code>: MySQL database connectivity for Mono</li>
<li><code>lua-sql-mysql</code>: MySQL database connectivity for the Lua programming</li>
<li><code>mod_auth_mysql</code>: Basic authentication for the Apache web server using a</li>
<li><code>MySQL-python</code>: An interface to MySQL</li>
<li><code>pam_mysql</code>: PAM module for auth UNIX users using MySQL data base</li>
<li><code>perl-DBD-MySQL</code>: A MySQL interface for perl</li>
<li><code>php-mysql</code>: A module for PHP applications that use MySQL databases</li>
<li><code>qt3-MySQL</code>: MySQL drivers for Qt 3’s SQL classes</li>
<li><code>qt-mysql</code>: MySQL driver for Qt’s SQL classes</li>
<li><code>ruby-mysql</code>: A Ruby interface to MySQL</li>
<li><code>tcl-mysqltcl</code>: MySQL interface for Tcl</li>
</ul>
</div>
</div>
<div id="files" class="section level2">
<h2>Files</h2>
<div id="control-script" class="section level3">
<h3>Control script</h3>
<div class="sourceCode" id="cb100"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/lib/systemd/system/mariadb.service</span></span></code></pre></div>
</div>
<div id="binaries" class="section level3">
<h3>Binaries</h3>
<p>Server application</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/bin/mysqld_safe</span></span></code></pre></div>
<p>Client application (part of the mariadb package)</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/bin/mysql</span></span></code></pre></div>
<p>Backup utility (part of the mariadb package)</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/bin/mysqldump</span></span></code></pre></div>
</div>
<div id="configuration-files-2" class="section level3">
<h3>Configuration files</h3>
<div class="sourceCode" id="cb104"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/my.cnf</span> <span class="co">#(part of the mariadb-libs package)</span></span></code></pre></div>
<pre><code>[mysqld]
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock
user=mysql
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0

[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid</code></pre>
<p>Let’s look at the files on the filesystem:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /var/lib/mysql <span class="kw">;</span> <span class="fu">ls</span> <span class="at">-lha</span> <span class="co"># (Each directory is a database)</span></span></code></pre></div>
</div>
</div>
<div id="usage-1" class="section level2">
<h2>Usage</h2>
<p>Use a client to connect to the server and then run commands on the server.</p>
<p>Connect to mariadb-server using mysql text-based client:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mysql</span> <span class="at">-u</span> lee.dowdle <span class="at">-h</span> host <span class="at">-p</span> databasename</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<ul>
<li><code>-p</code>: prompt for password</li>
<li><code>databasename</code>: set database to “use”</li>
</ul>
<div id="creating-a-database" class="section level3">
<h3>Creating a database</h3>
<pre class="mysql"><code>mysql&gt; create database whatever;</code></pre>
</div>
<div id="choosing-a-database-to-use" class="section level3">
<h3>Choosing a database to use</h3>
<pre class="mysql"><code>mysql&gt; show databases;
mysql&gt; use databasename;
mysql&gt; show tables;
mysql&gt; describe tablename;</code></pre>
</div>
<div id="creating-a-table" class="section level3">
<h3>Creating a table</h3>
<p>See tutorial link below.</p>
<p><strong>Example</strong>:</p>
<pre class="mysql"><code>mysql&gt; CREATE TABLE pet (name VARCHAR(20), owner VARCHAR(20),
-&gt; species VARCHAR(20), sex CHAR(1), birth DATE, death DATE);</code></pre>
<p><strong>Give a user access to a database</strong>:</p>
<pre class="mysql"><code>mysql&gt; grant all on whatever.* to user@host identified by &#39;password&#39;;</code></pre>
<p><strong>Record actions</strong>:</p>
<pre class="mysql"><code>INSERT, UPDATE, SELECT, DELETE</code></pre>
<p>Please see MySQL’s <a href="http://dev.mysql.com/doc/refman/5.1/en/tutorial.html">tutorial</a>.</p>
</div>
</div>
<div id="backups" class="section level2">
<h2>Backups</h2>
<div class="sourceCode" id="cb113"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mysqldump</span> <span class="at">-u</span> root <span class="at">-p</span> <span class="at">--all-databases</span> <span class="at">--hex-blob</span> <span class="at">--routines</span> <span class="at">--triggers</span> <span class="op">&gt;</span> mysql-complete-backup.sql</span></code></pre></div>
<ul>
<li><code>&gt;</code>: redirect output to a file since stdout is the default</li>
<li>You can get massive disk savings by compressing the <code>.sql</code> (120MB -&gt; 25MB)</li>
<li>Of course you can do per-user backups, see man page for full details</li>
<li>What kind of file is an <code>.sql</code> file? A flat text file with <code>.sql</code> statements.</li>
</ul>
<div id="to-import-from-an-.sql-file-just-redirect-from-a-file." class="section level3">
<h3>To import from an .sql file, just redirect from a file.</h3>
<p><strong>Example</strong>:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mysql</span> <span class="at">-u</span> user <span class="at">-h</span> hostname <span class="at">-p</span> databasename <span class="op">&lt;</span> database.sql</span></code></pre></div>

</div>
</div>
</div>
<div id="unit-25" class="section level1">
<h1>25 - MariaDB (hands-on)</h1>
<!-- __Related Resources__: -->
<!-- | Type | Content | -->
<!-- | :-- | :-- | -->
<!-- | Screencast | [25-mariadb-hands-on.webm](https://www.cs.montana.edu/users/sdowdle/csci351/videos/25-mariadb-hands-on.webm)<br>[25-mariadb-hands-on.mp4](https://www.cs.montana.edu/users/sdowdle/csci351/videos/25-mariadb-hands-on.mp4) | -->
<!-- | Original Docs | [HTML](25/homework6.html) - [PDF](25/Thursday - 25MAR - Server apps_ MariaDB Hands-on [Homework 6] - Systems Administration.pdf) | -->
<div id="install-it" class="section level2">
<h2>Install it</h2>
<div class="sourceCode" id="cb115"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> install mariadb-server</span></code></pre></div>
</div>
<div id="now-to-set-it-up" class="section level2">
<h2>Now to set it up</h2>
<div class="sourceCode" id="cb116"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> status mariadb.service</span></code></pre></div>
<p>Is it enabled? If not do:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> enable mariadb.service</span></code></pre></div>
</div>
<div id="now-start-it" class="section level2">
<h2>Now start it</h2>
<div class="sourceCode" id="cb118"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> start mariadb.service</span></code></pre></div>
<p>Notice what appears in the log when you start it for the first time! (journalctl -u mariadb.service)</p>
<p>Initializing MariaDB database: Installing MariaDB system tables…
OK
Filling help tables…
OK</p>
<p>To start mariadb at boot time you have to copy
support-files/mariadb.server to the right place for your system</p>
<p>PLEASE REMEMBER TO SET A PASSWORD FOR THE MariaDB root USER !
To do so, start the server, then issue the following commands:</p>
<p>/usr/bin/mysqladmin -u root password ‘new-password’
/usr/bin/mysqladmin -u root -h sdowdle.localdomain password ‘new-password’</p>
<p>Alternatively you can run:
/usr/bin/mysql_secure_installation</p>
<p>which will also give you the option of removing the test
databases and anonymous user created by default. This is
strongly recommended for production servers.</p>
<p>See the manual for more instructions.</p>
<p>You can start the MariaDB daemon with:
cd /usr ; /usr/bin/mysqld_safe &amp;</p>
<p>You can test the MariaDB daemon with mysql-test-run.pl
cd /usr/mysql-test ; perl mysql-test-run.pl</p>
<p>Please report any problems with the /usr/bin/mysqlbug script!</p>
<p>Starting mysqld: [ OK ]</p>
<p>By default a mysql root user password IS NOT set. You can verify this by connecting without a password:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[root@kvm-dowdle</span> ~]# mysql</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Welcome</span> to the MariaDB monitor.  Commands end with <span class="kw">;</span> <span class="ex">or</span> <span class="dt">\g</span>.</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Your</span> MariaDB connection id is 3</span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Server</span> version: 5.5.56 Source distribution</span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a><span class="ex">Type</span> <span class="st">&#39;help;&#39;</span> or <span class="st">&#39;\h&#39;</span> for help. Type <span class="st">&#39;\c&#39;</span> to clear the current input statement.</span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a><span class="ex">mysql</span><span class="op">&gt;</span></span></code></pre></div>
</div>
<div id="set-a-mysql-root-password" class="section level2">
<h2>Set a mysql root password</h2>
<blockquote>
<p>replace new-password below with the desired password</p>
</blockquote>
<div class="sourceCode" id="cb120"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/bin/mysqladmin</span> <span class="at">-u</span> root password <span class="st">&#39;new-password&#39;</span></span></code></pre></div>
<p><em>or</em></p>
<div class="sourceCode" id="cb121"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/bin/mysql_secure_installation</span> <span class="er">(</span><span class="ex">PREFERRED</span><span class="kw">)</span></span></code></pre></div>
</div>
<div id="restart-mysqld" class="section level2">
<h2>Restart mysqld</h2>
<div class="sourceCode" id="cb122"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> restart mariadb.service</span></code></pre></div>
<div id="verify-that-you-can-no-longer-connect-without-a-password" class="section level3">
<h3>Verify that you can no longer connect without a password</h3>
<div class="sourceCode" id="cb123"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[root@kvm-dowdle</span> ~]# mysql</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ERROR</span> 1045 <span class="er">(</span><span class="ex">28000</span><span class="kw">)</span><span class="bu">:</span> Access denied for user <span class="st">&#39;root&#39;</span>@<span class="st">&#39;localhost&#39;</span> <span class="er">(</span><span class="ex">using</span> password: NO<span class="kw">)</span></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a><span class="ex">[root@kvm-dowdle</span> ~]# mysql <span class="at">-p</span></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Enter</span> password:</span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Welcome</span> to the MariaDB monitor.  Commands end with <span class="kw">;</span> <span class="ex">or</span> <span class="dt">\g</span>.</span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a><span class="ex">Your</span> MariaDB connection id is 3</span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a><span class="ex">Server</span> version: 5.5.56 Source distribution</span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a><span class="ex">Type</span> <span class="st">&#39;help;&#39;</span> or <span class="st">&#39;\h&#39;</span> for help. Type <span class="st">&#39;\c&#39;</span> to clear the current input statement.</span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-11"><a href="#cb123-11" aria-hidden="true" tabindex="-1"></a><span class="ex">mysql</span><span class="op">&gt;</span></span></code></pre></div>
</div>
<div id="now-lets-create-a-new-database-and-make-a-mysql-user-who-can-use-it" class="section level3">
<h3>Now let’s create a new database and make a mysql user who can use it</h3>
<div class="sourceCode" id="cb124"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mysql</span><span class="op">&gt;</span> create database dowdle<span class="kw">;</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="ex">mysql</span><span class="op">&gt;</span> grant all on dowdle.<span class="pp">*</span> to dowdle@localhost identified by <span class="st">&#39;password&#39;</span><span class="kw">;</span></span></code></pre></div>
</div>
<div id="now-exit-the-mysql-client-as-the-mysql-root-user-and-try-to-connect-as-your-new-user-to-their-database.-does-it-work" class="section level3">
<h3>Now exit the mysql client as the mysql root user and try to connect as your new user to their database. Does it work?</h3>
<p><strong>Import existing tables / data</strong>:</p>
<p>If you look in /public on the course server you will find a file named mysqlsampledatabase.sql. scp that file to your student VM. Have a look at the file and you’ll see it is just a flat text file full of comments and SQL statements to create a database (if it doesn’t already exist), create tables and then insert records into the tables. It is basically the output of a mysqldump backup. Edit the file with your preferred editor and search/replace every occurance of classicmodels with your last name. Import it into your user database by using a command that takes the following form:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mysql</span> <span class="at">-u</span> dowdle <span class="at">-p</span> <span class="op">&lt;</span> mysqlsampledatabase.sql</span></code></pre></div>
<p><strong>Then connect to the database and see what’s there</strong>.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mysql</span> <span class="at">-u</span> dowdle <span class="at">-p</span> dowdle</span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="ex">MariaDB</span><span class="op">&gt;</span> show tables <span class="kw">;</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a><span class="ex">describe</span> customers <span class="kw">;</span></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="ex">MariaDB</span><span class="op">&gt;</span> select customerNumber, customerName, creditLimit from customers where creditLimit <span class="op">&gt;</span> 125000<span class="kw">;</span></span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Update</span> a record:</span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a><span class="ex">MariaDB</span><span class="op">&gt;</span> update customers set creditLimit=<span class="st">&#39;500000&#39;</span> where customerNumber=298<span class="kw">;</span></span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a><span class="ex">Verify</span> it updated:</span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a><span class="ex">MariaDB</span><span class="op">&gt;</span> select customerNumber, customerName, creditLimit from customers where creditLimit <span class="op">&gt;</span> 125000<span class="kw">;</span></span></code></pre></div>
<p><strong>Backup an existing database</strong>:</p>
<p>Exit the mariadb client if you are connected and run the following command to back up the database:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mysqldump</span> <span class="at">--databases</span> dowdle <span class="at">-u</span> dowdle <span class="at">-p</span> <span class="at">--hex-blob</span> <span class="at">--routines</span> <span class="at">--triggers</span> <span class="op">&gt;</span> /backup/dowdle-<span class="va">$(</span><span class="fu">date</span> +%Y%m%d<span class="va">)</span>.sql</span></code></pre></div>
<p>That assumes you did homework 2 and have a /backup mount to copy it to.</p>
<p><strong>When done to submit for homework check, scp /public/homework6.txt on the course server to /root/HOMEWORK/ on your student VM</strong>.</p>

</div>
</div>
</div>
<div id="dns" class="section level1">
<h1>26 - DNS</h1>
<div id="introduction-to-dns" class="section level2">
<h2>Introduction to DNS</h2>
<ul>
<li>DNS associates hostnames with their respective IP addresses, so that when users want to connect to other machines on the network, they can refer to them by name, without having to remember IP addresses.</li>
<li>Use of DNS and FQDNs also has advantages for system administrators, allowing the flexibility to change the IP address for a host without affecting name-based queries to the machine. Conversely, administrators can shuffle which machines handle a name-based query.</li>
<li>DNS is normally implemented using centralized servers that are authoritative for some domains and refer to other DNS servers for other domains.</li>
</ul>
<p>When a client host requests information from a nameserver, it usually connects to port 53. The nameserver then attempts to resolve the FQDN based on its resolver library, which may contain authoritative information about the host requested or cached data from an earlier query. If the nameserver does not already have the answer in its resolver library, it queries other nameservers, called root nameservers, to determine which nameservers are authoritative for the FQDN in question. Then, with that information, it queries the authoritative nameservers to determine the IP address of the requested host. If a reverse lookup is performed, the same procedure is used, except that the query is made with an unknown IP address rather than a name.</p>
<div id="nameserver-zones" class="section level3">
<h3>Nameserver Zones</h3>
<p>On the Internet, the FQDN of a host can be broken down into different sections. These sections are organized into a hierarchy (much like a tree), with a main trunk, primary branches, secondary branches, and so forth. Consider the following FQDN:</p>
<pre><code>bob.sales.example.com</code></pre>
<p>When looking at how an FQDN is resolved to find the IP address that relates to a particular system, read the name from right to left, with each level of the hierarchy divided by periods (.). In this example, com defines the top level domain for this FQDN. The name example is a sub-domain under com, while sales is a sub-domain under example. The name furthest to the left, bob, identifies a specific machine hostname.</p>
<p>Except for the hostname, each section is called a zone, which defines a specific namespace. A namespace controls the naming of the sub-domains to its left. While this example only contains two sub-domains, an FQDN must contain at least one sub-domain but may include many more, depending upon how the namespace is organized.</p>
<p>Zones are defined on authoritative nameservers through the use of zone files (which describe the namespace of that zone), the mail servers to be used for a particular domain or sub-domain, and more. Zone files are stored on primary nameservers (also called master nameservers), which are truly authoritative and where changes are made to the files, and secondary nameservers (also called slave nameservers), which receive their zone files from the primary nameservers. Any nameserver can be a primary and secondary nameserver for different zones at the same time, and they may also be considered authoritative for multiple zones. It all depends on how the nameserver is configured.</p>
</div>
<div id="nameserver-types" class="section level3">
<h3>Nameserver Types</h3>
<p>There are two primary nameserver configuration types:</p>
<div id="authoritative" class="section level4">
<h4>Authoritative</h4>
<p>Authoritative nameservers answer to resource records that are part of their zones only. This category includes both primary (master) and secondary (slave) nameservers.</p>
</div>
<div id="recursive" class="section level4">
<h4>Recursive</h4>
<p>Recursive nameservers offer resolution services, but they are not authoritative for any zone. Answers for all resolutions are cached in a memory for a fixed period of time, which is specified bythe retrieved resource record.</p>
<p>Most Frequently Used Types of Records</p>
<p>DNS record types (from LAUSAH Fourth Edition)</p>
<div class="figure">
<img src="26/table-17.1-Some_popular_implementations_of_DNS.png" alt="" />
<p class="caption">Table 17.6</p>
</div>
<table>
<tbody>
<tr class="odd">
<td align="center">A</td>
<td align="left">Address Records</td>
</tr>
<tr class="even">
<td align="center">CNAME</td>
<td align="left">Canonical Name maps one name to another</td>
</tr>
<tr class="odd">
<td align="center">MX</td>
<td align="left">Mail eXchange record</td>
</tr>
<tr class="even">
<td align="center">NS</td>
<td align="left">NameServer record</td>
</tr>
<tr class="odd">
<td align="center">PTR</td>
<td align="left">PoinTeR record, primarily for reverse resolution</td>
</tr>
<tr class="even">
<td align="center">SOA</td>
<td align="left">Start Of Authority resource record</td>
</tr>
<tr class="odd">
<td align="center">Others</td>
<td align="left">SRV, TXT, AAAA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="bind-package-information" class="section level2">
<h2>Bind Package Information</h2>
<ul>
<li>Package name: <code>bind</code> - With authoritative zones</li>
<li>Service control script:
<ul>
<li><code>/etc/rc.d/init.d/named</code> (sysvinit)</li>
<li><code>/usr/lib/systemd/system/named.service</code> (systemd)</li>
</ul></li>
<li>Binary: <code>/usr/sbin/named</code></li>
<li>Config files:</li>
</ul>
<div class="sourceCode" id="cb129"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[root@ct-dowdle</span> /]# rpm <span class="at">-qc</span> bind</span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/logrotate.d/named</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/named.conf</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/named.iscdlv.key</span></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/named.rfc1912.zones</span></span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/named.root.key</span></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/rndc.conf</span></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/rndc.key</span></span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/sysconfig/named</span></span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a><span class="ex">/var/named/named.ca</span></span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a><span class="ex">/var/named/named.empty</span></span>
<span id="cb129-12"><a href="#cb129-12" aria-hidden="true" tabindex="-1"></a><span class="ex">/var/named/named.localhost</span></span>
<span id="cb129-13"><a href="#cb129-13" aria-hidden="true" tabindex="-1"></a><span class="ex">/var/named/named.loopback</span></span></code></pre></div>
</div>
<div id="simplified-view-of-how-it-works" class="section level2">
<h2>Simplified view of how it works</h2>
<p><code>/etc/named.conf</code> states which zones a name server is authoritative for.</p>
<p><strong>Example</strong>:</p>
<pre><code>options {
directory &quot;/var/named&quot;;
};

zone &quot;example.com.&quot; IN {
type master;
file &quot;example.com.zone&quot;;
};</code></pre>
<blockquote>
<p>See “Example Zone Record” in this week’s content to see a sample zone record.</p>
</blockquote>
</div>
<div id="zone-transfers" class="section level2">
<h2>Zone Transfers</h2>
<p>A zone transfer is the process by which a DNS master communicates with one or more DNS slave servers to propagate new and updated zone information. With BIND you have to create an encryption key setup where your servers trust each other and accept transfers.</p>
</div>
<div id="common-mistakes-to-avoid" class="section level2">
<h2>Common Mistakes to Avoid</h2>
<p>It is very common for beginners to make mistakes when editing BIND configuration files. Be sure to avoid the following issues:</p>
<ul>
<li>Take care to increment the serial number when editing a zone file.</li>
<li>If the serial number is not incremented, the master nameserver has the correct, new information, but the slave nameservers are never notified of the change and do not attempt to refresh their data of that zone.</li>
<li>Be careful to use ellipses and semi-colons correctly in the <code>/etc/named.conf</code> file. An omitted semi-colon or unclosed ellipse section can cause named to refuse to start.</li>
<li>Remember to place periods (.) in zone files after all FQDNs and omit them on hostnames.</li>
<li>A period at the end of a domain name denotes a fully qualified domain name. If the period is omitted, then named appends the name of the zone or the $ORIGIN value to complete it.</li>
<li>If a firewall is blocking connections from the named program to other nameservers, update your firewall.</li>
<li>By default, BIND version 9 uses random ports above 1024 to query other nameservers. Some firewalls, however, expect all nameservers to communicate using only port 53. To force named to use port 53, add the following line to the options statement of <code>/etc/named.conf</code>:
<ul>
<li>query-source address * port 53;</li>
</ul></li>
</ul>
</div>
<div id="hands-on---installing-a-caching-only-nameserver-in-your-student-vm" class="section level2">
<h2>Hands On - Installing a caching-only nameserver in your student VM:</h2>
<p>Inside your student VM as root do the following:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> yum install bind <span class="co"># (may already be installed)</span></span></code></pre></div>
<p>Is bind set to run automatically? If not:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> systemctl status named.service</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> systemctl enable <span class="at">--now</span> named.service</span></code></pre></div>
<p>Now to start using our own nameserver for DNS resolution:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nano <span class="at">-w</span> /etc/resolv.conf</span></code></pre></div>
<p>Comment out current line, add new line:</p>
<pre><code>nameserver 127.0.0.1</code></pre>
<p>Test it. Does it work?</p>
<p>How do you test?</p>
<p><strong>When done with the homework</strong>:
There is a <code>/public/homework7.txt</code> on the course server. Just copy that to your <code>~/HOMEWORK/</code> directory on your student VM.</p>

</div>
</div>
<div id="virtualization" class="section level1">
<h1>27 - Virtualization</h1>
<p>The goal of this lecture is to introduce you to thes various virtualization products that are available for Linux and to compare and contrast them.</p>
<p>Related but distinctly different topics include:Terminal Services and Application Virtualization</p>
<div id="why-virtualize" class="section level2">
<h2>Why Virtualize?</h2>
<ul>
<li>Increase hardware utilization</li>
<li>Improved resource management (configuration changes vs. hardware)</li>
<li>Cost and energy savings</li>
<li>Legacy OS / Applications won’t run on new hardware</li>
<li>Easier migration because hardware is abstracted</li>
<li>Development and Testing</li>
<li>Less painful upgrades with easy rollback</li>
<li>Improved reliability with high availability / live or offline migration</li>
<li>Security by isolating services</li>
</ul>
</div>
<div id="use-cases" class="section level2">
<h2>Use Cases</h2>
<ul>
<li><strong>Desktop user</strong> - Trying out new OSes, Linux distro hopping</li>
<li><strong>Small business</strong> - Servers and desktops</li>
<li><strong>Enterprise business</strong> - Datacenters for cost and energy savings</li>
<li>Education - You have VMs and containers, right?</li>
<li>Research - Easily make environments and simulations</li>
<li>Cloud computing is heavily based on virtualization</li>
</ul>
</div>
<div id="brief-history-of-virtualization" class="section level2">
<h2>Brief History of Virtualization</h2>
<ul>
<li>On mainframe computers IBM has had virtualization features built into their hardware since the <strong>1960s</strong>.</li>
<li>In micro and personal computers the first virtualization product I heard about was a card for the <strong>Apple II</strong> that allowed running some <strong>MS-DOS</strong> applications.</li>
<li>Later <strong>Atari ST</strong> users could emulate Atari 8-bit computers.</li>
<li>PC emulation was possible with PC-Ditto.</li>
<li>Mac emulation was possible with Spectre.</li>
<li>Video game machine emulators are quite common… think MAME.</li>
<li>VMware released its first product in <strong>1999</strong>.</li>
</ul>
</div>
<div id="types-of-hypervisors" class="section level2">
<h2>Types of Hypervisors</h2>
<p>A term you will see tossed around frequently when referring to both Full virtualization and paravirtualization is <a href="http://en.wikipedia.org/wiki/Hypervisor">hypervisor</a>. The two distinct categories of hypervisors are:</p>
<ul>
<li>Level 1 - bare metal</li>
<li>Level 2 - hosted</li>
</ul>
<p>Many virtualization vendors offer a layered approach to their product line and may offer both type 1 and type 2 based products.</p>
</div>
<div id="products" class="section level2">
<h2>Products</h2>
<ul>
<li><a href="http://www.vmware.com/">VMware</a> [1999] (<a href="http://en.wikipedia.org/wiki/Vmware">wikipedia</a>)
<ul>
<li>Full virtualization
<ul>
<li>Type 2 - Windows, Mac, and Linux
<ul>
<li>VMware Player (no cost)</li>
<li>Server (no cost)</li>
<li>Workstation (cost)</li>
<li>Fusion (cost)</li>
</ul></li>
<li>Type 1
<ul>
<li>ESX / Infrastructure (cost)</li>
<li>ESXi (no cost)</li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="http://www.parallels.com/products/pvc46/">SWsoft Virtuozzo</a> [2001] (<a href="http://en.wikipedia.org/wiki/SWsoft#Virtuozzo">wikipedia</a>) - Later Parallels
<ul>
<li>OS virtualization
<ul>
<li>Linux version 2001 (cost)</li>
<li>Windows version 2005 (cost)</li>
</ul></li>
</ul></li>
<li><a href="http://linux-vserver.org/">Linux-VServer</a> [2001] (<a href="http://en.wikipedia.org/wiki/Linux-vserver">wikipedia</a>)
<ul>
<li>OS virtualization
<ul>
<li>Linux only (free software)</li>
</ul></li>
</ul></li>
<li><a href="http://www.xen.org/">Xen</a> / <a href="http://www.citrix.com/">Citrix</a> [2003] (<a href="http://en.wikipedia.org/wiki/Xen">wikipedia</a>)
<ul>
<li>Paravirtualization
<ul>
<li>Linux (free software, no cost, and cost)</li>
<li>Windows (maybe)</li>
</ul></li>
</ul></li>
<li><a href="http://wiki.openvz.org/">OpenVZ</a> [2005] (<a href="http://en.wikipedia.org/wiki/Openvz">wikipedia</a>)
<ul>
<li>OS virtualization (upstream of Virtuozzo)
<ul>
<li>Linux only (free software)</li>
</ul></li>
</ul></li>
<li><a href="http://www.parallels.com/">Parallels</a> [2005] (<a href="http://en.wikipedia.org/wiki/Parallels,_Inc.">wikipedia</a>)
<ul>
<li>Full virtualization
<ul>
<li>Type 2 for Mac, Linux &amp; Windows</li>
<li>May have a Type 1?!?</li>
</ul></li>
<li>OS virtualization (see Virtuozzo)</li>
</ul></li>
<li><a href="http://www.virtualbox.org/">VirtualBox</a> [2007] (<a href="http://en.wikipedia.org/wiki/VirtualBox">wikipedia</a>)
<ul>
<li>Full virtualization
<ul>
<li>Type 2 for Mac, Linux, Windows, and Solaris</li>
</ul></li>
</ul></li>
<li><a href="http://www.linux-kvm.org/">KVM</a> [2007] (<a href="http://en.wikipedia.org/wiki/Kernel-based_Virtual_Machine">wikipedia</a>)
<ul>
<li>Full virtualization
<ul>
<li>Type 1.5 / Hybrid? Requires virt support in CPU</li>
</ul></li>
</ul></li>
<li><a href="http://lxc.sourceforge.net/">LXC</a> [2008] (<a href="http://en.wikipedia.org/wiki/Lxc">wikipedia</a>)
<ul>
<li>OS virtualization
<ul>
<li>Linux only</li>
</ul></li>
</ul></li>
<li><a href="https://www.docker.com/">Docker</a> [2013] (<a href="https://en.wikipedia.org/wiki/Docker_%28software%29">wikipedia</a>)
<ul>
<li>Application containers
<ul>
<li>Linux and Microsoft Windows</li>
</ul></li>
</ul></li>
</ul>
<blockquote>
<p>I will spend quite a bit of time elaborating on each product, its design and how they differ… <strong>verbally in class</strong>. More detail will be offered in additional lectures as we concentrate on specific products.</p>
</blockquote>
<p>Things not covered:
<a href="http://en.wikipedia.org/wiki/User_Mode_Linux">UML</a>,
<a href="http://en.wikipedia.org/wiki/Wine_%28software%29">Wine</a>,
<a href="http://en.wikipedia.org/wiki/Win4Lin">Win4Lin</a>,
<a href="http://en.wikipedia.org/wiki/Qemu">QEMU</a>,
<a href="http://en.wikipedia.org/wiki/Bochs">Bochs</a></p>

</div>
</div>
<div id="kvm" class="section level1">
<h1>28 - KVM</h1>

</div>
<div id="system-containers" class="section level1">
<h1>29 - System Containers</h1>

</div>
<div id="references-1" class="section level1 unnumbered">
<h1>References</h1>

</div>
            </section>

          </div>
        </div>
      </div>


    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/RK-MSU/351-System-Administration/edit/main/%s",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/RK-MSU/351-System-Administration/blob/main/%s",
"text": null
},
"download": null,
"search": false,
"toc": {
"collapse": "section",
"toc_depth": 4,
"scroll_highlight": true
},
"info": false,
"toolbar": {
"position": "fixed"
}
});
});
</script>

</body>

</html>
